"use strict";var r=Object.defineProperty;var f=Object.getOwnPropertyDescriptor;var v=Object.getOwnPropertyNames;var P=Object.prototype.hasOwnProperty;var w=(t,i)=>{for(var s in i)r(t,s,{get:i[s],enumerable:!0})},y=(t,i,s,l)=>{if(i&&typeof i=="object"||typeof i=="function")for(let o of v(i))!P.call(t,o)&&o!==s&&r(t,o,{get:()=>i[o],enumerable:!(l=f(i,o))||l.enumerable});return t};var d=t=>y(r({},"__esModule",{value:!0}),t);var S={};w(S,{default:()=>g});module.exports=d(S);var u=require("@raycast/api");var p=require("node:path"),c=require("node:fs"),e=require("@raycast/api"),a=require("node:child_process");async function m(){let t={style:e.Toast.Style.Failure,title:"Privileges.app is not installed.",message:"Install it from: https://github.com/SAP/macOS-enterprise-privileges",primaryAction:{title:"Go to https://github.com/SAP/macOS-enterprise-privileges",onAction:i=>{(0,e.open)("https://github.com/SAP/macOS-enterprise-privileges"),i.hide()}}};await(0,e.showToast)(t)}async function h(){let t=(await(0,e.getApplications)()).find(s=>s.bundleId==="corp.sap.privileges");if(!t)return null;let i=(0,p.join)(t.path,"Contents","Resources","PrivilegesCLI");return(0,c.existsSync)(i)?new n(i):null}var n=class{constructor(i){this.cliPath=i}async grant(){(0,a.execSync)(`${this.cliPath} --add`)}async revoke(){(0,a.execSync)(`${this.cliPath} --remove`)}};async function g(){let t=await h();if(!t){await m();return}await t.revoke(),await(0,u.showHUD)("\u{1F512} Privileges revoked")}
