"use strict";var s=Object.defineProperty;var v=Object.getOwnPropertyDescriptor;var w=Object.getOwnPropertyNames;var P=Object.prototype.hasOwnProperty;var y=(t,i)=>{for(var o in i)s(t,o,{get:i[o],enumerable:!0})},d=(t,i,o,p)=>{if(i&&typeof i=="object"||typeof i=="function")for(let r of w(i))!P.call(t,r)&&r!==o&&s(t,r,{get:()=>i[r],enumerable:!(p=v(i,r))||p.enumerable});return t};var S=t=>d(s({},"__esModule",{value:!0}),t);var A={};y(A,{default:()=>f});module.exports=S(A);var h=require("node:timers/promises"),l=require("@raycast/api");var c=require("node:path"),m=require("node:fs"),e=require("@raycast/api"),a=require("node:child_process");async function g(){let t={style:e.Toast.Style.Failure,title:"Privileges.app is not installed.",message:"Install it from: https://github.com/SAP/macOS-enterprise-privileges",primaryAction:{title:"Go to https://github.com/SAP/macOS-enterprise-privileges",onAction:i=>{(0,e.open)("https://github.com/SAP/macOS-enterprise-privileges"),i.hide()}}};await(0,e.showToast)(t)}async function u(){let t=(await(0,e.getApplications)()).find(o=>o.bundleId==="corp.sap.privileges");if(!t)return null;let i=(0,c.join)(t.path,"Contents","Resources","PrivilegesCLI");return(0,m.existsSync)(i)?new n(i):null}var n=class{constructor(i){this.cliPath=i}async grant(){(0,a.execSync)(`${this.cliPath} --add`)}async revoke(){(0,a.execSync)(`${this.cliPath} --remove`)}};async function f(){let t=await u();if(!t){await g();return}await t.grant(),await(0,l.showHUD)("\u{1F513} Granting privileges for 1 minute\u2026"),await(0,h.setTimeout)(6e4),await t.revoke(),await(0,l.showHUD)("\u{1F512} Privileges revoked")}
