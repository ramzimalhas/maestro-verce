"use strict";var s=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var g=Object.prototype.hasOwnProperty;var f=(n,i)=>{for(var e in i)s(n,e,{get:i[e],enumerable:!0})},u=(n,i,e,r)=>{if(i&&typeof i=="object"||typeof i=="function")for(let a of p(i))!g.call(n,a)&&a!==e&&s(n,a,{get:()=>i[a],enumerable:!(r=m(i,a))||r.enumerable});return n};var h=n=>u(s({},"__esModule",{value:!0}),n);var F={};f(F,{default:()=>c});module.exports=h(F);var d=require("react"),t=require("@raycast/api"),o=require("react/jsx-runtime"),S=async(n,i)=>{if(i=="Merge"){let e=await t.LocalStorage.allItems();Object.entries(e).forEach(([r])=>{r in n&&Promise.resolve(t.LocalStorage.setItem(r,n[r])).then(()=>delete n[r])});for(let r in n)await t.LocalStorage.setItem(r,n[r]);(0,t.showToast)({title:"Updated Jump data!"})}else if(i=="Replace"){await t.LocalStorage.clear();for(let e in n)await t.LocalStorage.setItem(e,n[e]);(0,t.showToast)({title:"Replaced Jump data!"})}(0,t.popToRoot)()},l=(n,i)=>{let e=null;if(n.trim().length==0)e="JSON string cannot be empty.";else{try{let r=JSON.parse(n.trim());for(let a in r)if(!parseFloat(r[a])){e="Unexpected data type in place of numeric weights.";break}}catch{e="Please enter a valid JSON string!"}e==null&&!n.trim().match(/^{(.+:.+,?)+}$/)&&(e="Please enter a valid JSON string!")}if(e)return i(e),e;i(void 0)},w=()=>{let[n,i]=(0,d.useState)();return(0,o.jsxs)(t.Form,{actions:(0,o.jsx)(t.ActionPanel,{children:(0,o.jsx)(t.Action.SubmitForm,{icon:t.Icon.ChevronRight,onSubmit:e=>{if(l(e.jsonStringField,i)==null){let r=JSON.parse(e.jsonStringField.trim());Promise.resolve(S(r,e.importMethodField))}}})}),children:[(0,o.jsxs)(t.Form.Dropdown,{id:"importMethodField",title:"Import Method",defaultValue:"Replace",info:`'Merge' updates the weights of existing entries and adds any new entries with a unique name.

'Replace All Data' removes existing entries and adds the newly specified entries.`,children:[(0,o.jsx)(t.Form.Dropdown.Item,{title:"Merge",value:"Merge"},"Merge"),(0,o.jsx)(t.Form.Dropdown.Item,{title:"Replace All Data",value:"Replace"},"Replace")]}),(0,o.jsx)(t.Form.TextArea,{id:"jsonStringField",title:"JSON String",placeholder:"Enter a JSON string...",error:n,onChange:e=>{l(e,i)},onBlur:e=>{l(e.target.value,i)},info:`Must be a valid JSON string specifying destinations and weights. For example:

{"https://google.com":1.1880000000000002,"https://mail.google.com":1.05,"/System/Applications/Calendar.app":1.05}`})]})};function c(){return(0,o.jsx)(w,{})}
