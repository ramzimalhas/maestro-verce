var b=Object.defineProperty,V=Object.defineProperties,M=Object.getOwnPropertyDescriptor,U=Object.getOwnPropertyDescriptors,j=Object.getOwnPropertyNames,N=Object.getOwnPropertySymbols;var $=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable;var O=(t,n,s)=>n in t?b(t,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[n]=s,C=(t,n)=>{for(var s in n||(n={}))$.call(n,s)&&O(t,s,n[s]);if(N)for(var s of N(n))_.call(n,s)&&O(t,s,n[s]);return t},T=(t,n)=>V(t,U(n)),B=t=>b(t,"__esModule",{value:!0});var F=(t,n)=>{for(var s in n)b(t,s,{get:n[s],enumerable:!0})},z=(t,n,s,d)=>{if(n&&typeof n=="object"||typeof n=="function")for(let a of j(n))!$.call(t,a)&&(s||a!=="default")&&b(t,a,{get:()=>n[a],enumerable:!(d=M(n,a))||d.enumerable});return t};var W=(t=>(n,s)=>t&&t.get(n)||(s=z(B({}),n,1),t&&t.set(n,s),s))(typeof WeakMap!="undefined"?new WeakMap:0);var K={};F(K,{default:()=>L});var e=require("@raycast/api"),i=require("react");var c=require("@raycast/api"),l=require("fs/promises"),u=require("path");function q(t){return t.sort((n,s)=>E(n)-E(s)),t}function y(t,n){return q(t),t.map(s=>{if(typeof s=="object"){if("max-age"in s)return`max-age=${s["max-age"]}`;if("s-maxage"in s)return`s-maxage=${s["s-maxage"]}`;if("stale-while-revalidate"in s)return`stale-while-revalidate=${s["stale-while-revalidate"]}`;if("stale-if-error"in s)return`stale-if-error=${s["stale-if-error"]}`}else return s}).join(n?", ":",")}function E(t){if(typeof t=="object"){if("max-age"in t)return 4;if("s-maxage"in t)return 5;if("stale-while-revalidate"in t)return 6;if("stale-if-error"in t)return 7}else switch(t){case"private":return 1;case"public":return 2;case"no-cache":return 3;case"immutable":return 8;case"must-revalidate":return 9;case"proxy-revalidate":return 10;case"no-transform":return 11;case"must-understand":return 12;case"no-store":return 13}return Number.MAX_VALUE}function R(t){if(typeof t=="object"){if("max-age"in t)return"max-age=N";if("s-maxage"in t)return"s-maxage=N";if("stale-while-revalidate"in t)return"stale-while-revalidate=N";if("stale-if-error"in t)return"stale-if-error=N"}return t}function w(t){if(typeof t=="object"){if("max-age"in t)return;if("s-maxage"in t)return"duration the response remains fresh - specific for shared caches";if("stale-while-revalidate"in t)return"reuse stale response while cache is revalidated";if("stale-if-error"in t)return"reuse stale responses when an origin responds with an error"}else switch(t){case"no-cache":return;case"no-store":return;case"no-transform":return"intermediaries shouldn't transform the response contents";case"must-revalidate":return"must revalidate before reusing cache";case"proxy-revalidate":return"shared caches (e.g. Proxies) revalidate before reusing cache";case"must-understand":return"only store cache if requirements for caching based on status code is understood";case"private":return;case"public":return;case"immutable":return"revalidation not necessary (use e.g. for resources with hashed URLs)"}}async function x(t){if(typeof t=="object"){if("max-age"in t)return await(0,l.readFile)((0,u.join)(c.environment.assetsPath,"docs/max-age.md"),{encoding:"utf-8"});if("s-maxage"in t)return await(0,l.readFile)((0,u.join)(c.environment.assetsPath,"docs/s-maxage.md"),{encoding:"utf-8"});if("stale-while-revalidate"in t)return await(0,l.readFile)((0,u.join)(c.environment.assetsPath,"docs/stale-while-revalidate.md"),{encoding:"utf-8"});if("stale-if-error"in t)return await(0,l.readFile)((0,u.join)(c.environment.assetsPath,"docs/stale-if-error.md"),{encoding:"utf-8"})}else switch(t){case"no-cache":return await(0,l.readFile)((0,u.join)(c.environment.assetsPath,"docs/no-cache.md"),{encoding:"utf-8"});case"no-store":return await(0,l.readFile)((0,u.join)(c.environment.assetsPath,"docs/no-store.md"),{encoding:"utf-8"});case"no-transform":return await(0,l.readFile)((0,u.join)(c.environment.assetsPath,"docs/no-transform.md"),{encoding:"utf-8"});case"must-revalidate":return await(0,l.readFile)((0,u.join)(c.environment.assetsPath,"docs/must-revalidate.md"),{encoding:"utf-8"});case"proxy-revalidate":return await(0,l.readFile)((0,u.join)(c.environment.assetsPath,"docs/proxy-revalidate.md"),{encoding:"utf-8"});case"must-understand":return await(0,l.readFile)((0,u.join)(c.environment.assetsPath,"docs/must-understand.md"),{encoding:"utf-8"});case"private":return await(0,l.readFile)((0,u.join)(c.environment.assetsPath,"docs/private.md"),{encoding:"utf-8"});case"public":return await(0,l.readFile)((0,u.join)(c.environment.assetsPath,"docs/public.md"),{encoding:"utf-8"});case"immutable":return await(0,l.readFile)((0,u.join)(c.environment.assetsPath,"docs/immutable.md"),{encoding:"utf-8"})}return null}function L(){let{push:t}=(0,e.useNavigation)();return _jsx(e.List,{searchBarPlaceholder:"Where is the response allowed to be stored?"},_jsx(e.List.Item,{title:"shared",subtitle:"private and shared cache",accessoryIcon:e.Icon.ArrowRight,accessoryTitle:"Browser, Proxies, CDNs",actions:_jsx(e.ActionPanel,null,_jsx(e.Action,{title:"Select",onAction:()=>t(_jsx(P,{directive:"max-age",directives:[]}))}))}),_jsx(e.List.Item,{title:"public",subtitle:"private and shared cache including requests with `Authorization` header",accessoryIcon:e.Icon.ArrowRight,accessoryTitle:"Browser, Proxies, CDNs",actions:_jsx(e.ActionPanel,null,_jsx(e.Action,{title:"Select",onAction:()=>t(_jsx(P,{directive:"max-age",directives:["public"]}))}),_jsx(e.Action,{title:"Show `public` Docs",onAction:()=>t(_jsx(h,{directive:"public"}))}))}),_jsx(e.List.Item,{title:"private",subtitle:"private cache only",accessoryIcon:e.Icon.ArrowRight,accessoryTitle:"Browser",actions:_jsx(e.ActionPanel,null,_jsx(e.Action,{title:"Select",onAction:()=>t(_jsx(P,{directive:"max-age",directives:["private"]}))}),_jsx(e.Action,{title:"Show `private` Docs",onAction:()=>t(_jsx(h,{directive:"private"}))}))}),_jsx(e.List.Item,{title:"no-store",subtitle:"don't store at all",actions:_jsx(e.ActionPanel,null,_jsx(e.Action,{title:"Finish",onAction:()=>t(_jsx(S,{directives:["no-store"]}))}),_jsx(e.Action,{title:"Show `no-store` Docs",onAction:()=>t(_jsx(h,{directive:"no-store"}))}))}))}function P({directive:t,directives:n,onSelect:s}){let{push:d,pop:a}=(0,e.useNavigation)(),[f,m]=(0,i.useState)("hours"),[g,v]=(0,i.useState)("1"),p=(0,i.useMemo)(()=>{let o=parseFloat(g);if(!o||o<0||isNaN(o))return!1;switch(f){case"seconds":default:return Math.round(o);case"minutes":return Math.round(o*60);case"hours":return Math.round(o*60*60);case"days":return Math.round(o*60*60*24);case"weeks":return Math.round(o*60*60*24*7);case"months":return Math.round(o*60*60*24*(365.25/12));case"years":return Math.round(o*60*60*24*365.25)}},[g,f]);return _jsx(e.List,{navigationTitle:`${t}=`,searchBarPlaceholder:"How long is the cache valid?",searchText:g,onSearchTextChange:v,searchBarAccessory:_jsx(e.List.Dropdown,{tooltip:"select duration unit",defaultValue:f,onChange:m,storeValue:!0},_jsx(e.List.Dropdown.Item,{value:"seconds",title:"seconds"}),_jsx(e.List.Dropdown.Item,{value:"minutes",title:"minutes"}),_jsx(e.List.Dropdown.Item,{value:"hours",title:"hours"}),_jsx(e.List.Dropdown.Item,{value:"days",title:"days"}),_jsx(e.List.Dropdown.Item,{value:"weeks",title:"weeks"}),_jsx(e.List.Dropdown.Item,{value:"months",title:"months"}),_jsx(e.List.Dropdown.Item,{value:"years",title:"years"}))},p&&_jsx(e.List.Item,{title:String(p),subtitle:"seconds",accessoryIcon:s?void 0:e.Icon.ArrowRight,actions:_jsx(e.ActionPanel,null,_jsx(e.Action,{title:"Select",onAction:()=>{s?(s(p),a()):d(_jsx(J,{directives:[...n,{[t]:p}]}))}}),!s&&_jsx(e.Action,{title:"Finish",onAction:()=>d(_jsx(S,{directives:[...n,{[t]:p}]}))}),_jsx(e.Action,{title:"Show `max-age` docs",onAction:()=>d(_jsx(h,{directive:{[t]:0}}))}))}),t==="max-age"&&_jsx(e.List.Item,{title:"no-cache",subtitle:"store in caches but revalidate before reuse",actions:_jsx(e.ActionPanel,null,_jsx(e.Action,{title:"Finish",onAction:()=>d(_jsx(S,{directives:[...n,"no-cache"]}))}),_jsx(e.Action,{title:"Show `no-cache` Docs",onAction:()=>d(_jsx(h,{directive:"no-cache"}))}))}))}var X=["immutable","must-revalidate","proxy-revalidate"],G=["s-maxage","stale-while-revalidate","stale-if-error"];function J({directives:t}){let{push:n}=(0,e.useNavigation)(),[s,d]=(0,i.useState)(!1),[a,f]=(0,i.useState)(null),[m,g]=(0,i.useState)({"s-maxage":null,"stale-while-revalidate":null,"stale-if-error":null}),[v,p]=(0,i.useState)(!1),[o,k]=(0,i.useState)(!1),A=_jsx(_jsxFragment,null,_jsx(e.Action,{title:"Finish header",onAction:()=>n(_jsx(S,{directives:[...t,...a?[a]:[],...Object.entries(m).filter(([,r])=>r!==null).map(([r,D])=>({[r]:D})),...v?["must-understand","no-store"]:[],...o?["no-transform"]:[]]}))}),_jsx(e.Action,{title:"Toggle Docs Split",onAction:()=>d(r=>!r)}));return _jsx(e.List,{navigationTitle:"Other Options",isShowingDetail:s},_jsx(e.List.Section,{title:"Revalidation"},X.map(r=>_jsx(e.List.Item,{key:r,title:r,subtitle:w(r),detail:_jsx(I,{directive:r}),accessoryIcon:a===r?e.Icon.Checkmark:e.Icon.Circle,actions:_jsx(e.ActionPanel,null,a===r?_jsx(e.Action,{title:"Deselect",onAction:()=>f(null)}):_jsx(e.Action,{title:"Select",onAction:()=>f(r)}),A,_jsx(e.Action,{title:`Open \`${r}\` Docs`,onAction:()=>n(_jsx(h,{directive:r}))}))}))),_jsx(e.List.Section,{title:"Other"},G.map(r=>_jsx(e.List.Item,{key:r,title:r,subtitle:w({[r]:0}),detail:_jsx(I,{directive:{[r]:0}}),accessoryIcon:m[r]!==null?e.Icon.Checkmark:e.Icon.ArrowRight,accessoryTitle:m[r]!==null?`${m[r]} seconds`:void 0,actions:_jsx(e.ActionPanel,null,m[r]!==null?_jsx(e.Action,{title:"Deselect",onAction:()=>g(D=>T(C({},D),{[r]:null}))}):_jsx(e.Action,{title:"Select",onAction:()=>n(_jsx(P,{directives:[],directive:r,onSelect:D=>g(H=>T(C({},H),{[r]:D}))}))}),A,_jsx(e.Action,{title:`Open \`${r}\` docs`,onAction:()=>n(_jsx(h,{directive:{[r]:0}}))}))})),_jsx(e.List.Item,{title:"no-transform",subtitle:w("no-transform"),detail:_jsx(I,{directive:"no-transform"}),accessoryIcon:o?e.Icon.Checkmark:e.Icon.Circle,actions:_jsx(e.ActionPanel,null,o?_jsx(e.Action,{title:"Deselect",onAction:()=>k(!1)}):_jsx(e.Action,{title:"Select",onAction:()=>k(!0)}),A,_jsx(e.Action,{title:"Open `no-transform` Docs",onAction:()=>n(_jsx(h,{directive:"no-transform"}))}))}),_jsx(e.List.Item,{title:"must-understand",subtitle:w("must-understand"),detail:_jsx(I,{directive:"must-understand"}),accessoryIcon:v?e.Icon.Checkmark:e.Icon.Circle,actions:_jsx(e.ActionPanel,null,v?_jsx(e.Action,{title:"Deselect",onAction:()=>p(!1)}):_jsx(e.Action,{title:"Select",onAction:()=>p(!0)}),A,_jsx(e.Action,{title:"Open `must-understand` docs",onAction:()=>n(_jsx(h,{directive:"must-understand"}))}))})))}function S({directives:t}){let[n,s]=(0,i.useState)(void 0);return(0,i.useEffect)(()=>{async function d(){let a="";for(let f of t){let m=await x(f);m&&(a+=`#### ${R(f)}
${m}
`)}a!==""&&(a+=`

Source: [mdn](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cache-Control)`),s(a)}d()},[t]),_jsx(e.Detail,{navigationTitle:"Cache-Control:",isLoading:n===void 0,markdown:`# Cache-Control: ${y(t,!0)}
${n??""}`,actions:_jsx(e.ActionPanel,null,_jsx(e.Action.CopyToClipboard,{title:"Copy Header Value",content:y(t,!0)}),_jsx(e.Action.CopyToClipboard,{title:"Copy Header Value without spaces",content:y(t,!1)}))})}function h({directive:t}){let[n,s]=(0,i.useState)(void 0);return(0,i.useEffect)(()=>{x(t).then(s)}),_jsx(e.Detail,{navigationTitle:`Docs: ${R(t)}`,isLoading:n===void 0,markdown:n?`${n}

Source: [mdn](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cache-Control)`:"Not found"})}function I({directive:t}){let[n,s]=(0,i.useState)(void 0);return(0,i.useEffect)(()=>{x(t).then(s)}),_jsx(e.List.Item.Detail,{isLoading:n===void 0,markdown:n?`${n}

Source: [mdn](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cache-Control)`:"Not found"})}module.exports=W(K);0&&(module.exports={});
