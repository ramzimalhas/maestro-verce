"use strict";var Te=Object.create;var k=Object.defineProperty;var we=Object.getOwnPropertyDescriptor;var De=Object.getOwnPropertyNames;var Re=Object.getPrototypeOf,xe=Object.prototype.hasOwnProperty;var R=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Ce=(e,t)=>{for(var r in t)k(e,r,{get:t[r],enumerable:!0})},Q=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of De(t))!xe.call(e,i)&&i!==r&&k(e,i,{get:()=>t[i],enumerable:!(o=we(t,i))||o.enumerable});return e};var Z=(e,t,r)=>(r=e!=null?Te(Re(e)):{},Q(t||!e||!e.__esModule?k(r,"default",{value:e,enumerable:!0}):r,e)),Le=e=>Q(k({},"__esModule",{value:!0}),e);var oe=R(ne=>{"use strict";var x=require("react");function He(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ke=typeof Object.is=="function"?Object.is:He,Ne=x.useState,Pe=x.useEffect,Be=x.useLayoutEffect,Fe=x.useDebugValue;function je(e,t){var r=t(),o=Ne({inst:{value:r,getSnapshot:t}}),i=o[0].inst,n=o[1];return Be(function(){i.value=r,i.getSnapshot=t,W(i)&&n({inst:i})},[e,r,t]),Pe(function(){return W(i)&&n({inst:i}),e(function(){W(i)&&n({inst:i})})},[e]),Fe(r),r}function W(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!ke(e,r)}catch{return!0}}function Ue(e,t){return t()}var Ve=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Ue:je;ne.useSyncExternalStore=x.useSyncExternalStore!==void 0?x.useSyncExternalStore:Ve});var ae=R(ie=>{"use strict";process.env.NODE_ENV!=="production"&&function(){"use strict";typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var e=require("react"),t=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function r(d){{for(var v=arguments.length,b=new Array(v>1?v-1:0),O=1;O<v;O++)b[O-1]=arguments[O];o("error",d,b)}}function o(d,v,b){{var O=t.ReactDebugCurrentFrame,w=O.getStackAddendum();w!==""&&(v+="%s",b=b.concat([w]));var D=b.map(function(I){return String(I)});D.unshift("Warning: "+v),Function.prototype.apply.call(console[d],console,D)}}function i(d,v){return d===v&&(d!==0||1/d===1/v)||d!==d&&v!==v}var n=typeof Object.is=="function"?Object.is:i,S=e.useState,h=e.useEffect,a=e.useLayoutEffect,l=e.useDebugValue,f=!1,y=!1;function g(d,v,b){f||e.startTransition!==void 0&&(f=!0,r("You are using an outdated, pre-release alpha of React 18 that does not support useSyncExternalStore. The use-sync-external-store shim will not work correctly. Upgrade to a newer pre-release."));var O=v();if(!y){var w=v();n(O,w)||(r("The result of getSnapshot should be cached to avoid an infinite loop"),y=!0)}var D=S({inst:{value:O,getSnapshot:v}}),I=D[0].inst,C=D[1];return a(function(){I.value=O,I.getSnapshot=v,m(I)&&C({inst:I})},[d,O,v]),h(function(){m(I)&&C({inst:I});var j=function(){m(I)&&C({inst:I})};return d(j)},[d]),l(O),O}function m(d){var v=d.getSnapshot,b=d.value;try{var O=v();return!n(b,O)}catch{return!0}}function p(d,v,b){return v()}var c=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",s=!c,E=s?p:g,u=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:E;ie.useSyncExternalStore=u,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}()});var J=R((ft,q)=>{"use strict";process.env.NODE_ENV==="production"?q.exports=oe():q.exports=ae()});var ue=R(se=>{"use strict";var P=require("react"),ze=J();function Ge(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var We=typeof Object.is=="function"?Object.is:Ge,qe=ze.useSyncExternalStore,Je=P.useRef,Ke=P.useEffect,$e=P.useMemo,Ye=P.useDebugValue;se.useSyncExternalStoreWithSelector=function(e,t,r,o,i){var n=Je(null);if(n.current===null){var S={hasValue:!1,value:null};n.current=S}else S=n.current;n=$e(function(){function a(m){if(!l){if(l=!0,f=m,m=o(m),i!==void 0&&S.hasValue){var p=S.value;if(i(p,m))return y=p}return y=m}if(p=y,We(f,m))return p;var c=o(m);return i!==void 0&&i(p,c)?p:(f=m,y=c)}var l=!1,f,y,g=r===void 0?null:r;return[function(){return a(t())},g===null?void 0:function(){return a(g())}]},[t,r,o,i]);var h=qe(e,n[0],n[1]);return Ke(function(){S.hasValue=!0,S.value=h},[h]),Ye(h),h}});var le=R(ce=>{"use strict";process.env.NODE_ENV!=="production"&&function(){"use strict";typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var e=require("react"),t=J();function r(f,y){return f===y&&(f!==0||1/f===1/y)||f!==f&&y!==y}var o=typeof Object.is=="function"?Object.is:r,i=t.useSyncExternalStore,n=e.useRef,S=e.useEffect,h=e.useMemo,a=e.useDebugValue;function l(f,y,g,m,p){var c=n(null),s;c.current===null?(s={hasValue:!1,value:null},c.current=s):s=c.current;var E=h(function(){var b=!1,O,w,D=function(L){if(!b){b=!0,O=L;var U=m(L);if(p!==void 0&&s.hasValue){var V=s.value;if(p(V,U))return w=V,V}return w=U,U}var Ae=O,z=w;if(o(Ae,L))return z;var G=m(L);return p!==void 0&&p(z,G)?z:(O=L,w=G,G)},I=g===void 0?null:g,C=function(){return D(y())},j=I===null?void 0:function(){return D(I())};return[C,j]},[y,g,m,p]),u=E[0],d=E[1],v=i(f,u,d);return S(function(){s.hasValue=!0,s.value=v},[v]),a(v),v}ce.useSyncExternalStoreWithSelector=l,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}()});var de=R((pt,K)=>{"use strict";process.env.NODE_ENV==="production"?K.exports=ue():K.exports=le()});var at={};Ce(at,{default:()=>Ie});module.exports=Le(at);var _=require("@raycast/api");var ge=require("crypto"),Ee=require("react");var N={version:2};var A=require("@raycast/api");var te={},ee=e=>{let t,r=new Set,o=(f,y)=>{let g=typeof f=="function"?f(t):f;if(!Object.is(g,t)){let m=t;t=y??(typeof g!="object"||g===null)?g:Object.assign({},t,g),r.forEach(p=>p(t,m))}},i=()=>t,a={setState:o,getState:i,getInitialState:()=>l,subscribe:f=>(r.add(f),()=>r.delete(f)),destroy:()=>{(te.env?te.env.MODE:void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},l=t=e(o,i,a);return a},re=e=>e?ee(e):ee;var ve=Z(require("react"),1),pe=Z(de(),1),B={},{useDebugValue:Xe}=ve.default,{useSyncExternalStoreWithSelector:Qe}=pe.default,fe=!1,Ze=e=>e;function et(e,t=Ze,r){(B.env?B.env.MODE:void 0)!=="production"&&r&&!fe&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),fe=!0);let o=Qe(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return Xe(o),o}var me=e=>{(B.env?B.env.MODE:void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let t=typeof e=="function"?re(e):e,r=(o,i)=>et(t,o,i);return Object.assign(r,t),r},Se=e=>e?me(e):me;var ye={};function $(e,t){let r;try{r=e()}catch{return}return{getItem:i=>{var n;let S=a=>a===null?null:JSON.parse(a,t?.reviver),h=(n=r.getItem(i))!=null?n:null;return h instanceof Promise?h.then(S):S(h)},setItem:(i,n)=>r.setItem(i,JSON.stringify(n,t?.replacer)),removeItem:i=>r.removeItem(i)}}var M=e=>t=>{try{let r=e(t);return r instanceof Promise?r:{then(o){return M(o)(r)},catch(o){return this}}}catch(r){return{then(o){return this},catch(o){return M(o)(r)}}}},tt=(e,t)=>(r,o,i)=>{let n={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:s=>s,version:0,merge:(s,E)=>({...E,...s}),...t},S=!1,h=new Set,a=new Set,l;try{l=n.getStorage()}catch{}if(!l)return e((...s)=>{console.warn(`[zustand persist middleware] Unable to update item '${n.name}', the given storage is currently unavailable.`),r(...s)},o,i);let f=M(n.serialize),y=()=>{let s=n.partialize({...o()}),E,u=f({state:s,version:n.version}).then(d=>l.setItem(n.name,d)).catch(d=>{E=d});if(E)throw E;return u},g=i.setState;i.setState=(s,E)=>{g(s,E),y()};let m=e((...s)=>{r(...s),y()},o,i),p,c=()=>{var s;if(!l)return;S=!1,h.forEach(u=>u(o()));let E=((s=n.onRehydrateStorage)==null?void 0:s.call(n,o()))||void 0;return M(l.getItem.bind(l))(n.name).then(u=>{if(u)return n.deserialize(u)}).then(u=>{if(u)if(typeof u.version=="number"&&u.version!==n.version){if(n.migrate)return n.migrate(u.state,u.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return u.state}).then(u=>{var d;return p=n.merge(u,(d=o())!=null?d:m),r(p,!0),y()}).then(()=>{E?.(p,void 0),S=!0,a.forEach(u=>u(p))}).catch(u=>{E?.(void 0,u)})};return i.persist={setOptions:s=>{n={...n,...s},s.getStorage&&(l=s.getStorage())},clearStorage:()=>{l?.removeItem(n.name)},getOptions:()=>n,rehydrate:()=>c(),hasHydrated:()=>S,onHydrate:s=>(h.add(s),()=>{h.delete(s)}),onFinishHydration:s=>(a.add(s),()=>{a.delete(s)})},c(),p||m},rt=(e,t)=>(r,o,i)=>{let n={storage:$(()=>localStorage),partialize:c=>c,version:0,merge:(c,s)=>({...s,...c}),...t},S=!1,h=new Set,a=new Set,l=n.storage;if(!l)return e((...c)=>{console.warn(`[zustand persist middleware] Unable to update item '${n.name}', the given storage is currently unavailable.`),r(...c)},o,i);let f=()=>{let c=n.partialize({...o()});return l.setItem(n.name,{state:c,version:n.version})},y=i.setState;i.setState=(c,s)=>{y(c,s),f()};let g=e((...c)=>{r(...c),f()},o,i);i.getInitialState=()=>g;let m,p=()=>{var c,s;if(!l)return;S=!1,h.forEach(u=>{var d;return u((d=o())!=null?d:g)});let E=((s=n.onRehydrateStorage)==null?void 0:s.call(n,(c=o())!=null?c:g))||void 0;return M(l.getItem.bind(l))(n.name).then(u=>{if(u)if(typeof u.version=="number"&&u.version!==n.version){if(n.migrate)return n.migrate(u.state,u.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return u.state}).then(u=>{var d;return m=n.merge(u,(d=o())!=null?d:g),r(m,!0),f()}).then(()=>{E?.(m,void 0),m=o(),S=!0,a.forEach(u=>u(m))}).catch(u=>{E?.(void 0,u)})};return i.persist={setOptions:c=>{n={...n,...c},c.storage&&(l=c.storage)},clearStorage:()=>{l?.removeItem(n.name)},getOptions:()=>n,rehydrate:()=>p(),hasHydrated:()=>S,onHydrate:c=>(h.add(c),()=>{h.delete(c)}),onFinishHydration:c=>(a.add(c),()=>{a.delete(c)})},n.skipHydration||p(),m||g},nt=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((ye.env?ye.env.MODE:void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),tt(e,t)):rt(e,t),he=nt;var H={Blue:A.Color.Blue,Green:A.Color.Green,Magenta:A.Color.Magenta,Orange:A.Color.Orange,Purple:A.Color.Purple,Red:A.Color.Red,Yellow:A.Color.Yellow};function F({name:e,version:t,state:r,migrate:o}){return Se()(he(r,{name:e,version:t,migrate:o,storage:$(()=>({getItem:i=>A.LocalStorage.getItem(i).then(n=>n?.toString()??null),setItem:(i,n)=>A.LocalStorage.setItem(i,n),removeItem:i=>A.LocalStorage.removeItem(i)}))}))}function Y(e,t){return e=e.trim().replace(/\s+/g," "),e.length<=t?e:e.slice(0,t)+"..."}var ot=[{id:"b0259928-4a63-4e27-9d3b-df76c6a8e290",name:"Summarize",color:H.Blue,description:"Provide a concise summary of the provided text, highlighting the main points and key information.",systemPrompt:"Summarize the key points and main information from the following text:",model:"gpt-3.5-turbo",temperature:"0.7",maxTokens:"-1",favorite:!1},{id:"34e4b5f1-1b7a-4b8b-8aaf-e8d9a8f8c502",name:"Improve Grammar",color:H.Blue,description:"Correct grammatical errors and enhance the readability of the provided text, ensuring clarity and proper language use.",systemPrompt:"Improve the grammar and readability of the following text:",model:"gpt-3.5-turbo",temperature:"0.7",maxTokens:"-1",favorite:!1},{id:"9f34b8e2-4d93-4c9b-9e79-4228a3d0f97b",name:"Rewrite",color:H.Blue,description:"Rewrite the provided text to convey the same meaning in a different way, offering a fresh perspective or alternative wording.",systemPrompt:"Rewrite the following text to convey the same meaning in a different way:",model:"gpt-3.5-turbo",temperature:"0.7",maxTokens:"-1",favorite:!1},{id:"eabc2912-f2ad-4b5a-80d2-993b5f3e5c21",name:"Explain This Code",color:H.Orange,description:"Provide a detailed explanation of the provided code snippet, including its purpose, how it works, and any key concepts involved.",systemPrompt:"Explain the purpose and functionality of the following code snippet:",model:"gpt-3.5-turbo",temperature:"0.7",maxTokens:"-1",favorite:!1}],X=F({name:"actions",version:N.version,state:(e,t)=>({actions:ot,addAction:r=>{e({actions:[...t().actions,{...r,id:(0,ge.randomUUID)(),favorite:!1}]})},removeAction:r=>{e({actions:t().actions.filter(o=>o.id!==r)})},editAction:r=>{e({actions:t().actions.map(o=>o.id===r.id?r:o)})},addToFavorites:r=>{e({actions:t().actions.map(o=>o.id===r?{...o,favorite:!0}:o)})},removeFromFavorites:r=>{e({actions:t().actions.map(o=>o.id===r?{...o,favorite:!1}:o)})}}),migrate:(e,t)=>{switch(t){case 1:e.actions=e.actions.map(r=>({...r,model:r.model.replace("gpt-4-turbo-preview","gpt-4-turbo")}))}return e}}),_e=()=>{let[e,t]=(0,Ee.useState)(!1);return X.persist.onFinishHydration(()=>{t(!0)}),e};var Oe=require("crypto");var it=[],be=F({name:"history",version:N.version,state:e=>({history:it,addItem:t=>{e(r=>({history:[...r.history,{id:(0,Oe.randomUUID)(),...t}]}))},removeItem:t=>{e(r=>({history:r.history.filter(o=>o.id!==t)}))},removeAll:()=>{e({history:[]})}}),migrate:e=>e});var T=require("react/jsx-runtime");function Ie(){let e=_e(),t=X(a=>a.actions.sort((l,f)=>l.name.localeCompare(f.name))),r=be(a=>a.history.sort((l,f)=>f.timestamp-l.timestamp)),o=t.filter(a=>!a.favorite),i=t.filter(a=>a.favorite),n=(a,l)=>{(0,_.launchCommand)({ownerOrAuthorName:"quiknull",extensionName:"alice-ai",type:_.LaunchType.UserInitiated,name:a,arguments:l})},S=()=>i.length>0?(0,T.jsx)(_.MenuBarExtra.Section,{title:"Favorites",children:i.map(a=>(0,T.jsx)(_.MenuBarExtra.Item,{title:a.name,icon:{source:_.Icon.Checkmark,tintColor:a.color},onAction:()=>{n("commands",{id:a.id})}},a.id))}):null,h=()=>o.map(a=>(0,T.jsx)(_.MenuBarExtra.Item,{title:a.name,icon:{source:_.Icon.Dot,tintColor:a.color},onAction:()=>{n("commands",{id:a.id})}},a.id));return(0,T.jsxs)(_.MenuBarExtra,{isLoading:!e,icon:_.Icon.Wand,tooltip:"Alice AI",children:[S(),(0,T.jsx)(_.MenuBarExtra.Section,{title:"Actions"}),h(),(0,T.jsx)(_.MenuBarExtra.Section,{children:(0,T.jsx)(_.MenuBarExtra.Submenu,{title:"History",icon:_.Icon.Clock,children:r.map(a=>(0,T.jsx)(_.MenuBarExtra.Item,{title:Y(a.prompt,64),subtitle:`
${Y(a.result,64)}
${a.action.name}`,icon:{source:_.Icon.Clock,tintColor:a.action.color},onAction:()=>{n("history",{id:a.id})}},a.id))})}),(0,T.jsx)(_.MenuBarExtra.Section,{children:(0,T.jsx)(_.MenuBarExtra.Item,{title:"Create Action",icon:_.Icon.Plus,onAction:()=>n("create")})})]})}
/*! Bundled license information:

use-sync-external-store/cjs/use-sync-external-store-shim.production.min.js:
  (**
   * @license React
   * use-sync-external-store-shim.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

use-sync-external-store/cjs/use-sync-external-store-shim.development.js:
  (**
   * @license React
   * use-sync-external-store-shim.development.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

use-sync-external-store/cjs/use-sync-external-store-shim/with-selector.production.min.js:
  (**
   * @license React
   * use-sync-external-store-shim/with-selector.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

use-sync-external-store/cjs/use-sync-external-store-shim/with-selector.development.js:
  (**
   * @license React
   * use-sync-external-store-shim/with-selector.development.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)
*/
