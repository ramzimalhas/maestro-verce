"use strict";var Qr=Object.create;var ye=Object.defineProperty;var zr=Object.getOwnPropertyDescriptor;var Xr=Object.getOwnPropertyNames;var br=Object.getPrototypeOf,Zr=Object.prototype.hasOwnProperty;var d=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),en=(e,t)=>{for(var r in t)ye(e,r,{get:t[r],enumerable:!0})},Ge=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Xr(t))!Zr.call(e,i)&&i!==r&&ye(e,i,{get:()=>t[i],enumerable:!(n=zr(t,i))||n.enumerable});return e};var Ke=(e,t,r)=>(r=e!=null?Qr(br(e)):{},Ge(t||!e||!e.__esModule?ye(r,"default",{value:e,enumerable:!0}):r,e)),tn=e=>Ge(ye({},"__esModule",{value:!0}),e);var R=d(Pe=>{"use strict";Pe.fromCallback=function(e){return Object.defineProperty(function(...t){if(typeof t[t.length-1]=="function")e.apply(this,t);else return new Promise((r,n)=>{e.call(this,...t,(i,o)=>i!=null?n(i):r(o))})},"name",{value:e.name})};Pe.fromPromise=function(e){return Object.defineProperty(function(...t){let r=t[t.length-1];if(typeof r!="function")return e.apply(this,t);e.apply(this,t.slice(0,-1)).then(n=>r(null,n),r)},"name",{value:e.name})}});var He=d((So,Ve)=>{var G=require("constants"),rn=process.cwd,me=null,nn=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return me||(me=rn.call(process)),me};try{process.cwd()}catch{}typeof process.chdir=="function"&&(Oe=process.chdir,process.chdir=function(e){me=null,Oe.call(process,e)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,Oe));var Oe;Ve.exports=on;function on(e){G.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&t(e),e.lutimes||r(e),e.chown=o(e.chown),e.fchown=o(e.fchown),e.lchown=o(e.lchown),e.chmod=n(e.chmod),e.fchmod=n(e.fchmod),e.lchmod=n(e.lchmod),e.chownSync=u(e.chownSync),e.fchownSync=u(e.fchownSync),e.lchownSync=u(e.lchownSync),e.chmodSync=i(e.chmodSync),e.fchmodSync=i(e.fchmodSync),e.lchmodSync=i(e.lchmodSync),e.stat=c(e.stat),e.fstat=c(e.fstat),e.lstat=c(e.lstat),e.statSync=a(e.statSync),e.fstatSync=a(e.fstatSync),e.lstatSync=a(e.lstatSync),e.chmod&&!e.lchmod&&(e.lchmod=function(s,l,y){y&&process.nextTick(y)},e.lchmodSync=function(){}),e.chown&&!e.lchown&&(e.lchown=function(s,l,y,f){f&&process.nextTick(f)},e.lchownSync=function(){}),nn==="win32"&&(e.rename=typeof e.rename!="function"?e.rename:function(s){function l(y,f,h){var k=Date.now(),v=0;s(y,f,function q(M){if(M&&(M.code==="EACCES"||M.code==="EPERM")&&Date.now()-k<6e4){setTimeout(function(){e.stat(f,function(T,ne){T&&T.code==="ENOENT"?s(y,f,q):h(M)})},v),v<100&&(v+=10);return}h&&h(M)})}return Object.setPrototypeOf&&Object.setPrototypeOf(l,s),l}(e.rename)),e.read=typeof e.read!="function"?e.read:function(s){function l(y,f,h,k,v,q){var M;if(q&&typeof q=="function"){var T=0;M=function(ne,Be,Ye){if(ne&&ne.code==="EAGAIN"&&T<10)return T++,s.call(e,y,f,h,k,v,M);q.apply(this,arguments)}}return s.call(e,y,f,h,k,v,M)}return Object.setPrototypeOf&&Object.setPrototypeOf(l,s),l}(e.read),e.readSync=typeof e.readSync!="function"?e.readSync:function(s){return function(l,y,f,h,k){for(var v=0;;)try{return s.call(e,l,y,f,h,k)}catch(q){if(q.code==="EAGAIN"&&v<10){v++;continue}throw q}}}(e.readSync);function t(s){s.lchmod=function(l,y,f){s.open(l,G.O_WRONLY|G.O_SYMLINK,y,function(h,k){if(h){f&&f(h);return}s.fchmod(k,y,function(v){s.close(k,function(q){f&&f(v||q)})})})},s.lchmodSync=function(l,y){var f=s.openSync(l,G.O_WRONLY|G.O_SYMLINK,y),h=!0,k;try{k=s.fchmodSync(f,y),h=!1}finally{if(h)try{s.closeSync(f)}catch{}else s.closeSync(f)}return k}}function r(s){G.hasOwnProperty("O_SYMLINK")&&s.futimes?(s.lutimes=function(l,y,f,h){s.open(l,G.O_SYMLINK,function(k,v){if(k){h&&h(k);return}s.futimes(v,y,f,function(q){s.close(v,function(M){h&&h(q||M)})})})},s.lutimesSync=function(l,y,f){var h=s.openSync(l,G.O_SYMLINK),k,v=!0;try{k=s.futimesSync(h,y,f),v=!1}finally{if(v)try{s.closeSync(h)}catch{}else s.closeSync(h)}return k}):s.futimes&&(s.lutimes=function(l,y,f,h){h&&process.nextTick(h)},s.lutimesSync=function(){})}function n(s){return s&&function(l,y,f){return s.call(e,l,y,function(h){p(h)&&(h=null),f&&f.apply(this,arguments)})}}function i(s){return s&&function(l,y){try{return s.call(e,l,y)}catch(f){if(!p(f))throw f}}}function o(s){return s&&function(l,y,f,h){return s.call(e,l,y,f,function(k){p(k)&&(k=null),h&&h.apply(this,arguments)})}}function u(s){return s&&function(l,y,f){try{return s.call(e,l,y,f)}catch(h){if(!p(h))throw h}}}function c(s){return s&&function(l,y,f){typeof y=="function"&&(f=y,y=null);function h(k,v){v&&(v.uid<0&&(v.uid+=4294967296),v.gid<0&&(v.gid+=4294967296)),f&&f.apply(this,arguments)}return y?s.call(e,l,y,h):s.call(e,l,h)}}function a(s){return s&&function(l,y){var f=y?s.call(e,l,y):s.call(e,l);return f&&(f.uid<0&&(f.uid+=4294967296),f.gid<0&&(f.gid+=4294967296)),f}}function p(s){if(!s||s.code==="ENOSYS")return!0;var l=!process.getuid||process.getuid()!==0;return!!(l&&(s.code==="EINVAL"||s.code==="EPERM"))}}});var Xe=d((wo,ze)=>{var Qe=require("stream").Stream;ze.exports=un;function un(e){return{ReadStream:t,WriteStream:r};function t(n,i){if(!(this instanceof t))return new t(n,i);Qe.call(this);var o=this;this.path=n,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,i=i||{};for(var u=Object.keys(i),c=0,a=u.length;c<a;c++){var p=u[c];this[p]=i[p]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){o._read()});return}e.open(this.path,this.flags,this.mode,function(s,l){if(s){o.emit("error",s),o.readable=!1;return}o.fd=l,o.emit("open",l),o._read()})}function r(n,i){if(!(this instanceof r))return new r(n,i);Qe.call(this),this.path=n,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,i=i||{};for(var o=Object.keys(i),u=0,c=o.length;u<c;u++){var a=o[u];this[a]=i[a]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}});var Ze=d((vo,be)=>{"use strict";be.exports=sn;var cn=Object.getPrototypeOf||function(e){return e.__proto__};function sn(e){if(e===null||typeof e!="object")return e;if(e instanceof Object)var t={__proto__:cn(e)};else var t=Object.create(null);return Object.getOwnPropertyNames(e).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}),t}});var W=d((Eo,Ne)=>{var x=require("fs"),an=He(),fn=Xe(),ln=Ze(),he=require("util"),L,pe;typeof Symbol=="function"&&typeof Symbol.for=="function"?(L=Symbol.for("graceful-fs.queue"),pe=Symbol.for("graceful-fs.previous")):(L="___graceful-fs.queue",pe="___graceful-fs.previous");function yn(){}function rt(e,t){Object.defineProperty(e,L,{get:function(){return t}})}var z=yn;he.debuglog?z=he.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(z=function(){var e=he.format.apply(he,arguments);e="GFS4: "+e.split(/\n/).join(`
GFS4: `),console.error(e)});x[L]||(et=global[L]||[],rt(x,et),x.close=function(e){function t(r,n){return e.call(x,r,function(i){i||tt(),typeof n=="function"&&n.apply(this,arguments)})}return Object.defineProperty(t,pe,{value:e}),t}(x.close),x.closeSync=function(e){function t(r){e.apply(x,arguments),tt()}return Object.defineProperty(t,pe,{value:e}),t}(x.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){z(x[L]),require("assert").equal(x[L].length,0)}));var et;global[L]||rt(global,x[L]);Ne.exports=De(ln(x));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!x.__patched&&(Ne.exports=De(x),x.__patched=!0);function De(e){an(e),e.gracefulify=De,e.createReadStream=Be,e.createWriteStream=Ye;var t=e.readFile;e.readFile=r;function r(m,w,S){return typeof w=="function"&&(S=w,w=null),C(m,w,S);function C(N,O,g,P){return t(N,O,function(E){E&&(E.code==="EMFILE"||E.code==="ENFILE")?Z([C,[N,O,g],E,P||Date.now(),Date.now()]):typeof g=="function"&&g.apply(this,arguments)})}}var n=e.writeFile;e.writeFile=i;function i(m,w,S,C){return typeof S=="function"&&(C=S,S=null),N(m,w,S,C);function N(O,g,P,E,_){return n(O,g,P,function(F){F&&(F.code==="EMFILE"||F.code==="ENFILE")?Z([N,[O,g,P,E],F,_||Date.now(),Date.now()]):typeof E=="function"&&E.apply(this,arguments)})}}var o=e.appendFile;o&&(e.appendFile=u);function u(m,w,S,C){return typeof S=="function"&&(C=S,S=null),N(m,w,S,C);function N(O,g,P,E,_){return o(O,g,P,function(F){F&&(F.code==="EMFILE"||F.code==="ENFILE")?Z([N,[O,g,P,E],F,_||Date.now(),Date.now()]):typeof E=="function"&&E.apply(this,arguments)})}}var c=e.copyFile;c&&(e.copyFile=a);function a(m,w,S,C){return typeof S=="function"&&(C=S,S=0),N(m,w,S,C);function N(O,g,P,E,_){return c(O,g,P,function(F){F&&(F.code==="EMFILE"||F.code==="ENFILE")?Z([N,[O,g,P,E],F,_||Date.now(),Date.now()]):typeof E=="function"&&E.apply(this,arguments)})}}var p=e.readdir;e.readdir=l;var s=/^v[0-5]\./;function l(m,w,S){typeof w=="function"&&(S=w,w=null);var C=s.test(process.version)?function(g,P,E,_){return p(g,N(g,P,E,_))}:function(g,P,E,_){return p(g,P,N(g,P,E,_))};return C(m,w,S);function N(O,g,P,E){return function(_,F){_&&(_.code==="EMFILE"||_.code==="ENFILE")?Z([C,[O,g,P],_,E||Date.now(),Date.now()]):(F&&F.sort&&F.sort(),typeof P=="function"&&P.call(this,_,F))}}}if(process.version.substr(0,4)==="v0.8"){var y=fn(e);q=y.ReadStream,T=y.WriteStream}var f=e.ReadStream;f&&(q.prototype=Object.create(f.prototype),q.prototype.open=M);var h=e.WriteStream;h&&(T.prototype=Object.create(h.prototype),T.prototype.open=ne),Object.defineProperty(e,"ReadStream",{get:function(){return q},set:function(m){q=m},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WriteStream",{get:function(){return T},set:function(m){T=m},enumerable:!0,configurable:!0});var k=q;Object.defineProperty(e,"FileReadStream",{get:function(){return k},set:function(m){k=m},enumerable:!0,configurable:!0});var v=T;Object.defineProperty(e,"FileWriteStream",{get:function(){return v},set:function(m){v=m},enumerable:!0,configurable:!0});function q(m,w){return this instanceof q?(f.apply(this,arguments),this):q.apply(Object.create(q.prototype),arguments)}function M(){var m=this;xe(m.path,m.flags,m.mode,function(w,S){w?(m.autoClose&&m.destroy(),m.emit("error",w)):(m.fd=S,m.emit("open",S),m.read())})}function T(m,w){return this instanceof T?(h.apply(this,arguments),this):T.apply(Object.create(T.prototype),arguments)}function ne(){var m=this;xe(m.path,m.flags,m.mode,function(w,S){w?(m.destroy(),m.emit("error",w)):(m.fd=S,m.emit("open",S))})}function Be(m,w){return new e.ReadStream(m,w)}function Ye(m,w){return new e.WriteStream(m,w)}var Hr=e.open;e.open=xe;function xe(m,w,S,C){return typeof S=="function"&&(C=S,S=null),N(m,w,S,C);function N(O,g,P,E,_){return Hr(O,g,P,function(F,mo){F&&(F.code==="EMFILE"||F.code==="ENFILE")?Z([N,[O,g,P,E],F,_||Date.now(),Date.now()]):typeof E=="function"&&E.apply(this,arguments)})}}return e}function Z(e){z("ENQUEUE",e[0].name,e[1]),x[L].push(e),Ce()}var de;function tt(){for(var e=Date.now(),t=0;t<x[L].length;++t)x[L][t].length>2&&(x[L][t][3]=e,x[L][t][4]=e);Ce()}function Ce(){if(clearTimeout(de),de=void 0,x[L].length!==0){var e=x[L].shift(),t=e[0],r=e[1],n=e[2],i=e[3],o=e[4];if(i===void 0)z("RETRY",t.name,r),t.apply(null,r);else if(Date.now()-i>=6e4){z("TIMEOUT",t.name,r);var u=r.pop();typeof u=="function"&&u.call(null,n)}else{var c=Date.now()-o,a=Math.max(o-i,1),p=Math.min(a*1.2,100);c>=p?(z("RETRY",t.name,r),t.apply(null,r.concat([i]))):x[L].push(e)}de===void 0&&(de=setTimeout(Ce,0))}}});var X=d(Y=>{"use strict";var nt=R().fromCallback,$=W(),mn=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(e=>typeof $[e]=="function");Object.assign(Y,$);mn.forEach(e=>{Y[e]=nt($[e])});Y.exists=function(e,t){return typeof t=="function"?$.exists(e,t):new Promise(r=>$.exists(e,r))};Y.read=function(e,t,r,n,i,o){return typeof o=="function"?$.read(e,t,r,n,i,o):new Promise((u,c)=>{$.read(e,t,r,n,i,(a,p,s)=>{if(a)return c(a);u({bytesRead:p,buffer:s})})})};Y.write=function(e,t,...r){return typeof r[r.length-1]=="function"?$.write(e,t,...r):new Promise((n,i)=>{$.write(e,t,...r,(o,u,c)=>{if(o)return i(o);n({bytesWritten:u,buffer:c})})})};Y.readv=function(e,t,...r){return typeof r[r.length-1]=="function"?$.readv(e,t,...r):new Promise((n,i)=>{$.readv(e,t,...r,(o,u,c)=>{if(o)return i(o);n({bytesRead:u,buffers:c})})})};Y.writev=function(e,t,...r){return typeof r[r.length-1]=="function"?$.writev(e,t,...r):new Promise((n,i)=>{$.writev(e,t,...r,(o,u,c)=>{if(o)return i(o);n({bytesWritten:u,buffers:c})})})};typeof $.realpath.native=="function"?Y.realpath.native=nt($.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")});var ot=d((Fo,it)=>{"use strict";var hn=require("path");it.exports.checkPath=function(t){if(process.platform==="win32"&&/[<>:"|?*]/.test(t.replace(hn.parse(t).root,""))){let n=new Error(`Path contains invalid characters: ${t}`);throw n.code="EINVAL",n}}});var at=d((qo,_e)=>{"use strict";var ut=X(),{checkPath:ct}=ot(),st=e=>{let t={mode:511};return typeof e=="number"?e:{...t,...e}.mode};_e.exports.makeDir=async(e,t)=>(ct(e),ut.mkdir(e,{mode:st(t),recursive:!0}));_e.exports.makeDirSync=(e,t)=>(ct(e),ut.mkdirSync(e,{mode:st(t),recursive:!0}))});var J=d((go,ft)=>{"use strict";var dn=R().fromPromise,{makeDir:pn,makeDirSync:Le}=at(),Te=dn(pn);ft.exports={mkdirs:Te,mkdirsSync:Le,mkdirp:Te,mkdirpSync:Le,ensureDir:Te,ensureDirSync:Le}});var K=d((xo,yt)=>{"use strict";var Sn=R().fromPromise,lt=X();function wn(e){return lt.access(e).then(()=>!0).catch(()=>!1)}yt.exports={pathExists:Sn(wn),pathExistsSync:lt.existsSync}});var $e=d((Po,mt)=>{"use strict";var ee=W();function vn(e,t,r,n){ee.open(e,"r+",(i,o)=>{if(i)return n(i);ee.futimes(o,t,r,u=>{ee.close(o,c=>{n&&n(u||c)})})})}function En(e,t,r){let n=ee.openSync(e,"r+");return ee.futimesSync(n,t,r),ee.closeSync(n)}mt.exports={utimesMillis:vn,utimesMillisSync:En}});var b=d((Oo,pt)=>{"use strict";var te=X(),D=require("path"),kn=require("util");function Fn(e,t,r){let n=r.dereference?i=>te.stat(i,{bigint:!0}):i=>te.lstat(i,{bigint:!0});return Promise.all([n(e),n(t).catch(i=>{if(i.code==="ENOENT")return null;throw i})]).then(([i,o])=>({srcStat:i,destStat:o}))}function qn(e,t,r){let n,i=r.dereference?u=>te.statSync(u,{bigint:!0}):u=>te.lstatSync(u,{bigint:!0}),o=i(e);try{n=i(t)}catch(u){if(u.code==="ENOENT")return{srcStat:o,destStat:null};throw u}return{srcStat:o,destStat:n}}function gn(e,t,r,n,i){kn.callbackify(Fn)(e,t,n,(o,u)=>{if(o)return i(o);let{srcStat:c,destStat:a}=u;if(a){if(ie(c,a)){let p=D.basename(e),s=D.basename(t);return r==="move"&&p!==s&&p.toLowerCase()===s.toLowerCase()?i(null,{srcStat:c,destStat:a,isChangingCase:!0}):i(new Error("Source and destination must not be the same."))}if(c.isDirectory()&&!a.isDirectory())return i(new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`));if(!c.isDirectory()&&a.isDirectory())return i(new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`))}return c.isDirectory()&&Ie(e,t)?i(new Error(Se(e,t,r))):i(null,{srcStat:c,destStat:a})})}function xn(e,t,r,n){let{srcStat:i,destStat:o}=qn(e,t,n);if(o){if(ie(i,o)){let u=D.basename(e),c=D.basename(t);if(r==="move"&&u!==c&&u.toLowerCase()===c.toLowerCase())return{srcStat:i,destStat:o,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(i.isDirectory()&&!o.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`);if(!i.isDirectory()&&o.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`)}if(i.isDirectory()&&Ie(e,t))throw new Error(Se(e,t,r));return{srcStat:i,destStat:o}}function ht(e,t,r,n,i){let o=D.resolve(D.dirname(e)),u=D.resolve(D.dirname(r));if(u===o||u===D.parse(u).root)return i();te.stat(u,{bigint:!0},(c,a)=>c?c.code==="ENOENT"?i():i(c):ie(t,a)?i(new Error(Se(e,r,n))):ht(e,t,u,n,i))}function dt(e,t,r,n){let i=D.resolve(D.dirname(e)),o=D.resolve(D.dirname(r));if(o===i||o===D.parse(o).root)return;let u;try{u=te.statSync(o,{bigint:!0})}catch(c){if(c.code==="ENOENT")return;throw c}if(ie(t,u))throw new Error(Se(e,r,n));return dt(e,t,o,n)}function ie(e,t){return t.ino&&t.dev&&t.ino===e.ino&&t.dev===e.dev}function Ie(e,t){let r=D.resolve(e).split(D.sep).filter(i=>i),n=D.resolve(t).split(D.sep).filter(i=>i);return r.reduce((i,o,u)=>i&&n[u]===o,!0)}function Se(e,t,r){return`Cannot ${r} '${e}' to a subdirectory of itself, '${t}'.`}pt.exports={checkPaths:gn,checkPathsSync:xn,checkParentPaths:ht,checkParentPathsSync:dt,isSrcSubdir:Ie,areIdentical:ie}});var Ft=d((Do,kt)=>{"use strict";var A=W(),oe=require("path"),Pn=J().mkdirs,On=K().pathExists,Dn=$e().utimesMillis,ue=b();function Cn(e,t,r,n){typeof r=="function"&&!n?(n=r,r={}):typeof r=="function"&&(r={filter:r}),n=n||function(){},r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001"),ue.checkPaths(e,t,"copy",r,(i,o)=>{if(i)return n(i);let{srcStat:u,destStat:c}=o;ue.checkParentPaths(e,u,t,"copy",a=>{if(a)return n(a);wt(e,t,r,(p,s)=>{if(p)return n(p);if(!s)return n();Nn(c,e,t,r,n)})})})}function Nn(e,t,r,n,i){let o=oe.dirname(r);On(o,(u,c)=>{if(u)return i(u);if(c)return je(e,t,r,n,i);Pn(o,a=>a?i(a):je(e,t,r,n,i))})}function wt(e,t,r,n){if(!r.filter)return n(null,!0);Promise.resolve(r.filter(e,t)).then(i=>n(null,i),i=>n(i))}function je(e,t,r,n,i){(n.dereference?A.stat:A.lstat)(t,(u,c)=>u?i(u):c.isDirectory()?Rn(c,e,t,r,n,i):c.isFile()||c.isCharacterDevice()||c.isBlockDevice()?_n(c,e,t,r,n,i):c.isSymbolicLink()?Mn(e,t,r,n,i):c.isSocket()?i(new Error(`Cannot copy a socket file: ${t}`)):c.isFIFO()?i(new Error(`Cannot copy a FIFO pipe: ${t}`)):i(new Error(`Unknown file: ${t}`)))}function _n(e,t,r,n,i,o){return t?Ln(e,r,n,i,o):vt(e,r,n,i,o)}function Ln(e,t,r,n,i){if(n.overwrite)A.unlink(r,o=>o?i(o):vt(e,t,r,n,i));else return n.errorOnExist?i(new Error(`'${r}' already exists`)):i()}function vt(e,t,r,n,i){A.copyFile(t,r,o=>o?i(o):n.preserveTimestamps?Tn(e.mode,t,r,i):we(r,e.mode,i))}function Tn(e,t,r,n){return $n(e)?In(r,e,i=>i?n(i):St(e,t,r,n)):St(e,t,r,n)}function $n(e){return(e&128)===0}function In(e,t,r){return we(e,t|128,r)}function St(e,t,r,n){jn(t,r,i=>i?n(i):we(r,e,n))}function we(e,t,r){return A.chmod(e,t,r)}function jn(e,t,r){A.stat(e,(n,i)=>n?r(n):Dn(t,i.atime,i.mtime,r))}function Rn(e,t,r,n,i,o){return t?Et(r,n,i,o):Wn(e.mode,r,n,i,o)}function Wn(e,t,r,n,i){A.mkdir(r,o=>{if(o)return i(o);Et(t,r,n,u=>u?i(u):we(r,e,i))})}function Et(e,t,r,n){A.readdir(e,(i,o)=>i?n(i):Re(o,e,t,r,n))}function Re(e,t,r,n,i){let o=e.pop();return o?An(e,o,t,r,n,i):i()}function An(e,t,r,n,i,o){let u=oe.join(r,t),c=oe.join(n,t);wt(u,c,i,(a,p)=>{if(a)return o(a);if(!p)return Re(e,r,n,i,o);ue.checkPaths(u,c,"copy",i,(s,l)=>{if(s)return o(s);let{destStat:y}=l;je(y,u,c,i,f=>f?o(f):Re(e,r,n,i,o))})})}function Mn(e,t,r,n,i){A.readlink(t,(o,u)=>{if(o)return i(o);if(n.dereference&&(u=oe.resolve(process.cwd(),u)),e)A.readlink(r,(c,a)=>c?c.code==="EINVAL"||c.code==="UNKNOWN"?A.symlink(u,r,i):i(c):(n.dereference&&(a=oe.resolve(process.cwd(),a)),ue.isSrcSubdir(u,a)?i(new Error(`Cannot copy '${u}' to a subdirectory of itself, '${a}'.`)):ue.isSrcSubdir(a,u)?i(new Error(`Cannot overwrite '${a}' with '${u}'.`)):Jn(u,r,i)));else return A.symlink(u,r,i)})}function Jn(e,t,r){A.unlink(t,n=>n?r(n):A.symlink(e,t,r))}kt.exports=Cn});var Ot=d((Co,Pt)=>{"use strict";var I=W(),ce=require("path"),Un=J().mkdirsSync,Bn=$e().utimesMillisSync,se=b();function Yn(e,t,r){typeof r=="function"&&(r={filter:r}),r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");let{srcStat:n,destStat:i}=se.checkPathsSync(e,t,"copy",r);if(se.checkParentPathsSync(e,n,t,"copy"),r.filter&&!r.filter(e,t))return;let o=ce.dirname(t);return I.existsSync(o)||Un(o),qt(i,e,t,r)}function qt(e,t,r,n){let o=(n.dereference?I.statSync:I.lstatSync)(t);if(o.isDirectory())return Xn(o,e,t,r,n);if(o.isFile()||o.isCharacterDevice()||o.isBlockDevice())return Gn(o,e,t,r,n);if(o.isSymbolicLink())return ei(e,t,r,n);throw o.isSocket()?new Error(`Cannot copy a socket file: ${t}`):o.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${t}`):new Error(`Unknown file: ${t}`)}function Gn(e,t,r,n,i){return t?Kn(e,r,n,i):gt(e,r,n,i)}function Kn(e,t,r,n){if(n.overwrite)return I.unlinkSync(r),gt(e,t,r,n);if(n.errorOnExist)throw new Error(`'${r}' already exists`)}function gt(e,t,r,n){return I.copyFileSync(t,r),n.preserveTimestamps&&Vn(e.mode,t,r),We(r,e.mode)}function Vn(e,t,r){return Hn(e)&&Qn(r,e),zn(t,r)}function Hn(e){return(e&128)===0}function Qn(e,t){return We(e,t|128)}function We(e,t){return I.chmodSync(e,t)}function zn(e,t){let r=I.statSync(e);return Bn(t,r.atime,r.mtime)}function Xn(e,t,r,n,i){return t?xt(r,n,i):bn(e.mode,r,n,i)}function bn(e,t,r,n){return I.mkdirSync(r),xt(t,r,n),We(r,e)}function xt(e,t,r){I.readdirSync(e).forEach(n=>Zn(n,e,t,r))}function Zn(e,t,r,n){let i=ce.join(t,e),o=ce.join(r,e);if(n.filter&&!n.filter(i,o))return;let{destStat:u}=se.checkPathsSync(i,o,"copy",n);return qt(u,i,o,n)}function ei(e,t,r,n){let i=I.readlinkSync(t);if(n.dereference&&(i=ce.resolve(process.cwd(),i)),e){let o;try{o=I.readlinkSync(r)}catch(u){if(u.code==="EINVAL"||u.code==="UNKNOWN")return I.symlinkSync(i,r);throw u}if(n.dereference&&(o=ce.resolve(process.cwd(),o)),se.isSrcSubdir(i,o))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${o}'.`);if(se.isSrcSubdir(o,i))throw new Error(`Cannot overwrite '${o}' with '${i}'.`);return ti(i,r)}else return I.symlinkSync(i,r)}function ti(e,t){return I.unlinkSync(t),I.symlinkSync(e,t)}Pt.exports=Yn});var ve=d((No,Dt)=>{"use strict";var ri=R().fromCallback;Dt.exports={copy:ri(Ft()),copySync:Ot()}});var ae=d((_o,Nt)=>{"use strict";var Ct=W(),ni=R().fromCallback;function ii(e,t){Ct.rm(e,{recursive:!0,force:!0},t)}function oi(e){Ct.rmSync(e,{recursive:!0,force:!0})}Nt.exports={remove:ni(ii),removeSync:oi}});var Wt=d((Lo,Rt)=>{"use strict";var ui=R().fromPromise,Tt=X(),$t=require("path"),It=J(),jt=ae(),_t=ui(async function(t){let r;try{r=await Tt.readdir(t)}catch{return It.mkdirs(t)}return Promise.all(r.map(n=>jt.remove($t.join(t,n))))});function Lt(e){let t;try{t=Tt.readdirSync(e)}catch{return It.mkdirsSync(e)}t.forEach(r=>{r=$t.join(e,r),jt.removeSync(r)})}Rt.exports={emptyDirSync:Lt,emptydirSync:Lt,emptyDir:_t,emptydir:_t}});var Ut=d((To,Jt)=>{"use strict";var ci=R().fromCallback,At=require("path"),V=W(),Mt=J();function si(e,t){function r(){V.writeFile(e,"",n=>{if(n)return t(n);t()})}V.stat(e,(n,i)=>{if(!n&&i.isFile())return t();let o=At.dirname(e);V.stat(o,(u,c)=>{if(u)return u.code==="ENOENT"?Mt.mkdirs(o,a=>{if(a)return t(a);r()}):t(u);c.isDirectory()?r():V.readdir(o,a=>{if(a)return t(a)})})})}function ai(e){let t;try{t=V.statSync(e)}catch{}if(t&&t.isFile())return;let r=At.dirname(e);try{V.statSync(r).isDirectory()||V.readdirSync(r)}catch(n){if(n&&n.code==="ENOENT")Mt.mkdirsSync(r);else throw n}V.writeFileSync(e,"")}Jt.exports={createFile:ci(si),createFileSync:ai}});var Vt=d(($o,Kt)=>{"use strict";var fi=R().fromCallback,Bt=require("path"),H=W(),Yt=J(),li=K().pathExists,{areIdentical:Gt}=b();function yi(e,t,r){function n(i,o){H.link(i,o,u=>{if(u)return r(u);r(null)})}H.lstat(t,(i,o)=>{H.lstat(e,(u,c)=>{if(u)return u.message=u.message.replace("lstat","ensureLink"),r(u);if(o&&Gt(c,o))return r(null);let a=Bt.dirname(t);li(a,(p,s)=>{if(p)return r(p);if(s)return n(e,t);Yt.mkdirs(a,l=>{if(l)return r(l);n(e,t)})})})})}function mi(e,t){let r;try{r=H.lstatSync(t)}catch{}try{let o=H.lstatSync(e);if(r&&Gt(o,r))return}catch(o){throw o.message=o.message.replace("lstat","ensureLink"),o}let n=Bt.dirname(t);return H.existsSync(n)||Yt.mkdirsSync(n),H.linkSync(e,t)}Kt.exports={createLink:fi(yi),createLinkSync:mi}});var Qt=d((Io,Ht)=>{"use strict";var Q=require("path"),fe=W(),hi=K().pathExists;function di(e,t,r){if(Q.isAbsolute(e))return fe.lstat(e,n=>n?(n.message=n.message.replace("lstat","ensureSymlink"),r(n)):r(null,{toCwd:e,toDst:e}));{let n=Q.dirname(t),i=Q.join(n,e);return hi(i,(o,u)=>o?r(o):u?r(null,{toCwd:i,toDst:e}):fe.lstat(e,c=>c?(c.message=c.message.replace("lstat","ensureSymlink"),r(c)):r(null,{toCwd:e,toDst:Q.relative(n,e)})))}}function pi(e,t){let r;if(Q.isAbsolute(e)){if(r=fe.existsSync(e),!r)throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}else{let n=Q.dirname(t),i=Q.join(n,e);if(r=fe.existsSync(i),r)return{toCwd:i,toDst:e};if(r=fe.existsSync(e),!r)throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:Q.relative(n,e)}}}Ht.exports={symlinkPaths:di,symlinkPathsSync:pi}});var bt=d((jo,Xt)=>{"use strict";var zt=W();function Si(e,t,r){if(r=typeof t=="function"?t:r,t=typeof t=="function"?!1:t,t)return r(null,t);zt.lstat(e,(n,i)=>{if(n)return r(null,"file");t=i&&i.isDirectory()?"dir":"file",r(null,t)})}function wi(e,t){let r;if(t)return t;try{r=zt.lstatSync(e)}catch{return"file"}return r&&r.isDirectory()?"dir":"file"}Xt.exports={symlinkType:Si,symlinkTypeSync:wi}});var ur=d((Ro,or)=>{"use strict";var vi=R().fromCallback,er=require("path"),U=X(),tr=J(),Ei=tr.mkdirs,ki=tr.mkdirsSync,rr=Qt(),Fi=rr.symlinkPaths,qi=rr.symlinkPathsSync,nr=bt(),gi=nr.symlinkType,xi=nr.symlinkTypeSync,Pi=K().pathExists,{areIdentical:ir}=b();function Oi(e,t,r,n){n=typeof r=="function"?r:n,r=typeof r=="function"?!1:r,U.lstat(t,(i,o)=>{!i&&o.isSymbolicLink()?Promise.all([U.stat(e),U.stat(t)]).then(([u,c])=>{if(ir(u,c))return n(null);Zt(e,t,r,n)}):Zt(e,t,r,n)})}function Zt(e,t,r,n){Fi(e,t,(i,o)=>{if(i)return n(i);e=o.toDst,gi(o.toCwd,r,(u,c)=>{if(u)return n(u);let a=er.dirname(t);Pi(a,(p,s)=>{if(p)return n(p);if(s)return U.symlink(e,t,c,n);Ei(a,l=>{if(l)return n(l);U.symlink(e,t,c,n)})})})})}function Di(e,t,r){let n;try{n=U.lstatSync(t)}catch{}if(n&&n.isSymbolicLink()){let c=U.statSync(e),a=U.statSync(t);if(ir(c,a))return}let i=qi(e,t);e=i.toDst,r=xi(i.toCwd,r);let o=er.dirname(t);return U.existsSync(o)||ki(o),U.symlinkSync(e,t,r)}or.exports={createSymlink:vi(Oi),createSymlinkSync:Di}});var hr=d((Wo,mr)=>{"use strict";var{createFile:cr,createFileSync:sr}=Ut(),{createLink:ar,createLinkSync:fr}=Vt(),{createSymlink:lr,createSymlinkSync:yr}=ur();mr.exports={createFile:cr,createFileSync:sr,ensureFile:cr,ensureFileSync:sr,createLink:ar,createLinkSync:fr,ensureLink:ar,ensureLinkSync:fr,createSymlink:lr,createSymlinkSync:yr,ensureSymlink:lr,ensureSymlinkSync:yr}});var Ee=d((Ao,dr)=>{function Ci(e,{EOL:t=`
`,finalEOL:r=!0,replacer:n=null,spaces:i}={}){let o=r?t:"";return JSON.stringify(e,n,i).replace(/\n/g,t)+o}function Ni(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e.replace(/^\uFEFF/,"")}dr.exports={stringify:Ci,stripBom:Ni}});var vr=d((Mo,wr)=>{var re;try{re=W()}catch{re=require("fs")}var ke=R(),{stringify:pr,stripBom:Sr}=Ee();async function _i(e,t={}){typeof t=="string"&&(t={encoding:t});let r=t.fs||re,n="throws"in t?t.throws:!0,i=await ke.fromCallback(r.readFile)(e,t);i=Sr(i);let o;try{o=JSON.parse(i,t?t.reviver:null)}catch(u){if(n)throw u.message=`${e}: ${u.message}`,u;return null}return o}var Li=ke.fromPromise(_i);function Ti(e,t={}){typeof t=="string"&&(t={encoding:t});let r=t.fs||re,n="throws"in t?t.throws:!0;try{let i=r.readFileSync(e,t);return i=Sr(i),JSON.parse(i,t.reviver)}catch(i){if(n)throw i.message=`${e}: ${i.message}`,i;return null}}async function $i(e,t,r={}){let n=r.fs||re,i=pr(t,r);await ke.fromCallback(n.writeFile)(e,i,r)}var Ii=ke.fromPromise($i);function ji(e,t,r={}){let n=r.fs||re,i=pr(t,r);return n.writeFileSync(e,i,r)}var Ri={readFile:Li,readFileSync:Ti,writeFile:Ii,writeFileSync:ji};wr.exports=Ri});var kr=d((Jo,Er)=>{"use strict";var Fe=vr();Er.exports={readJson:Fe.readFile,readJsonSync:Fe.readFileSync,writeJson:Fe.writeFile,writeJsonSync:Fe.writeFileSync}});var qe=d((Uo,gr)=>{"use strict";var Wi=R().fromCallback,le=W(),Fr=require("path"),qr=J(),Ai=K().pathExists;function Mi(e,t,r,n){typeof r=="function"&&(n=r,r="utf8");let i=Fr.dirname(e);Ai(i,(o,u)=>{if(o)return n(o);if(u)return le.writeFile(e,t,r,n);qr.mkdirs(i,c=>{if(c)return n(c);le.writeFile(e,t,r,n)})})}function Ji(e,...t){let r=Fr.dirname(e);if(le.existsSync(r))return le.writeFileSync(e,...t);qr.mkdirsSync(r),le.writeFileSync(e,...t)}gr.exports={outputFile:Wi(Mi),outputFileSync:Ji}});var Pr=d((Bo,xr)=>{"use strict";var{stringify:Ui}=Ee(),{outputFile:Bi}=qe();async function Yi(e,t,r={}){let n=Ui(t,r);await Bi(e,n,r)}xr.exports=Yi});var Dr=d((Yo,Or)=>{"use strict";var{stringify:Gi}=Ee(),{outputFileSync:Ki}=qe();function Vi(e,t,r){let n=Gi(t,r);Ki(e,n,r)}Or.exports=Vi});var Nr=d((Go,Cr)=>{"use strict";var Hi=R().fromPromise,j=kr();j.outputJson=Hi(Pr());j.outputJsonSync=Dr();j.outputJSON=j.outputJson;j.outputJSONSync=j.outputJsonSync;j.writeJSON=j.writeJson;j.writeJSONSync=j.writeJsonSync;j.readJSON=j.readJson;j.readJSONSync=j.readJsonSync;Cr.exports=j});var Ir=d((Ko,$r)=>{"use strict";var Qi=W(),Me=require("path"),zi=ve().copy,Tr=ae().remove,Xi=J().mkdirp,bi=K().pathExists,_r=b();function Zi(e,t,r,n){typeof r=="function"&&(n=r,r={}),r=r||{};let i=r.overwrite||r.clobber||!1;_r.checkPaths(e,t,"move",r,(o,u)=>{if(o)return n(o);let{srcStat:c,isChangingCase:a=!1}=u;_r.checkParentPaths(e,c,t,"move",p=>{if(p)return n(p);if(eo(t))return Lr(e,t,i,a,n);Xi(Me.dirname(t),s=>s?n(s):Lr(e,t,i,a,n))})})}function eo(e){let t=Me.dirname(e);return Me.parse(t).root===t}function Lr(e,t,r,n,i){if(n)return Ae(e,t,r,i);if(r)return Tr(t,o=>o?i(o):Ae(e,t,r,i));bi(t,(o,u)=>o?i(o):u?i(new Error("dest already exists.")):Ae(e,t,r,i))}function Ae(e,t,r,n){Qi.rename(e,t,i=>i?i.code!=="EXDEV"?n(i):to(e,t,r,n):n())}function to(e,t,r,n){zi(e,t,{overwrite:r,errorOnExist:!0},o=>o?n(o):Tr(e,n))}$r.exports=Zi});var Mr=d((Vo,Ar)=>{"use strict";var Rr=W(),Ue=require("path"),ro=ve().copySync,Wr=ae().removeSync,no=J().mkdirpSync,jr=b();function io(e,t,r){r=r||{};let n=r.overwrite||r.clobber||!1,{srcStat:i,isChangingCase:o=!1}=jr.checkPathsSync(e,t,"move",r);return jr.checkParentPathsSync(e,i,t,"move"),oo(t)||no(Ue.dirname(t)),uo(e,t,n,o)}function oo(e){let t=Ue.dirname(e);return Ue.parse(t).root===t}function uo(e,t,r,n){if(n)return Je(e,t,r);if(r)return Wr(t),Je(e,t,r);if(Rr.existsSync(t))throw new Error("dest already exists.");return Je(e,t,r)}function Je(e,t,r){try{Rr.renameSync(e,t)}catch(n){if(n.code!=="EXDEV")throw n;return co(e,t,r)}}function co(e,t,r){return ro(e,t,{overwrite:r,errorOnExist:!0}),Wr(e)}Ar.exports=io});var Ur=d((Ho,Jr)=>{"use strict";var so=R().fromCallback;Jr.exports={move:so(Ir()),moveSync:Mr()}});var Yr=d((Qo,Br)=>{"use strict";Br.exports={...X(),...ve(),...Wt(),...hr(),...Nr(),...J(),...Ur(),...qe(),...K(),...ae()}});var yo={};en(yo,{default:()=>Vr});module.exports=tn(yo);var B=require("@raycast/api"),Kr=Ke(Yr());var Gr=Ke(require("child_process"));function ge(e,t){return new Promise((r,n)=>{Gr.default.exec(e,t,(i,o,u)=>{i?n(i):r({stdout:o,stderr:u})})})}var ao="~/.config/clash",fo=(e,t)=>`curl -m 15 --fail -L -o ${e} '${t}'`,lo=(e,t)=>`sed -i '' '/rules:/a\\
 ${t}
' ${e}`;async function Vr(){let e=(0,B.getPreferenceValues)(),{subscriptionUrl:t,rules:r}=e,[n,i]=t.split("|").map(c=>c.trim()),o=`${ao}/${n}.yaml`,u=fo(o,i);try{(0,B.showToast)({style:B.Toast.Style.Animated,title:"Updating subscription"}),await ge(u);let c=r?await(0,Kr.readJson)(r):{},a=[];(c?.rules||[]).reverse().forEach(p=>{a.push(ge(lo(o,p)))}),await Promise.all(a),await(0,B.showHUD)("Subscription update successful")}catch(c){console.error(c),await(0,B.showHUD)("Subscription update failed")}(0,B.popToRoot)({clearSearchBar:!0})}0&&(module.exports={});
