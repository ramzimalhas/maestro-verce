"use strict";var ou=Object.create;var Nr=Object.defineProperty;var au=Object.getOwnPropertyDescriptor;var iu=Object.getOwnPropertyNames;var su=Object.getPrototypeOf,uu=Object.prototype.hasOwnProperty;var Zt=(n,r)=>()=>(n&&(r=n(n=0)),r);var et=(n,r)=>()=>(r||n((r={exports:{}}).exports,r),r.exports),la=(n,r)=>{for(var o in r)Nr(n,o,{get:r[o],enumerable:!0})},fa=(n,r,o,i)=>{if(r&&typeof r=="object"||typeof r=="function")for(let s of iu(r))!uu.call(n,s)&&s!==o&&Nr(n,s,{get:()=>r[s],enumerable:!(i=au(r,s))||i.enumerable});return n};var _e=(n,r,o)=>(o=n!=null?ou(su(n)):{},fa(r||!n||!n.__esModule?Nr(o,"default",{value:n,enumerable:!0}):o,n)),lu=n=>fa(Nr({},"__esModule",{value:!0}),n);var da=et((pl,ca)=>{"use strict";ca.exports=n=>encodeURIComponent(n).replace(/[!'()*]/g,r=>`%${r.charCodeAt(0).toString(16).toUpperCase()}`)});var ya=et((yl,pa)=>{"use strict";var ba="%[a-f0-9]{2}",ha=new RegExp(ba,"gi"),ma=new RegExp("("+ba+")+","gi");function Wn(n,r){try{return decodeURIComponent(n.join(""))}catch{}if(n.length===1)return n;r=r||1;var o=n.slice(0,r),i=n.slice(r);return Array.prototype.concat.call([],Wn(o),Wn(i))}function fu(n){try{return decodeURIComponent(n)}catch{for(var r=n.match(ha),o=1;o<r.length;o++)n=Wn(r,o).join(""),r=n.match(ha);return n}}function cu(n){for(var r={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},o=ma.exec(n);o;){try{r[o[0]]=decodeURIComponent(o[0])}catch{var i=fu(o[0]);i!==o[0]&&(r[o[0]]=i)}o=ma.exec(n)}r["%C2"]="\uFFFD";for(var s=Object.keys(r),l=0;l<s.length;l++){var f=s[l];n=n.replace(new RegExp(f,"g"),r[f])}return n}pa.exports=function(n){if(typeof n!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof n+"`");try{return n=n.replace(/\+/g," "),decodeURIComponent(n)}catch{return cu(n)}}});var Sa=et((gl,ga)=>{"use strict";ga.exports=(n,r)=>{if(!(typeof n=="string"&&typeof r=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(r==="")return[n];let o=n.indexOf(r);return o===-1?[n]:[n.slice(0,o),n.slice(o+r.length)]}});var wa=et((Sl,_a)=>{"use strict";_a.exports=function(n,r){for(var o={},i=Object.keys(n),s=Array.isArray(r),l=0;l<i.length;l++){var f=i[l],b=n[f];(s?r.indexOf(f)!==-1:r(f,b,n))&&(o[f]=b)}return o}});var Hr=et(oe=>{"use strict";var du=da(),hu=ya(),Ta=Sa(),mu=wa(),bu=n=>n==null,kn=Symbol("encodeFragmentIdentifier");function pu(n){switch(n.arrayFormat){case"index":return r=>(o,i)=>{let s=o.length;return i===void 0||n.skipNull&&i===null||n.skipEmptyString&&i===""?o:i===null?[...o,[$(r,n),"[",s,"]"].join("")]:[...o,[$(r,n),"[",$(s,n),"]=",$(i,n)].join("")]};case"bracket":return r=>(o,i)=>i===void 0||n.skipNull&&i===null||n.skipEmptyString&&i===""?o:i===null?[...o,[$(r,n),"[]"].join("")]:[...o,[$(r,n),"[]=",$(i,n)].join("")];case"colon-list-separator":return r=>(o,i)=>i===void 0||n.skipNull&&i===null||n.skipEmptyString&&i===""?o:i===null?[...o,[$(r,n),":list="].join("")]:[...o,[$(r,n),":list=",$(i,n)].join("")];case"comma":case"separator":case"bracket-separator":{let r=n.arrayFormat==="bracket-separator"?"[]=":"=";return o=>(i,s)=>s===void 0||n.skipNull&&s===null||n.skipEmptyString&&s===""?i:(s=s===null?"":s,i.length===0?[[$(o,n),r,$(s,n)].join("")]:[[i,$(s,n)].join(n.arrayFormatSeparator)])}default:return r=>(o,i)=>i===void 0||n.skipNull&&i===null||n.skipEmptyString&&i===""?o:i===null?[...o,$(r,n)]:[...o,[$(r,n),"=",$(i,n)].join("")]}}function yu(n){let r;switch(n.arrayFormat){case"index":return(o,i,s)=>{if(r=/\[(\d*)\]$/.exec(o),o=o.replace(/\[\d*\]$/,""),!r){s[o]=i;return}s[o]===void 0&&(s[o]={}),s[o][r[1]]=i};case"bracket":return(o,i,s)=>{if(r=/(\[\])$/.exec(o),o=o.replace(/\[\]$/,""),!r){s[o]=i;return}if(s[o]===void 0){s[o]=[i];return}s[o]=[].concat(s[o],i)};case"colon-list-separator":return(o,i,s)=>{if(r=/(:list)$/.exec(o),o=o.replace(/:list$/,""),!r){s[o]=i;return}if(s[o]===void 0){s[o]=[i];return}s[o]=[].concat(s[o],i)};case"comma":case"separator":return(o,i,s)=>{let l=typeof i=="string"&&i.includes(n.arrayFormatSeparator),f=typeof i=="string"&&!l&&Ie(i,n).includes(n.arrayFormatSeparator);i=f?Ie(i,n):i;let b=l||f?i.split(n.arrayFormatSeparator).map(p=>Ie(p,n)):i===null?i:Ie(i,n);s[o]=b};case"bracket-separator":return(o,i,s)=>{let l=/(\[\])$/.test(o);if(o=o.replace(/\[\]$/,""),!l){s[o]=i&&Ie(i,n);return}let f=i===null?[]:i.split(n.arrayFormatSeparator).map(b=>Ie(b,n));if(s[o]===void 0){s[o]=f;return}s[o]=[].concat(s[o],f)};default:return(o,i,s)=>{if(s[o]===void 0){s[o]=i;return}s[o]=[].concat(s[o],i)}}}function Ea(n){if(typeof n!="string"||n.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function $(n,r){return r.encode?r.strict?du(n):encodeURIComponent(n):n}function Ie(n,r){return r.decode?hu(n):n}function va(n){return Array.isArray(n)?n.sort():typeof n=="object"?va(Object.keys(n)).sort((r,o)=>Number(r)-Number(o)).map(r=>n[r]):n}function Ca(n){let r=n.indexOf("#");return r!==-1&&(n=n.slice(0,r)),n}function gu(n){let r="",o=n.indexOf("#");return o!==-1&&(r=n.slice(o)),r}function Aa(n){n=Ca(n);let r=n.indexOf("?");return r===-1?"":n.slice(r+1)}function Ra(n,r){return r.parseNumbers&&!Number.isNaN(Number(n))&&typeof n=="string"&&n.trim()!==""?n=Number(n):r.parseBooleans&&n!==null&&(n.toLowerCase()==="true"||n.toLowerCase()==="false")&&(n=n.toLowerCase()==="true"),n}function Pa(n,r){r=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},r),Ea(r.arrayFormatSeparator);let o=yu(r),i=Object.create(null);if(typeof n!="string"||(n=n.trim().replace(/^[?#&]/,""),!n))return i;for(let s of n.split("&")){if(s==="")continue;let[l,f]=Ta(r.decode?s.replace(/\+/g," "):s,"=");f=f===void 0?null:["comma","separator","bracket-separator"].includes(r.arrayFormat)?f:Ie(f,r),o(Ie(l,r),f,i)}for(let s of Object.keys(i)){let l=i[s];if(typeof l=="object"&&l!==null)for(let f of Object.keys(l))l[f]=Ra(l[f],r);else i[s]=Ra(l,r)}return r.sort===!1?i:(r.sort===!0?Object.keys(i).sort():Object.keys(i).sort(r.sort)).reduce((s,l)=>{let f=i[l];return f&&typeof f=="object"&&!Array.isArray(f)?s[l]=va(f):s[l]=f,s},Object.create(null))}oe.extract=Aa;oe.parse=Pa;oe.stringify=(n,r)=>{if(!n)return"";r=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},r),Ea(r.arrayFormatSeparator);let o=f=>r.skipNull&&bu(n[f])||r.skipEmptyString&&n[f]==="",i=pu(r),s={};for(let f of Object.keys(n))o(f)||(s[f]=n[f]);let l=Object.keys(s);return r.sort!==!1&&l.sort(r.sort),l.map(f=>{let b=n[f];return b===void 0?"":b===null?$(f,r):Array.isArray(b)?b.length===0&&r.arrayFormat==="bracket-separator"?$(f,r)+"[]":b.reduce(i(f),[]).join("&"):$(f,r)+"="+$(b,r)}).filter(f=>f.length>0).join("&")};oe.parseUrl=(n,r)=>{r=Object.assign({decode:!0},r);let[o,i]=Ta(n,"#");return Object.assign({url:o.split("?")[0]||"",query:Pa(Aa(n),r)},r&&r.parseFragmentIdentifier&&i?{fragmentIdentifier:Ie(i,r)}:{})};oe.stringifyUrl=(n,r)=>{r=Object.assign({encode:!0,strict:!0,[kn]:!0},r);let o=Ca(n.url).split("?")[0]||"",i=oe.extract(n.url),s=oe.parse(i,{sort:!1}),l=Object.assign(s,n.query),f=oe.stringify(l,r);f&&(f=`?${f}`);let b=gu(n.url);return n.fragmentIdentifier&&(b=`#${r[kn]?$(n.fragmentIdentifier,r):n.fragmentIdentifier}`),`${o}${f}${b}`};oe.pick=(n,r,o)=>{o=Object.assign({parseFragmentIdentifier:!0,[kn]:!1},o);let{url:i,query:s,fragmentIdentifier:l}=oe.parseUrl(n,o);return oe.stringifyUrl({url:i,query:mu(s,r),fragmentIdentifier:l},o)};oe.exclude=(n,r,o)=>{let i=Array.isArray(r)?s=>!r.includes(s):(s,l)=>!r(s,l);return oe.pick(n,i,o)}});var Ga=et((Gr,Qa)=>{(function(n,r){typeof Gr=="object"&&typeof Qa<"u"?r(Gr):typeof define=="function"&&define.amd?define(["exports"],r):(n=typeof globalThis<"u"?globalThis:n||self,r(n.WebStreamsPolyfill={}))})(Gr,function(n){"use strict";let r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:e=>`Symbol(${e})`;function o(){}function i(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}let s=i();function l(e){return typeof e=="object"&&e!==null||typeof e=="function"}let f=o,b=Promise,p=Promise.prototype.then,m=Promise.resolve.bind(b),w=Promise.reject.bind(b);function T(e){return new b(e)}function _(e){return m(e)}function y(e){return w(e)}function g(e,t,a){return p.call(e,t,a)}function A(e,t,a){g(g(e,t,a),void 0,f)}function v(e,t){A(e,t)}function S(e,t){A(e,void 0,t)}function k(e,t,a){return g(e,t,a)}function M(e){g(e,void 0,f)}let C=(()=>{let e=s&&s.queueMicrotask;if(typeof e=="function")return e;let t=_(void 0);return a=>g(t,a)})();function L(e,t,a){if(typeof e!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,t,a)}function O(e,t,a){try{return _(L(e,t,a))}catch(u){return y(u)}}let Q=16384;class V{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(t){let a=this._back,u=a;a._elements.length===Q-1&&(u={_elements:[],_next:void 0}),a._elements.push(t),u!==a&&(this._back=u,a._next=u),++this._size}shift(){let t=this._front,a=t,u=this._cursor,c=u+1,d=t._elements,h=d[u];return c===Q&&(a=t._next,c=0),--this._size,this._cursor=c,t!==a&&(this._front=a),d[u]=void 0,h}forEach(t){let a=this._cursor,u=this._front,c=u._elements;for(;(a!==c.length||u._next!==void 0)&&!(a===c.length&&(u=u._next,c=u._elements,a=0,c.length===0));)t(c[a]),++a}peek(){let t=this._front,a=this._cursor;return t._elements[a]}}function N(e,t){e._ownerReadableStream=t,t._reader=e,t._state==="readable"?Lt(e):t._state==="closed"?fr(e):de(e,t._storedError)}function nt(e,t){let a=e._ownerReadableStream;return ge(a,t)}function ee(e){e._ownerReadableStream._state==="readable"?Be(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):cr(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function Fe(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function Lt(e){e._closedPromise=T((t,a)=>{e._closedPromise_resolve=t,e._closedPromise_reject=a})}function de(e,t){Lt(e),Be(e,t)}function fr(e){Lt(e),qt(e)}function Be(e,t){e._closedPromise_reject!==void 0&&(M(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function cr(e,t){de(e,t)}function qt(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}let dr=r("[[AbortSteps]]"),gt=r("[[ErrorSteps]]"),ot=r("[[CancelSteps]]"),Re=r("[[PullSteps]]"),St=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)},_t=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function De(e){return typeof e=="object"||typeof e=="function"}function be(e,t){if(e!==void 0&&!De(e))throw new TypeError(`${t} is not an object.`)}function x(e,t){if(typeof e!="function")throw new TypeError(`${t} is not a function.`)}function te(e){return typeof e=="object"&&e!==null||typeof e=="function"}function Z(e,t){if(!te(e))throw new TypeError(`${t} is not an object.`)}function U(e,t,a){if(e===void 0)throw new TypeError(`Parameter ${t} is required in '${a}'.`)}function We(e,t,a){if(e===void 0)throw new TypeError(`${t} is required in '${a}'.`)}function ke(e){return Number(e)}function ue(e){return e===0?0:e}function Y(e){return ue(_t(e))}function pe(e,t){let u=Number.MAX_SAFE_INTEGER,c=Number(e);if(c=ue(c),!St(c))throw new TypeError(`${t} is not a finite number`);if(c=Y(c),c<0||c>u)throw new TypeError(`${t} is outside the accepted range of 0 to ${u}, inclusive`);return!St(c)||c===0?0:c}function re(e,t){if(!Ze(e))throw new TypeError(`${t} is not a ReadableStream.`)}function Te(e){return new Ve(e)}function je(e,t){e._reader._readRequests.push(t)}function Ee(e,t,a){let c=e._reader._readRequests.shift();a?c._closeSteps():c._chunkSteps(t)}function Ne(e){return e._reader._readRequests.length}function He(e){let t=e._reader;return!(t===void 0||!Ye(t))}class Ve{constructor(t){if(U(t,1,"ReadableStreamDefaultReader"),re(t,"First parameter"),Je(t))throw new TypeError("This stream has already been locked for exclusive reading by another reader");N(this,t),this._readRequests=new V}get closed(){return Ye(this)?this._closedPromise:y(hr("closed"))}cancel(t=void 0){return Ye(this)?this._ownerReadableStream===void 0?y(Fe("cancel")):nt(this,t):y(hr("cancel"))}read(){if(!Ye(this))return y(hr("read"));if(this._ownerReadableStream===void 0)return y(Fe("read from"));let t,a,u=T((d,h)=>{t=d,a=h});return It(this,{_chunkSteps:d=>t({value:d,done:!1}),_closeSteps:()=>t({value:void 0,done:!0}),_errorSteps:d=>a(d)}),u}releaseLock(){if(!Ye(this))throw hr("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");ee(this)}}}Object.defineProperties(Ve.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Ve.prototype,r.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function Ye(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_readRequests")?!1:e instanceof Ve}function It(e,t){let a=e._ownerReadableStream;a._disturbed=!0,a._state==="closed"?t._closeSteps():a._state==="errored"?t._errorSteps(a._storedError):a._readableStreamController[Re](t)}function hr(e){return new TypeError(`ReadableStreamDefaultReader.prototype.${e} can only be used on a ReadableStreamDefaultReader`)}let oo=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class ao{constructor(t,a){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=t,this._preventCancel=a}next(){let t=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?k(this._ongoingPromise,t,t):t(),this._ongoingPromise}return(t){let a=()=>this._returnSteps(t);return this._ongoingPromise?k(this._ongoingPromise,a,a):a()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let t=this._reader;if(t._ownerReadableStream===void 0)return y(Fe("iterate"));let a,u,c=T((h,R)=>{a=h,u=R});return It(t,{_chunkSteps:h=>{this._ongoingPromise=void 0,C(()=>a({value:h,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,ee(t),a({value:void 0,done:!0})},_errorSteps:h=>{this._ongoingPromise=void 0,this._isFinished=!0,ee(t),u(h)}}),c}_returnSteps(t){if(this._isFinished)return Promise.resolve({value:t,done:!0});this._isFinished=!0;let a=this._reader;if(a._ownerReadableStream===void 0)return y(Fe("finish iterating"));if(!this._preventCancel){let u=nt(a,t);return ee(a),k(u,()=>({value:t,done:!0}))}return ee(a),_({value:t,done:!0})}}let io={next(){return so(this)?this._asyncIteratorImpl.next():y(uo("next"))},return(e){return so(this)?this._asyncIteratorImpl.return(e):y(uo("return"))}};oo!==void 0&&Object.setPrototypeOf(io,oo);function xi(e,t){let a=Te(e),u=new ao(a,t),c=Object.create(io);return c._asyncIteratorImpl=u,c}function so(e){if(!l(e)||!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof ao}catch{return!1}}function uo(e){return new TypeError(`ReadableStreamAsyncIterator.${e} can only be used on a ReadableSteamAsyncIterator`)}let lo=Number.isNaN||function(e){return e!==e};function zt(e){return e.slice()}function fo(e,t,a,u,c){new Uint8Array(e).set(new Uint8Array(a,u,c),t)}function ml(e){return e}function mr(e){return!1}function co(e,t,a){if(e.slice)return e.slice(t,a);let u=a-t,c=new ArrayBuffer(u);return fo(c,0,e,t,u),c}function Mi(e){return!(typeof e!="number"||lo(e)||e<0)}function ho(e){let t=co(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(t)}function fn(e){let t=e._queue.shift();return e._queueTotalSize-=t.size,e._queueTotalSize<0&&(e._queueTotalSize=0),t.value}function cn(e,t,a){if(!Mi(a)||a===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");e._queue.push({value:t,size:a}),e._queueTotalSize+=a}function Ui(e){return e._queue.peek().value}function Qe(e){e._queue=new V,e._queueTotalSize=0}class xt{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!dn(this))throw pn("view");return this._view}respond(t){if(!dn(this))throw pn("respond");if(U(t,1,"respond"),t=pe(t,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");mr(this._view.buffer),Sr(this._associatedReadableByteStreamController,t)}respondWithNewView(t){if(!dn(this))throw pn("respondWithNewView");if(U(t,1,"respondWithNewView"),!ArrayBuffer.isView(t))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");mr(t.buffer),_r(this._associatedReadableByteStreamController,t)}}Object.defineProperties(xt.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(xt.prototype,r.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class wt{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!at(this))throw Ut("byobRequest");return bn(this)}get desiredSize(){if(!at(this))throw Ut("desiredSize");return wo(this)}close(){if(!at(this))throw Ut("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");let t=this._controlledReadableByteStream._state;if(t!=="readable")throw new TypeError(`The stream (in ${t} state) is not in the readable state and cannot be closed`);Mt(this)}enqueue(t){if(!at(this))throw Ut("enqueue");if(U(t,1,"enqueue"),!ArrayBuffer.isView(t))throw new TypeError("chunk must be an array buffer view");if(t.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(t.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");let a=this._controlledReadableByteStream._state;if(a!=="readable")throw new TypeError(`The stream (in ${a} state) is not in the readable state and cannot be enqueued to`);gr(this,t)}error(t=void 0){if(!at(this))throw Ut("error");ye(this,t)}[ot](t){mo(this),Qe(this);let a=this._cancelAlgorithm(t);return yr(this),a}[Re](t){let a=this._controlledReadableByteStream;if(this._queueTotalSize>0){let c=this._queue.shift();this._queueTotalSize-=c.byteLength,go(this);let d=new Uint8Array(c.buffer,c.byteOffset,c.byteLength);t._chunkSteps(d);return}let u=this._autoAllocateChunkSize;if(u!==void 0){let c;try{c=new ArrayBuffer(u)}catch(h){t._errorSteps(h);return}let d={buffer:c,bufferByteLength:u,byteOffset:0,byteLength:u,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(d)}je(a,t),it(this)}}Object.defineProperties(wt.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(wt.prototype,r.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function at(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")?!1:e instanceof wt}function dn(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")?!1:e instanceof xt}function it(e){if(!Hi(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let a=e._pullAlgorithm();A(a,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,it(e))},u=>{ye(e,u)})}function mo(e){mn(e),e._pendingPullIntos=new V}function hn(e,t){let a=!1;e._state==="closed"&&(a=!0);let u=bo(t);t.readerType==="default"?Ee(e,u,a):Qi(e,u,a)}function bo(e){let t=e.bytesFilled,a=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,t/a)}function br(e,t,a,u){e._queue.push({buffer:t,byteOffset:a,byteLength:u}),e._queueTotalSize+=u}function po(e,t){let a=t.elementSize,u=t.bytesFilled-t.bytesFilled%a,c=Math.min(e._queueTotalSize,t.byteLength-t.bytesFilled),d=t.bytesFilled+c,h=d-d%a,R=c,P=!1;h>u&&(R=h-t.bytesFilled,P=!0);let B=e._queue;for(;R>0;){let D=B.peek(),W=Math.min(R,D.byteLength),j=t.byteOffset+t.bytesFilled;fo(t.buffer,j,D.buffer,D.byteOffset,W),D.byteLength===W?B.shift():(D.byteOffset+=W,D.byteLength-=W),e._queueTotalSize-=W,yo(e,W,t),R-=W}return P}function yo(e,t,a){a.bytesFilled+=t}function go(e){e._queueTotalSize===0&&e._closeRequested?(yr(e),Gt(e._controlledReadableByteStream)):it(e)}function mn(e){e._byobRequest!==null&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function So(e){for(;e._pendingPullIntos.length>0;){if(e._queueTotalSize===0)return;let t=e._pendingPullIntos.peek();po(e,t)&&(pr(e),hn(e._controlledReadableByteStream,t))}}function $i(e,t,a){let u=e._controlledReadableByteStream,c=1;t.constructor!==DataView&&(c=t.constructor.BYTES_PER_ELEMENT);let d=t.constructor,h=t.buffer,R={buffer:h,bufferByteLength:h.byteLength,byteOffset:t.byteOffset,byteLength:t.byteLength,bytesFilled:0,elementSize:c,viewConstructor:d,readerType:"byob"};if(e._pendingPullIntos.length>0){e._pendingPullIntos.push(R),Eo(u,a);return}if(u._state==="closed"){let P=new d(R.buffer,R.byteOffset,0);a._closeSteps(P);return}if(e._queueTotalSize>0){if(po(e,R)){let P=bo(R);go(e),a._chunkSteps(P);return}if(e._closeRequested){let P=new TypeError("Insufficient bytes to fill elements in the given buffer");ye(e,P),a._errorSteps(P);return}}e._pendingPullIntos.push(R),Eo(u,a),it(e)}function ji(e,t){let a=e._controlledReadableByteStream;if(yn(a))for(;vo(a)>0;){let u=pr(e);hn(a,u)}}function Ni(e,t,a){if(yo(e,t,a),a.bytesFilled<a.elementSize)return;pr(e);let u=a.bytesFilled%a.elementSize;if(u>0){let c=a.byteOffset+a.bytesFilled,d=co(a.buffer,c-u,c);br(e,d,0,d.byteLength)}a.bytesFilled-=u,hn(e._controlledReadableByteStream,a),So(e)}function _o(e,t){let a=e._pendingPullIntos.peek();mn(e),e._controlledReadableByteStream._state==="closed"?ji(e):Ni(e,t,a),it(e)}function pr(e){return e._pendingPullIntos.shift()}function Hi(e){let t=e._controlledReadableByteStream;return t._state!=="readable"||e._closeRequested||!e._started?!1:!!(He(t)&&Ne(t)>0||yn(t)&&vo(t)>0||wo(e)>0)}function yr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function Mt(e){let t=e._controlledReadableByteStream;if(!(e._closeRequested||t._state!=="readable")){if(e._queueTotalSize>0){e._closeRequested=!0;return}if(e._pendingPullIntos.length>0&&e._pendingPullIntos.peek().bytesFilled>0){let u=new TypeError("Insufficient bytes to fill elements in the given buffer");throw ye(e,u),u}yr(e),Gt(t)}}function gr(e,t){let a=e._controlledReadableByteStream;if(e._closeRequested||a._state!=="readable")return;let u=t.buffer,c=t.byteOffset,d=t.byteLength,h=u;if(e._pendingPullIntos.length>0){let R=e._pendingPullIntos.peek();mr(R.buffer),R.buffer=R.buffer}if(mn(e),He(a))if(Ne(a)===0)br(e,h,c,d);else{e._pendingPullIntos.length>0&&pr(e);let R=new Uint8Array(h,c,d);Ee(a,R,!1)}else yn(a)?(br(e,h,c,d),So(e)):br(e,h,c,d);it(e)}function ye(e,t){let a=e._controlledReadableByteStream;a._state==="readable"&&(mo(e),Qe(e),yr(e),Go(a,t))}function bn(e){if(e._byobRequest===null&&e._pendingPullIntos.length>0){let t=e._pendingPullIntos.peek(),a=new Uint8Array(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled),u=Object.create(xt.prototype);Yi(u,e,a),e._byobRequest=u}return e._byobRequest}function wo(e){let t=e._controlledReadableByteStream._state;return t==="errored"?null:t==="closed"?0:e._strategyHWM-e._queueTotalSize}function Sr(e,t){let a=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(t!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(t===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(a.bytesFilled+t>a.byteLength)throw new RangeError("bytesWritten out of range")}a.buffer=a.buffer,_o(e,t)}function _r(e,t){let a=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(t.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(t.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(a.byteOffset+a.bytesFilled!==t.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(a.bufferByteLength!==t.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(a.bytesFilled+t.byteLength>a.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");let c=t.byteLength;a.buffer=t.buffer,_o(e,c)}function Ro(e,t,a,u,c,d,h){t._controlledReadableByteStream=e,t._pullAgain=!1,t._pulling=!1,t._byobRequest=null,t._queue=t._queueTotalSize=void 0,Qe(t),t._closeRequested=!1,t._started=!1,t._strategyHWM=d,t._pullAlgorithm=u,t._cancelAlgorithm=c,t._autoAllocateChunkSize=h,t._pendingPullIntos=new V,e._readableStreamController=t;let R=a();A(_(R),()=>{t._started=!0,it(t)},P=>{ye(t,P)})}function Vi(e,t,a){let u=Object.create(wt.prototype),c=()=>{},d=()=>_(void 0),h=()=>_(void 0);t.start!==void 0&&(c=()=>t.start(u)),t.pull!==void 0&&(d=()=>t.pull(u)),t.cancel!==void 0&&(h=P=>t.cancel(P));let R=t.autoAllocateChunkSize;if(R===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");Ro(e,u,c,d,h,a,R)}function Yi(e,t,a){e._associatedReadableByteStreamController=t,e._view=a}function pn(e){return new TypeError(`ReadableStreamBYOBRequest.prototype.${e} can only be used on a ReadableStreamBYOBRequest`)}function Ut(e){return new TypeError(`ReadableByteStreamController.prototype.${e} can only be used on a ReadableByteStreamController`)}function To(e){return new $t(e)}function Eo(e,t){e._reader._readIntoRequests.push(t)}function Qi(e,t,a){let c=e._reader._readIntoRequests.shift();a?c._closeSteps(t):c._chunkSteps(t)}function vo(e){return e._reader._readIntoRequests.length}function yn(e){let t=e._reader;return!(t===void 0||!st(t))}class $t{constructor(t){if(U(t,1,"ReadableStreamBYOBReader"),re(t,"First parameter"),Je(t))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!at(t._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");N(this,t),this._readIntoRequests=new V}get closed(){return st(this)?this._closedPromise:y(wr("closed"))}cancel(t=void 0){return st(this)?this._ownerReadableStream===void 0?y(Fe("cancel")):nt(this,t):y(wr("cancel"))}read(t){if(!st(this))return y(wr("read"));if(!ArrayBuffer.isView(t))return y(new TypeError("view must be an array buffer view"));if(t.byteLength===0)return y(new TypeError("view must have non-zero byteLength"));if(t.buffer.byteLength===0)return y(new TypeError("view's buffer must have non-zero byteLength"));if(mr(t.buffer),this._ownerReadableStream===void 0)return y(Fe("read from"));let a,u,c=T((h,R)=>{a=h,u=R});return Co(this,t,{_chunkSteps:h=>a({value:h,done:!1}),_closeSteps:h=>a({value:h,done:!0}),_errorSteps:h=>u(h)}),c}releaseLock(){if(!st(this))throw wr("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");ee(this)}}}Object.defineProperties($t.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty($t.prototype,r.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function st(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")?!1:e instanceof $t}function Co(e,t,a){let u=e._ownerReadableStream;u._disturbed=!0,u._state==="errored"?a._errorSteps(u._storedError):$i(u._readableStreamController,t,a)}function wr(e){return new TypeError(`ReadableStreamBYOBReader.prototype.${e} can only be used on a ReadableStreamBYOBReader`)}function jt(e,t){let{highWaterMark:a}=e;if(a===void 0)return t;if(lo(a)||a<0)throw new RangeError("Invalid highWaterMark");return a}function Rr(e){let{size:t}=e;return t||(()=>1)}function Tr(e,t){be(e,t);let a=e?.highWaterMark,u=e?.size;return{highWaterMark:a===void 0?void 0:ke(a),size:u===void 0?void 0:Gi(u,`${t} has member 'size' that`)}}function Gi(e,t){return x(e,t),a=>ke(e(a))}function Ki(e,t){be(e,t);let a=e?.abort,u=e?.close,c=e?.start,d=e?.type,h=e?.write;return{abort:a===void 0?void 0:Zi(a,e,`${t} has member 'abort' that`),close:u===void 0?void 0:Ji(u,e,`${t} has member 'close' that`),start:c===void 0?void 0:Xi(c,e,`${t} has member 'start' that`),write:h===void 0?void 0:es(h,e,`${t} has member 'write' that`),type:d}}function Zi(e,t,a){return x(e,a),u=>O(e,t,[u])}function Ji(e,t,a){return x(e,a),()=>O(e,t,[])}function Xi(e,t,a){return x(e,a),u=>L(e,t,[u])}function es(e,t,a){return x(e,a),(u,c)=>O(e,t,[u,c])}function Ao(e,t){if(!Rt(e))throw new TypeError(`${t} is not a WritableStream.`)}function ts(e){if(typeof e!="object"||e===null)return!1;try{return typeof e.aborted=="boolean"}catch{return!1}}let rs=typeof AbortController=="function";function ns(){if(rs)return new AbortController}class Nt{constructor(t={},a={}){t===void 0?t=null:Z(t,"First parameter");let u=Tr(a,"Second parameter"),c=Ki(t,"First parameter");if(Oo(this),c.type!==void 0)throw new RangeError("Invalid type is specified");let h=Rr(u),R=jt(u,1);ys(this,c,R,h)}get locked(){if(!Rt(this))throw Pr("locked");return Tt(this)}abort(t=void 0){return Rt(this)?Tt(this)?y(new TypeError("Cannot abort a stream that already has a writer")):Er(this,t):y(Pr("abort"))}close(){return Rt(this)?Tt(this)?y(new TypeError("Cannot close a stream that already has a writer")):ve(this)?y(new TypeError("Cannot close an already-closing stream")):Fo(this):y(Pr("close"))}getWriter(){if(!Rt(this))throw Pr("getWriter");return Po(this)}}Object.defineProperties(Nt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Nt.prototype,r.toStringTag,{value:"WritableStream",configurable:!0});function Po(e){return new Ht(e)}function os(e,t,a,u,c=1,d=()=>1){let h=Object.create(Nt.prototype);Oo(h);let R=Object.create(Et.prototype);return qo(h,R,e,t,a,u,c,d),h}function Oo(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new V,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function Rt(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")?!1:e instanceof Nt}function Tt(e){return e._writer!==void 0}function Er(e,t){var a;if(e._state==="closed"||e._state==="errored")return _(void 0);e._writableStreamController._abortReason=t,(a=e._writableStreamController._abortController)===null||a===void 0||a.abort();let u=e._state;if(u==="closed"||u==="errored")return _(void 0);if(e._pendingAbortRequest!==void 0)return e._pendingAbortRequest._promise;let c=!1;u==="erroring"&&(c=!0,t=void 0);let d=T((h,R)=>{e._pendingAbortRequest={_promise:void 0,_resolve:h,_reject:R,_reason:t,_wasAlreadyErroring:c}});return e._pendingAbortRequest._promise=d,c||Sn(e,t),d}function Fo(e){let t=e._state;if(t==="closed"||t==="errored")return y(new TypeError(`The stream (in ${t} state) is not in the writable state and cannot be closed`));let a=T((c,d)=>{let h={_resolve:c,_reject:d};e._closeRequest=h}),u=e._writer;return u!==void 0&&e._backpressure&&t==="writable"&&Pn(u),gs(e._writableStreamController),a}function as(e){return T((a,u)=>{let c={_resolve:a,_reject:u};e._writeRequests.push(c)})}function gn(e,t){if(e._state==="writable"){Sn(e,t);return}_n(e)}function Sn(e,t){let a=e._writableStreamController;e._state="erroring",e._storedError=t;let u=e._writer;u!==void 0&&Do(u,t),!fs(e)&&a._started&&_n(e)}function _n(e){e._state="errored",e._writableStreamController[gt]();let t=e._storedError;if(e._writeRequests.forEach(c=>{c._reject(t)}),e._writeRequests=new V,e._pendingAbortRequest===void 0){vr(e);return}let a=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,a._wasAlreadyErroring){a._reject(t),vr(e);return}let u=e._writableStreamController[dr](a._reason);A(u,()=>{a._resolve(),vr(e)},c=>{a._reject(c),vr(e)})}function is(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}function ss(e,t){e._inFlightWriteRequest._reject(t),e._inFlightWriteRequest=void 0,gn(e,t)}function us(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0,e._state==="erroring"&&(e._storedError=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";let a=e._writer;a!==void 0&&Mo(a)}function ls(e,t){e._inFlightCloseRequest._reject(t),e._inFlightCloseRequest=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._reject(t),e._pendingAbortRequest=void 0),gn(e,t)}function ve(e){return!(e._closeRequest===void 0&&e._inFlightCloseRequest===void 0)}function fs(e){return!(e._inFlightWriteRequest===void 0&&e._inFlightCloseRequest===void 0)}function cs(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0}function ds(e){e._inFlightWriteRequest=e._writeRequests.shift()}function vr(e){e._closeRequest!==void 0&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);let t=e._writer;t!==void 0&&Cn(t,e._storedError)}function wn(e,t){let a=e._writer;a!==void 0&&t!==e._backpressure&&(t?vs(a):Pn(a)),e._backpressure=t}class Ht{constructor(t){if(U(t,1,"WritableStreamDefaultWriter"),Ao(t,"First parameter"),Tt(t))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=t,t._writer=this;let a=t._state;if(a==="writable")!ve(t)&&t._backpressure?Fr(this):Uo(this),Or(this);else if(a==="erroring")An(this,t._storedError),Or(this);else if(a==="closed")Uo(this),Ts(this);else{let u=t._storedError;An(this,u),xo(this,u)}}get closed(){return ut(this)?this._closedPromise:y(lt("closed"))}get desiredSize(){if(!ut(this))throw lt("desiredSize");if(this._ownerWritableStream===void 0)throw Vt("desiredSize");return ps(this)}get ready(){return ut(this)?this._readyPromise:y(lt("ready"))}abort(t=void 0){return ut(this)?this._ownerWritableStream===void 0?y(Vt("abort")):hs(this,t):y(lt("abort"))}close(){if(!ut(this))return y(lt("close"));let t=this._ownerWritableStream;return t===void 0?y(Vt("close")):ve(t)?y(new TypeError("Cannot close an already-closing stream")):Bo(this)}releaseLock(){if(!ut(this))throw lt("releaseLock");this._ownerWritableStream!==void 0&&Wo(this)}write(t=void 0){return ut(this)?this._ownerWritableStream===void 0?y(Vt("write to")):ko(this,t):y(lt("write"))}}Object.defineProperties(Ht.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Ht.prototype,r.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function ut(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")?!1:e instanceof Ht}function hs(e,t){let a=e._ownerWritableStream;return Er(a,t)}function Bo(e){let t=e._ownerWritableStream;return Fo(t)}function ms(e){let t=e._ownerWritableStream,a=t._state;return ve(t)||a==="closed"?_(void 0):a==="errored"?y(t._storedError):Bo(e)}function bs(e,t){e._closedPromiseState==="pending"?Cn(e,t):Es(e,t)}function Do(e,t){e._readyPromiseState==="pending"?$o(e,t):Cs(e,t)}function ps(e){let t=e._ownerWritableStream,a=t._state;return a==="errored"||a==="erroring"?null:a==="closed"?0:Io(t._writableStreamController)}function Wo(e){let t=e._ownerWritableStream,a=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");Do(e,a),bs(e,a),t._writer=void 0,e._ownerWritableStream=void 0}function ko(e,t){let a=e._ownerWritableStream,u=a._writableStreamController,c=Ss(u,t);if(a!==e._ownerWritableStream)return y(Vt("write to"));let d=a._state;if(d==="errored")return y(a._storedError);if(ve(a)||d==="closed")return y(new TypeError("The stream is closing or closed and cannot be written to"));if(d==="erroring")return y(a._storedError);let h=as(a);return _s(u,t,c),h}let Lo={};class Et{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!Rn(this))throw vn("abortReason");return this._abortReason}get signal(){if(!Rn(this))throw vn("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(t=void 0){if(!Rn(this))throw vn("error");this._controlledWritableStream._state==="writable"&&zo(this,t)}[dr](t){let a=this._abortAlgorithm(t);return Cr(this),a}[gt](){Qe(this)}}Object.defineProperties(Et.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Et.prototype,r.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function Rn(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")?!1:e instanceof Et}function qo(e,t,a,u,c,d,h,R){t._controlledWritableStream=e,e._writableStreamController=t,t._queue=void 0,t._queueTotalSize=void 0,Qe(t),t._abortReason=void 0,t._abortController=ns(),t._started=!1,t._strategySizeAlgorithm=R,t._strategyHWM=h,t._writeAlgorithm=u,t._closeAlgorithm=c,t._abortAlgorithm=d;let P=En(t);wn(e,P);let B=a(),D=_(B);A(D,()=>{t._started=!0,Ar(t)},W=>{t._started=!0,gn(e,W)})}function ys(e,t,a,u){let c=Object.create(Et.prototype),d=()=>{},h=()=>_(void 0),R=()=>_(void 0),P=()=>_(void 0);t.start!==void 0&&(d=()=>t.start(c)),t.write!==void 0&&(h=B=>t.write(B,c)),t.close!==void 0&&(R=()=>t.close()),t.abort!==void 0&&(P=B=>t.abort(B)),qo(e,c,d,h,R,P,a,u)}function Cr(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function gs(e){cn(e,Lo,0),Ar(e)}function Ss(e,t){try{return e._strategySizeAlgorithm(t)}catch(a){return Tn(e,a),1}}function Io(e){return e._strategyHWM-e._queueTotalSize}function _s(e,t,a){try{cn(e,t,a)}catch(c){Tn(e,c);return}let u=e._controlledWritableStream;if(!ve(u)&&u._state==="writable"){let c=En(e);wn(u,c)}Ar(e)}function Ar(e){let t=e._controlledWritableStream;if(!e._started||t._inFlightWriteRequest!==void 0)return;if(t._state==="erroring"){_n(t);return}if(e._queue.length===0)return;let u=Ui(e);u===Lo?ws(e):Rs(e,u)}function Tn(e,t){e._controlledWritableStream._state==="writable"&&zo(e,t)}function ws(e){let t=e._controlledWritableStream;cs(t),fn(e);let a=e._closeAlgorithm();Cr(e),A(a,()=>{us(t)},u=>{ls(t,u)})}function Rs(e,t){let a=e._controlledWritableStream;ds(a);let u=e._writeAlgorithm(t);A(u,()=>{is(a);let c=a._state;if(fn(e),!ve(a)&&c==="writable"){let d=En(e);wn(a,d)}Ar(e)},c=>{a._state==="writable"&&Cr(e),ss(a,c)})}function En(e){return Io(e)<=0}function zo(e,t){let a=e._controlledWritableStream;Cr(e),Sn(a,t)}function Pr(e){return new TypeError(`WritableStream.prototype.${e} can only be used on a WritableStream`)}function vn(e){return new TypeError(`WritableStreamDefaultController.prototype.${e} can only be used on a WritableStreamDefaultController`)}function lt(e){return new TypeError(`WritableStreamDefaultWriter.prototype.${e} can only be used on a WritableStreamDefaultWriter`)}function Vt(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function Or(e){e._closedPromise=T((t,a)=>{e._closedPromise_resolve=t,e._closedPromise_reject=a,e._closedPromiseState="pending"})}function xo(e,t){Or(e),Cn(e,t)}function Ts(e){Or(e),Mo(e)}function Cn(e,t){e._closedPromise_reject!==void 0&&(M(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function Es(e,t){xo(e,t)}function Mo(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function Fr(e){e._readyPromise=T((t,a)=>{e._readyPromise_resolve=t,e._readyPromise_reject=a}),e._readyPromiseState="pending"}function An(e,t){Fr(e),$o(e,t)}function Uo(e){Fr(e),Pn(e)}function $o(e,t){e._readyPromise_reject!==void 0&&(M(e._readyPromise),e._readyPromise_reject(t),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function vs(e){Fr(e)}function Cs(e,t){An(e,t)}function Pn(e){e._readyPromise_resolve!==void 0&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}let jo=typeof DOMException<"u"?DOMException:void 0;function As(e){if(!(typeof e=="function"||typeof e=="object"))return!1;try{return new e,!0}catch{return!1}}function Ps(){let e=function(a,u){this.message=a||"",this.name=u||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}let Os=As(jo)?jo:Ps();function No(e,t,a,u,c,d){let h=Te(e),R=Po(t);e._disturbed=!0;let P=!1,B=_(void 0);return T((D,W)=>{let j;if(d!==void 0){if(j=()=>{let E=new Os("Aborted","AbortError"),F=[];u||F.push(()=>t._state==="writable"?Er(t,E):_(void 0)),c||F.push(()=>e._state==="readable"?ge(e,E):_(void 0)),ne(()=>Promise.all(F.map(I=>I())),!0,E)},d.aborted){j();return}d.addEventListener("abort",j)}function Se(){return T((E,F)=>{function I(le){le?E():g(At(),I,F)}I(!1)})}function At(){return P?_(!0):g(R._readyPromise,()=>T((E,F)=>{It(h,{_chunkSteps:I=>{B=g(ko(R,I),void 0,o),E(!1)},_closeSteps:()=>E(!0),_errorSteps:F})}))}if(Le(e,h._closedPromise,E=>{u?he(!0,E):ne(()=>Er(t,E),!0,E)}),Le(t,R._closedPromise,E=>{c?he(!0,E):ne(()=>ge(e,E),!0,E)}),J(e,h._closedPromise,()=>{a?he():ne(()=>ms(R))}),ve(t)||t._state==="closed"){let E=new TypeError("the destination writable stream closed before all data could be piped to it");c?he(!0,E):ne(()=>ge(e,E),!0,E)}M(Se());function Xe(){let E=B;return g(B,()=>E!==B?Xe():void 0)}function Le(E,F,I){E._state==="errored"?I(E._storedError):S(F,I)}function J(E,F,I){E._state==="closed"?I():v(F,I)}function ne(E,F,I){if(P)return;P=!0,t._state==="writable"&&!ve(t)?v(Xe(),le):le();function le(){A(E(),()=>qe(F,I),Pt=>qe(!0,Pt))}}function he(E,F){P||(P=!0,t._state==="writable"&&!ve(t)?v(Xe(),()=>qe(E,F)):qe(E,F))}function qe(E,F){Wo(R),ee(h),d!==void 0&&d.removeEventListener("abort",j),E?W(F):D(void 0)}})}class vt{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Br(this))throw kr("desiredSize");return On(this)}close(){if(!Br(this))throw kr("close");if(!Ct(this))throw new TypeError("The stream is not in a state that permits close");Qt(this)}enqueue(t=void 0){if(!Br(this))throw kr("enqueue");if(!Ct(this))throw new TypeError("The stream is not in a state that permits enqueue");return Wr(this,t)}error(t=void 0){if(!Br(this))throw kr("error");Ge(this,t)}[ot](t){Qe(this);let a=this._cancelAlgorithm(t);return Dr(this),a}[Re](t){let a=this._controlledReadableStream;if(this._queue.length>0){let u=fn(this);this._closeRequested&&this._queue.length===0?(Dr(this),Gt(a)):Yt(this),t._chunkSteps(u)}else je(a,t),Yt(this)}}Object.defineProperties(vt.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(vt.prototype,r.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function Br(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")?!1:e instanceof vt}function Yt(e){if(!Ho(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let a=e._pullAlgorithm();A(a,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Yt(e))},u=>{Ge(e,u)})}function Ho(e){let t=e._controlledReadableStream;return!Ct(e)||!e._started?!1:!!(Je(t)&&Ne(t)>0||On(e)>0)}function Dr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function Qt(e){if(!Ct(e))return;let t=e._controlledReadableStream;e._closeRequested=!0,e._queue.length===0&&(Dr(e),Gt(t))}function Wr(e,t){if(!Ct(e))return;let a=e._controlledReadableStream;if(Je(a)&&Ne(a)>0)Ee(a,t,!1);else{let u;try{u=e._strategySizeAlgorithm(t)}catch(c){throw Ge(e,c),c}try{cn(e,t,u)}catch(c){throw Ge(e,c),c}}Yt(e)}function Ge(e,t){let a=e._controlledReadableStream;a._state==="readable"&&(Qe(e),Dr(e),Go(a,t))}function On(e){let t=e._controlledReadableStream._state;return t==="errored"?null:t==="closed"?0:e._strategyHWM-e._queueTotalSize}function Fs(e){return!Ho(e)}function Ct(e){let t=e._controlledReadableStream._state;return!e._closeRequested&&t==="readable"}function Vo(e,t,a,u,c,d,h){t._controlledReadableStream=e,t._queue=void 0,t._queueTotalSize=void 0,Qe(t),t._started=!1,t._closeRequested=!1,t._pullAgain=!1,t._pulling=!1,t._strategySizeAlgorithm=h,t._strategyHWM=d,t._pullAlgorithm=u,t._cancelAlgorithm=c,e._readableStreamController=t;let R=a();A(_(R),()=>{t._started=!0,Yt(t)},P=>{Ge(t,P)})}function Bs(e,t,a,u){let c=Object.create(vt.prototype),d=()=>{},h=()=>_(void 0),R=()=>_(void 0);t.start!==void 0&&(d=()=>t.start(c)),t.pull!==void 0&&(h=()=>t.pull(c)),t.cancel!==void 0&&(R=P=>t.cancel(P)),Vo(e,c,d,h,R,a,u)}function kr(e){return new TypeError(`ReadableStreamDefaultController.prototype.${e} can only be used on a ReadableStreamDefaultController`)}function Ds(e,t){return at(e._readableStreamController)?ks(e):Ws(e)}function Ws(e,t){let a=Te(e),u=!1,c=!1,d=!1,h=!1,R,P,B,D,W,j=T(J=>{W=J});function Se(){return u?(c=!0,_(void 0)):(u=!0,It(a,{_chunkSteps:ne=>{C(()=>{c=!1;let he=ne,qe=ne;d||Wr(B._readableStreamController,he),h||Wr(D._readableStreamController,qe),u=!1,c&&Se()})},_closeSteps:()=>{u=!1,d||Qt(B._readableStreamController),h||Qt(D._readableStreamController),(!d||!h)&&W(void 0)},_errorSteps:()=>{u=!1}}),_(void 0))}function At(J){if(d=!0,R=J,h){let ne=zt([R,P]),he=ge(e,ne);W(he)}return j}function Xe(J){if(h=!0,P=J,d){let ne=zt([R,P]),he=ge(e,ne);W(he)}return j}function Le(){}return B=Fn(Le,Se,At),D=Fn(Le,Se,Xe),S(a._closedPromise,J=>{Ge(B._readableStreamController,J),Ge(D._readableStreamController,J),(!d||!h)&&W(void 0)}),[B,D]}function ks(e){let t=Te(e),a=!1,u=!1,c=!1,d=!1,h=!1,R,P,B,D,W,j=T(E=>{W=E});function Se(E){S(E._closedPromise,F=>{E===t&&(ye(B._readableStreamController,F),ye(D._readableStreamController,F),(!d||!h)&&W(void 0))})}function At(){st(t)&&(ee(t),t=Te(e),Se(t)),It(t,{_chunkSteps:F=>{C(()=>{u=!1,c=!1;let I=F,le=F;if(!d&&!h)try{le=ho(F)}catch(Pt){ye(B._readableStreamController,Pt),ye(D._readableStreamController,Pt),W(ge(e,Pt));return}d||gr(B._readableStreamController,I),h||gr(D._readableStreamController,le),a=!1,u?Le():c&&J()})},_closeSteps:()=>{a=!1,d||Mt(B._readableStreamController),h||Mt(D._readableStreamController),B._readableStreamController._pendingPullIntos.length>0&&Sr(B._readableStreamController,0),D._readableStreamController._pendingPullIntos.length>0&&Sr(D._readableStreamController,0),(!d||!h)&&W(void 0)},_errorSteps:()=>{a=!1}})}function Xe(E,F){Ye(t)&&(ee(t),t=To(e),Se(t));let I=F?D:B,le=F?B:D;Co(t,E,{_chunkSteps:Ot=>{C(()=>{u=!1,c=!1;let Ft=F?h:d;if(F?d:h)Ft||_r(I._readableStreamController,Ot);else{let ua;try{ua=ho(Ot)}catch(Dn){ye(I._readableStreamController,Dn),ye(le._readableStreamController,Dn),W(ge(e,Dn));return}Ft||_r(I._readableStreamController,Ot),gr(le._readableStreamController,ua)}a=!1,u?Le():c&&J()})},_closeSteps:Ot=>{a=!1;let Ft=F?h:d,jr=F?d:h;Ft||Mt(I._readableStreamController),jr||Mt(le._readableStreamController),Ot!==void 0&&(Ft||_r(I._readableStreamController,Ot),!jr&&le._readableStreamController._pendingPullIntos.length>0&&Sr(le._readableStreamController,0)),(!Ft||!jr)&&W(void 0)},_errorSteps:()=>{a=!1}})}function Le(){if(a)return u=!0,_(void 0);a=!0;let E=bn(B._readableStreamController);return E===null?At():Xe(E._view,!1),_(void 0)}function J(){if(a)return c=!0,_(void 0);a=!0;let E=bn(D._readableStreamController);return E===null?At():Xe(E._view,!0),_(void 0)}function ne(E){if(d=!0,R=E,h){let F=zt([R,P]),I=ge(e,F);W(I)}return j}function he(E){if(h=!0,P=E,d){let F=zt([R,P]),I=ge(e,F);W(I)}return j}function qe(){}return B=Qo(qe,Le,ne),D=Qo(qe,J,he),Se(t),[B,D]}function Ls(e,t){be(e,t);let a=e,u=a?.autoAllocateChunkSize,c=a?.cancel,d=a?.pull,h=a?.start,R=a?.type;return{autoAllocateChunkSize:u===void 0?void 0:pe(u,`${t} has member 'autoAllocateChunkSize' that`),cancel:c===void 0?void 0:qs(c,a,`${t} has member 'cancel' that`),pull:d===void 0?void 0:Is(d,a,`${t} has member 'pull' that`),start:h===void 0?void 0:zs(h,a,`${t} has member 'start' that`),type:R===void 0?void 0:xs(R,`${t} has member 'type' that`)}}function qs(e,t,a){return x(e,a),u=>O(e,t,[u])}function Is(e,t,a){return x(e,a),u=>O(e,t,[u])}function zs(e,t,a){return x(e,a),u=>L(e,t,[u])}function xs(e,t){if(e=`${e}`,e!=="bytes")throw new TypeError(`${t} '${e}' is not a valid enumeration value for ReadableStreamType`);return e}function Ms(e,t){be(e,t);let a=e?.mode;return{mode:a===void 0?void 0:Us(a,`${t} has member 'mode' that`)}}function Us(e,t){if(e=`${e}`,e!=="byob")throw new TypeError(`${t} '${e}' is not a valid enumeration value for ReadableStreamReaderMode`);return e}function $s(e,t){return be(e,t),{preventCancel:!!e?.preventCancel}}function Yo(e,t){be(e,t);let a=e?.preventAbort,u=e?.preventCancel,c=e?.preventClose,d=e?.signal;return d!==void 0&&js(d,`${t} has member 'signal' that`),{preventAbort:!!a,preventCancel:!!u,preventClose:!!c,signal:d}}function js(e,t){if(!ts(e))throw new TypeError(`${t} is not an AbortSignal.`)}function Ns(e,t){be(e,t);let a=e?.readable;We(a,"readable","ReadableWritablePair"),re(a,`${t} has member 'readable' that`);let u=e?.writable;return We(u,"writable","ReadableWritablePair"),Ao(u,`${t} has member 'writable' that`),{readable:a,writable:u}}class Ke{constructor(t={},a={}){t===void 0?t=null:Z(t,"First parameter");let u=Tr(a,"Second parameter"),c=Ls(t,"First parameter");if(Bn(this),c.type==="bytes"){if(u.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");let d=jt(u,0);Vi(this,c,d)}else{let d=Rr(u),h=jt(u,1);Bs(this,c,h,d)}}get locked(){if(!Ze(this))throw ft("locked");return Je(this)}cancel(t=void 0){return Ze(this)?Je(this)?y(new TypeError("Cannot cancel a stream that already has a reader")):ge(this,t):y(ft("cancel"))}getReader(t=void 0){if(!Ze(this))throw ft("getReader");return Ms(t,"First parameter").mode===void 0?Te(this):To(this)}pipeThrough(t,a={}){if(!Ze(this))throw ft("pipeThrough");U(t,1,"pipeThrough");let u=Ns(t,"First parameter"),c=Yo(a,"Second parameter");if(Je(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(Tt(u.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");let d=No(this,u.writable,c.preventClose,c.preventAbort,c.preventCancel,c.signal);return M(d),u.readable}pipeTo(t,a={}){if(!Ze(this))return y(ft("pipeTo"));if(t===void 0)return y("Parameter 1 is required in 'pipeTo'.");if(!Rt(t))return y(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let u;try{u=Yo(a,"Second parameter")}catch(c){return y(c)}return Je(this)?y(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):Tt(t)?y(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):No(this,t,u.preventClose,u.preventAbort,u.preventCancel,u.signal)}tee(){if(!Ze(this))throw ft("tee");let t=Ds(this);return zt(t)}values(t=void 0){if(!Ze(this))throw ft("values");let a=$s(t,"First parameter");return xi(this,a.preventCancel)}}Object.defineProperties(Ke.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Ke.prototype,r.toStringTag,{value:"ReadableStream",configurable:!0}),typeof r.asyncIterator=="symbol"&&Object.defineProperty(Ke.prototype,r.asyncIterator,{value:Ke.prototype.values,writable:!0,configurable:!0});function Fn(e,t,a,u=1,c=()=>1){let d=Object.create(Ke.prototype);Bn(d);let h=Object.create(vt.prototype);return Vo(d,h,e,t,a,u,c),d}function Qo(e,t,a){let u=Object.create(Ke.prototype);Bn(u);let c=Object.create(wt.prototype);return Ro(u,c,e,t,a,0,void 0),u}function Bn(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function Ze(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")?!1:e instanceof Ke}function Je(e){return e._reader!==void 0}function ge(e,t){if(e._disturbed=!0,e._state==="closed")return _(void 0);if(e._state==="errored")return y(e._storedError);Gt(e);let a=e._reader;a!==void 0&&st(a)&&(a._readIntoRequests.forEach(c=>{c._closeSteps(void 0)}),a._readIntoRequests=new V);let u=e._readableStreamController[ot](t);return k(u,o)}function Gt(e){e._state="closed";let t=e._reader;t!==void 0&&(qt(t),Ye(t)&&(t._readRequests.forEach(a=>{a._closeSteps()}),t._readRequests=new V))}function Go(e,t){e._state="errored",e._storedError=t;let a=e._reader;a!==void 0&&(Be(a,t),Ye(a)?(a._readRequests.forEach(u=>{u._errorSteps(t)}),a._readRequests=new V):(a._readIntoRequests.forEach(u=>{u._errorSteps(t)}),a._readIntoRequests=new V))}function ft(e){return new TypeError(`ReadableStream.prototype.${e} can only be used on a ReadableStream`)}function Ko(e,t){be(e,t);let a=e?.highWaterMark;return We(a,"highWaterMark","QueuingStrategyInit"),{highWaterMark:ke(a)}}let Zo=e=>e.byteLength;Object.defineProperty(Zo,"name",{value:"size",configurable:!0});class Lr{constructor(t){U(t,1,"ByteLengthQueuingStrategy"),t=Ko(t,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=t.highWaterMark}get highWaterMark(){if(!Xo(this))throw Jo("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!Xo(this))throw Jo("size");return Zo}}Object.defineProperties(Lr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Lr.prototype,r.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function Jo(e){return new TypeError(`ByteLengthQueuingStrategy.prototype.${e} can only be used on a ByteLengthQueuingStrategy`)}function Xo(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")?!1:e instanceof Lr}let ea=()=>1;Object.defineProperty(ea,"name",{value:"size",configurable:!0});class qr{constructor(t){U(t,1,"CountQueuingStrategy"),t=Ko(t,"First parameter"),this._countQueuingStrategyHighWaterMark=t.highWaterMark}get highWaterMark(){if(!ra(this))throw ta("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!ra(this))throw ta("size");return ea}}Object.defineProperties(qr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(qr.prototype,r.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function ta(e){return new TypeError(`CountQueuingStrategy.prototype.${e} can only be used on a CountQueuingStrategy`)}function ra(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")?!1:e instanceof qr}function Hs(e,t){be(e,t);let a=e?.flush,u=e?.readableType,c=e?.start,d=e?.transform,h=e?.writableType;return{flush:a===void 0?void 0:Vs(a,e,`${t} has member 'flush' that`),readableType:u,start:c===void 0?void 0:Ys(c,e,`${t} has member 'start' that`),transform:d===void 0?void 0:Qs(d,e,`${t} has member 'transform' that`),writableType:h}}function Vs(e,t,a){return x(e,a),u=>O(e,t,[u])}function Ys(e,t,a){return x(e,a),u=>L(e,t,[u])}function Qs(e,t,a){return x(e,a),(u,c)=>O(e,t,[u,c])}class Ir{constructor(t={},a={},u={}){t===void 0&&(t=null);let c=Tr(a,"Second parameter"),d=Tr(u,"Third parameter"),h=Hs(t,"First parameter");if(h.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(h.writableType!==void 0)throw new RangeError("Invalid writableType specified");let R=jt(d,0),P=Rr(d),B=jt(c,1),D=Rr(c),W,j=T(Se=>{W=Se});Gs(this,j,B,D,R,P),Zs(this,h),h.start!==void 0?W(h.start(this._transformStreamController)):W(void 0)}get readable(){if(!na(this))throw sa("readable");return this._readable}get writable(){if(!na(this))throw sa("writable");return this._writable}}Object.defineProperties(Ir.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Ir.prototype,r.toStringTag,{value:"TransformStream",configurable:!0});function Gs(e,t,a,u,c,d){function h(){return t}function R(j){return eu(e,j)}function P(j){return tu(e,j)}function B(){return ru(e)}e._writable=os(h,R,B,P,a,u);function D(){return nu(e)}function W(j){return xr(e,j),_(void 0)}e._readable=Fn(h,D,W,c,d),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,Mr(e,!0),e._transformStreamController=void 0}function na(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")?!1:e instanceof Ir}function zr(e,t){Ge(e._readable._readableStreamController,t),xr(e,t)}function xr(e,t){oa(e._transformStreamController),Tn(e._writable._writableStreamController,t),e._backpressure&&Mr(e,!1)}function Mr(e,t){e._backpressureChangePromise!==void 0&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=T(a=>{e._backpressureChangePromise_resolve=a}),e._backpressure=t}class Kt{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Ur(this))throw $r("desiredSize");let t=this._controlledTransformStream._readable._readableStreamController;return On(t)}enqueue(t=void 0){if(!Ur(this))throw $r("enqueue");aa(this,t)}error(t=void 0){if(!Ur(this))throw $r("error");Js(this,t)}terminate(){if(!Ur(this))throw $r("terminate");Xs(this)}}Object.defineProperties(Kt.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Kt.prototype,r.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function Ur(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")?!1:e instanceof Kt}function Ks(e,t,a,u){t._controlledTransformStream=e,e._transformStreamController=t,t._transformAlgorithm=a,t._flushAlgorithm=u}function Zs(e,t){let a=Object.create(Kt.prototype),u=d=>{try{return aa(a,d),_(void 0)}catch(h){return y(h)}},c=()=>_(void 0);t.transform!==void 0&&(u=d=>t.transform(d,a)),t.flush!==void 0&&(c=()=>t.flush(a)),Ks(e,a,u,c)}function oa(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0}function aa(e,t){let a=e._controlledTransformStream,u=a._readable._readableStreamController;if(!Ct(u))throw new TypeError("Readable side is not in a state that permits enqueue");try{Wr(u,t)}catch(d){throw xr(a,d),a._readable._storedError}Fs(u)!==a._backpressure&&Mr(a,!0)}function Js(e,t){zr(e._controlledTransformStream,t)}function ia(e,t){let a=e._transformAlgorithm(t);return k(a,void 0,u=>{throw zr(e._controlledTransformStream,u),u})}function Xs(e){let t=e._controlledTransformStream,a=t._readable._readableStreamController;Qt(a);let u=new TypeError("TransformStream terminated");xr(t,u)}function eu(e,t){let a=e._transformStreamController;if(e._backpressure){let u=e._backpressureChangePromise;return k(u,()=>{let c=e._writable;if(c._state==="erroring")throw c._storedError;return ia(a,t)})}return ia(a,t)}function tu(e,t){return zr(e,t),_(void 0)}function ru(e){let t=e._readable,a=e._transformStreamController,u=a._flushAlgorithm();return oa(a),k(u,()=>{if(t._state==="errored")throw t._storedError;Qt(t._readableStreamController)},c=>{throw zr(e,c),t._storedError})}function nu(e){return Mr(e,!1),e._backpressureChangePromise}function $r(e){return new TypeError(`TransformStreamDefaultController.prototype.${e} can only be used on a TransformStreamDefaultController`)}function sa(e){return new TypeError(`TransformStream.prototype.${e} can only be used on a TransformStream`)}n.ByteLengthQueuingStrategy=Lr,n.CountQueuingStrategy=qr,n.ReadableByteStreamController=wt,n.ReadableStream=Ke,n.ReadableStreamBYOBReader=$t,n.ReadableStreamBYOBRequest=xt,n.ReadableStreamDefaultController=vt,n.ReadableStreamDefaultReader=Ve,n.TransformStream=Ir,n.TransformStreamDefaultController=Kt,n.WritableStream=Nt,n.WritableStreamDefaultController=Et,n.WritableStreamDefaultWriter=Ht,Object.defineProperty(n,"__esModule",{value:!0})})});var Ka=et(()=>{if(!globalThis.ReadableStream)try{let n=require("node:process"),{emitWarning:r}=n;try{n.emitWarning=()=>{},Object.assign(globalThis,require("node:stream/web")),n.emitWarning=r}catch(o){throw n.emitWarning=r,o}}catch{Object.assign(globalThis,Ga())}try{let{Blob:n}=require("buffer");n&&!n.prototype.stream&&(n.prototype.stream=function(o){let i=0,s=this;return new ReadableStream({type:"bytes",async pull(l){let b=await s.slice(i,Math.min(s.size,i+65536)).arrayBuffer();i+=b.byteLength,l.enqueue(new Uint8Array(b)),i===s.size&&l.close()}})})}catch{}});async function*Hn(n,r=!0){for(let o of n)if("stream"in o)yield*o.stream();else if(ArrayBuffer.isView(o))if(r){let i=o.byteOffset,s=o.byteOffset+o.byteLength;for(;i!==s;){let l=Math.min(s-i,Za),f=o.buffer.slice(i,i+l);i+=f.byteLength,yield new Uint8Array(f)}}else yield o;else{let i=0,s=o;for(;i!==s.size;){let f=await s.slice(i,Math.min(s.size,i+Za)).arrayBuffer();i+=f.byteLength,yield new Uint8Array(f)}}}var Al,Za,Ja,Uu,xe,rr=Zt(()=>{Al=_e(Ka(),1);Za=65536;Ja=class Vn{#e=[];#t="";#r=0;#n="transparent";constructor(r=[],o={}){if(typeof r!="object"||r===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(typeof r[Symbol.iterator]!="function")throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof o!="object"&&typeof o!="function")throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");o===null&&(o={});let i=new TextEncoder;for(let l of r){let f;ArrayBuffer.isView(l)?f=new Uint8Array(l.buffer.slice(l.byteOffset,l.byteOffset+l.byteLength)):l instanceof ArrayBuffer?f=new Uint8Array(l.slice(0)):l instanceof Vn?f=l:f=i.encode(`${l}`);let b=ArrayBuffer.isView(f)?f.byteLength:f.size;b&&(this.#r+=b,this.#e.push(f))}this.#n=`${o.endings===void 0?"transparent":o.endings}`;let s=o.type===void 0?"":String(o.type);this.#t=/^[\x20-\x7E]*$/.test(s)?s:""}get size(){return this.#r}get type(){return this.#t}async text(){let r=new TextDecoder,o="";for await(let i of Hn(this.#e,!1))o+=r.decode(i,{stream:!0});return o+=r.decode(),o}async arrayBuffer(){let r=new Uint8Array(this.size),o=0;for await(let i of Hn(this.#e,!1))r.set(i,o),o+=i.length;return r.buffer}stream(){let r=Hn(this.#e,!0);return new globalThis.ReadableStream({type:"bytes",async pull(o){let i=await r.next();i.done?o.close():o.enqueue(i.value)},async cancel(){await r.return()}})}slice(r=0,o=this.size,i=""){let{size:s}=this,l=r<0?Math.max(s+r,0):Math.min(r,s),f=o<0?Math.max(s+o,0):Math.min(o,s),b=Math.max(f-l,0),p=this.#e,m=[],w=0;for(let _ of p){if(w>=b)break;let y=ArrayBuffer.isView(_)?_.byteLength:_.size;if(l&&y<=l)l-=y,f-=y;else{let g;ArrayBuffer.isView(_)?(g=_.subarray(l,Math.min(y,f)),w+=g.byteLength):(g=_.slice(l,Math.min(y,f)),w+=g.size),f-=y,m.push(g),l=0}}let T=new Vn([],{type:String(i).toLowerCase()});return T.#r=b,T.#e=m,T}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](r){return r&&typeof r=="object"&&typeof r.constructor=="function"&&(typeof r.stream=="function"||typeof r.arrayBuffer=="function")&&/^(Blob|File)$/.test(r[Symbol.toStringTag])}};Object.defineProperties(Ja.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});Uu=Ja,xe=Uu});var $u,ju,Bt,Yn=Zt(()=>{rr();$u=class extends xe{#e=0;#t="";constructor(r,o,i={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(r,i),i===null&&(i={});let s=i.lastModified===void 0?Date.now():Number(i.lastModified);Number.isNaN(s)||(this.#e=s),this.#t=String(o)}get name(){return this.#t}get lastModified(){return this.#e}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](r){return!!r&&r instanceof xe&&/^(File)$/.test(r[Symbol.toStringTag])}},ju=$u,Bt=ju});function ti(n,r=xe){var o=`${Xa()}${Xa()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),i=[],s=`--${o}\r
Content-Disposition: form-data; name="`;return n.forEach((l,f)=>typeof l=="string"?i.push(s+Qn(f)+`"\r
\r
${l.replace(/\r(?!\n)|(?<!\r)\n/g,`\r
`)}\r
`):i.push(s+Qn(f)+`"; filename="${Qn(l.name,1)}"\r
Content-Type: ${l.type||"application/octet-stream"}\r
\r
`,l,`\r
`)),i.push(`--${o}--`),new r(i,{type:"multipart/form-data; boundary="+o})}var nr,Nu,Hu,Xa,Vu,ei,Qn,ht,mt,Kr=Zt(()=>{rr();Yn();({toStringTag:nr,iterator:Nu,hasInstance:Hu}=Symbol),Xa=Math.random,Vu="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),ei=(n,r,o)=>(n+="",/^(Blob|File)$/.test(r&&r[nr])?[(o=o!==void 0?o+"":r[nr]=="File"?r.name:"blob",n),r.name!==o||r[nr]=="blob"?new Bt([r],o,r):r]:[n,r+""]),Qn=(n,r)=>(r?n:n.replace(/\r?\n|\r/g,`\r
`)).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),ht=(n,r,o)=>{if(r.length<o)throw new TypeError(`Failed to execute '${n}' on 'FormData': ${o} arguments required, but only ${r.length} present.`)},mt=class{#e=[];constructor(...r){if(r.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[nr](){return"FormData"}[Nu](){return this.entries()}static[Hu](r){return r&&typeof r=="object"&&r[nr]==="FormData"&&!Vu.some(o=>typeof r[o]!="function")}append(...r){ht("append",arguments,2),this.#e.push(ei(...r))}delete(r){ht("delete",arguments,1),r+="",this.#e=this.#e.filter(([o])=>o!==r)}get(r){ht("get",arguments,1),r+="";for(var o=this.#e,i=o.length,s=0;s<i;s++)if(o[s][0]===r)return o[s][1];return null}getAll(r,o){return ht("getAll",arguments,1),o=[],r+="",this.#e.forEach(i=>i[0]===r&&o.push(i[1])),o}has(r){return ht("has",arguments,1),r+="",this.#e.some(o=>o[0]===r)}forEach(r,o){ht("forEach",arguments,1);for(var[i,s]of this)r.call(o,s,i,this)}set(...r){ht("set",arguments,2);var o=[],i=!0;r=ei(...r),this.#e.forEach(s=>{s[0]===r[0]?i&&(i=!o.push(r)):o.push(s)}),i&&o.push(r),this.#e=o}*entries(){yield*this.#e}*keys(){for(var[r]of this)yield r}*values(){for(var[,r]of this)yield r}}});var ai=et((Ml,oi)=>{if(!globalThis.DOMException)try{let{MessageChannel:n}=require("worker_threads"),r=new n().port1,o=new ArrayBuffer;r.postMessage(o,[o,o])}catch(n){n.constructor.name==="DOMException"&&(globalThis.DOMException=n.constructor)}oi.exports=globalThis.DOMException});var ar,ii,Yu,Jr,Kn=Zt(()=>{ar=require("node:fs"),ii=_e(ai(),1);Yn();rr();({stat:Yu}=ar.promises),Jr=class{#e;#t;constructor(r){this.#e=r.path,this.#t=r.start,this.size=r.size,this.lastModified=r.lastModified,this.originalSize=r.originalSize===void 0?r.size:r.originalSize}slice(r,o){return new Jr({path:this.#e,lastModified:this.lastModified,originalSize:this.originalSize,size:o-r,start:this.#t+r})}async*stream(){let{mtimeMs:r,size:o}=await Yu(this.#e);if(r>this.lastModified||this.originalSize!==o)throw new ii.default("The requested file could not be read, typically due to permission problems that have occurred after a reference to a file was acquired.","NotReadableError");yield*(0,ar.createReadStream)(this.#e,{start:this.#t,end:this.#t+this.size-1})}get[Symbol.toStringTag](){return"Blob"}}});var ui={};la(ui,{toFormData:()=>el});function Xu(n){let r=n.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!r)return;let o=r[2]||r[3]||"",i=o.slice(o.lastIndexOf("\\")+1);return i=i.replace(/%22/g,'"'),i=i.replace(/&#(\d{4});/g,(s,l)=>String.fromCharCode(l)),i}async function el(n,r){if(!/multipart/i.test(r))throw new TypeError("Failed to fetch");let o=r.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!o)throw new TypeError("no or bad content-type header, no multipart boundary");let i=new Zn(o[1]||o[2]),s,l,f,b,p,m,w=[],T=new mt,_=S=>{f+=v.decode(S,{stream:!0})},y=S=>{w.push(S)},g=()=>{let S=new Bt(w,m,{type:p});T.append(b,S)},A=()=>{T.append(b,f)},v=new TextDecoder("utf-8");v.decode(),i.onPartBegin=function(){i.onPartData=_,i.onPartEnd=A,s="",l="",f="",b="",p="",m=null,w.length=0},i.onHeaderField=function(S){s+=v.decode(S,{stream:!0})},i.onHeaderValue=function(S){l+=v.decode(S,{stream:!0})},i.onHeaderEnd=function(){if(l+=v.decode(),s=s.toLowerCase(),s==="content-disposition"){let S=l.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);S&&(b=S[2]||S[3]||""),m=Xu(l),m&&(i.onPartData=y,i.onPartEnd=g)}else s==="content-type"&&(p=l);l="",s=""};for await(let S of n)i.write(S);return i.end(),T}var Ae,z,si,tt,Xr,en,Qu,ir,Gu,Ku,Zu,Ju,bt,Zn,li=Zt(()=>{Kn();Kr();Ae=0,z={START_BOUNDARY:Ae++,HEADER_FIELD_START:Ae++,HEADER_FIELD:Ae++,HEADER_VALUE_START:Ae++,HEADER_VALUE:Ae++,HEADER_VALUE_ALMOST_DONE:Ae++,HEADERS_ALMOST_DONE:Ae++,PART_DATA_START:Ae++,PART_DATA:Ae++,END:Ae++},si=1,tt={PART_BOUNDARY:si,LAST_BOUNDARY:si*=2},Xr=10,en=13,Qu=32,ir=45,Gu=58,Ku=97,Zu=122,Ju=n=>n|32,bt=()=>{},Zn=class{constructor(r){this.index=0,this.flags=0,this.onHeaderEnd=bt,this.onHeaderField=bt,this.onHeadersEnd=bt,this.onHeaderValue=bt,this.onPartBegin=bt,this.onPartData=bt,this.onPartEnd=bt,this.boundaryChars={},r=`\r
--`+r;let o=new Uint8Array(r.length);for(let i=0;i<r.length;i++)o[i]=r.charCodeAt(i),this.boundaryChars[o[i]]=!0;this.boundary=o,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=z.START_BOUNDARY}write(r){let o=0,i=r.length,s=this.index,{lookbehind:l,boundary:f,boundaryChars:b,index:p,state:m,flags:w}=this,T=this.boundary.length,_=T-1,y=r.length,g,A,v=C=>{this[C+"Mark"]=o},S=C=>{delete this[C+"Mark"]},k=(C,L,O,Q)=>{(L===void 0||L!==O)&&this[C](Q&&Q.subarray(L,O))},M=(C,L)=>{let O=C+"Mark";O in this&&(L?(k(C,this[O],o,r),delete this[O]):(k(C,this[O],r.length,r),this[O]=0))};for(o=0;o<i;o++)switch(g=r[o],m){case z.START_BOUNDARY:if(p===f.length-2){if(g===ir)w|=tt.LAST_BOUNDARY;else if(g!==en)return;p++;break}else if(p-1===f.length-2){if(w&tt.LAST_BOUNDARY&&g===ir)m=z.END,w=0;else if(!(w&tt.LAST_BOUNDARY)&&g===Xr)p=0,k("onPartBegin"),m=z.HEADER_FIELD_START;else return;break}g!==f[p+2]&&(p=-2),g===f[p+2]&&p++;break;case z.HEADER_FIELD_START:m=z.HEADER_FIELD,v("onHeaderField"),p=0;case z.HEADER_FIELD:if(g===en){S("onHeaderField"),m=z.HEADERS_ALMOST_DONE;break}if(p++,g===ir)break;if(g===Gu){if(p===1)return;M("onHeaderField",!0),m=z.HEADER_VALUE_START;break}if(A=Ju(g),A<Ku||A>Zu)return;break;case z.HEADER_VALUE_START:if(g===Qu)break;v("onHeaderValue"),m=z.HEADER_VALUE;case z.HEADER_VALUE:g===en&&(M("onHeaderValue",!0),k("onHeaderEnd"),m=z.HEADER_VALUE_ALMOST_DONE);break;case z.HEADER_VALUE_ALMOST_DONE:if(g!==Xr)return;m=z.HEADER_FIELD_START;break;case z.HEADERS_ALMOST_DONE:if(g!==Xr)return;k("onHeadersEnd"),m=z.PART_DATA_START;break;case z.PART_DATA_START:m=z.PART_DATA,v("onPartData");case z.PART_DATA:if(s=p,p===0){for(o+=_;o<y&&!(r[o]in b);)o+=T;o-=_,g=r[o]}if(p<f.length)f[p]===g?(p===0&&M("onPartData",!0),p++):p=0;else if(p===f.length)p++,g===en?w|=tt.PART_BOUNDARY:g===ir?w|=tt.LAST_BOUNDARY:p=0;else if(p-1===f.length)if(w&tt.PART_BOUNDARY){if(p=0,g===Xr){w&=~tt.PART_BOUNDARY,k("onPartEnd"),k("onPartBegin"),m=z.HEADER_FIELD_START;break}}else w&tt.LAST_BOUNDARY&&g===ir?(k("onPartEnd"),m=z.END,w=0):p=0;if(p>0)l[p-1]=g;else if(s>0){let C=new Uint8Array(l.buffer,l.byteOffset,l.byteLength);k("onPartData",0,s,C),s=0,v("onPartData"),o--}break;case z.END:break;default:throw new Error(`Unexpected state entered: ${m}`)}M("onHeaderField"),M("onHeaderValue"),M("onPartData"),this.index=p,this.state=m,this.flags=w}end(){if(this.state===z.HEADER_FIELD_START&&this.index===0||this.state===z.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==z.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}}});var hl={};la(hl,{default:()=>zi});module.exports=lu(hl);var no=require("@raycast/api");var Di=_e(Hr());var Fi=require("react");var q=require("react");function Da(n,r,o,i){function s(l){return l instanceof o?l:new o(function(f){f(l)})}return new(o||(o=Promise))(function(l,f){function b(w){try{m(i.next(w))}catch(T){f(T)}}function p(w){try{m(i.throw(w))}catch(T){f(T)}}function m(w){w.done?l(w.value):s(w.value).then(b,p)}m((i=i.apply(n,r||[])).next())})}function Wa(n,r){var o={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,s,l,f;return f={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function b(m){return function(w){return p([m,w])}}function p(m){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,s&&(l=m[0]&2?s.return:m[0]?s.throw||((l=s.return)&&l.call(s),0):s.next)&&!(l=l.call(s,m[1])).done)return l;switch(s=0,l&&(m=[m[0]&2,l.value]),m[0]){case 0:case 1:l=m;break;case 4:return o.label++,{value:m[1],done:!1};case 5:o.label++,s=m[1],m=[0];continue;case 7:m=o.ops.pop(),o.trys.pop();continue;default:if(l=o.trys,!(l=l.length>0&&l[l.length-1])&&(m[0]===6||m[0]===2)){o=0;continue}if(m[0]===3&&(!l||m[1]>l[0]&&m[1]<l[3])){o.label=m[1];break}if(m[0]===6&&o.label<l[1]){o.label=l[1],l=m;break}if(l&&o.label<l[2]){o.label=l[2],o.ops.push(m);break}l[2]&&o.ops.pop(),o.trys.pop();continue}m=r.call(n,o)}catch(w){m=[6,w],s=0}finally{i=l=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}}var Ce=function(){},G=Ce(),Jt=Object,X=function(n){return n===G},dt=function(n){return typeof n=="function"},ze=function(n,r){return Jt.assign({},n,r)},$n="undefined",jn=function(){return typeof window!=$n},Su=function(){return typeof document!=$n},_u=function(){return jn()&&typeof window.requestAnimationFrame!=$n},Vr=new WeakMap,wu=0,tr=function(n){var r=typeof n,o=n&&n.constructor,i=o==Date,s,l;if(Jt(n)===n&&!i&&o!=RegExp){if(s=Vr.get(n),s)return s;if(s=++wu+"~",Vr.set(n,s),o==Array){for(s="@",l=0;l<n.length;l++)s+=tr(n[l])+",";Vr.set(n,s)}if(o==Jt){s="#";for(var f=Jt.keys(n).sort();!X(l=f.pop());)X(n[l])||(s+=l+":"+tr(n[l])+",");Vr.set(n,s)}}else s=i?n.toJSON():r=="symbol"?n.toString():r=="string"?JSON.stringify(n):""+n;return s},In=!0,Ru=function(){return In},ka=jn(),Nn=Su(),zn=ka&&window.addEventListener?window.addEventListener.bind(window):Ce,Tu=Nn?document.addEventListener.bind(document):Ce,xn=ka&&window.removeEventListener?window.removeEventListener.bind(window):Ce,Eu=Nn?document.removeEventListener.bind(document):Ce,vu=function(){var n=Nn&&document.visibilityState;return X(n)||n!=="hidden"},Cu=function(n){return Tu("visibilitychange",n),zn("focus",n),function(){Eu("visibilitychange",n),xn("focus",n)}},Au=function(n){var r=function(){In=!0,n()},o=function(){In=!1};return zn("online",r),zn("offline",o),function(){xn("online",r),xn("offline",o)}},Pu={isOnline:Ru,isVisible:vu},Ou={initFocus:Cu,initReconnect:Au},Yr=!jn()||"Deno"in window,Fu=function(n){return _u()?window.requestAnimationFrame(n):setTimeout(n,1)},Xt=Yr?q.useEffect:q.useLayoutEffect,Ln=typeof navigator<"u"&&navigator.connection,Oa=!Yr&&Ln&&(["slow-2g","2g"].includes(Ln.effectiveType)||Ln.saveData),La=function(n){if(dt(n))try{n=n()}catch{n=""}var r=[].concat(n);n=typeof n=="string"?n:(Array.isArray(n)?n.length:n)?tr(n):"";var o=n?"$swr$"+n:"";return[n,r,o]},ct=new WeakMap,qa=0,Ia=1,za=2,er=function(n,r,o,i,s,l,f){f===void 0&&(f=!0);var b=ct.get(n),p=b[0],m=b[1],w=b[3],T=p[r],_=m[r];if(f&&_)for(var y=0;y<_.length;++y)_[y](o,i,s);return l&&(delete w[r],T&&T[0])?T[0](za).then(function(){return n.get(r)}):n.get(r)},Bu=0,Mn=function(){return++Bu},xa=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return Da(void 0,void 0,void 0,function(){var o,i,s,l,f,b,p,m,w,T,_,y,g,A,v,S,k,M,C,L;return Wa(this,function(O){switch(O.label){case 0:if(o=n[0],i=n[1],s=n[2],l=n[3],f=typeof l=="boolean"?{revalidate:l}:l||{},b=X(f.populateCache)?!0:f.populateCache,p=f.revalidate!==!1,m=f.rollbackOnError!==!1,w=f.optimisticData,T=La(i),_=T[0],y=T[2],!_)return[2];if(g=ct.get(o),A=g[2],n.length<3)return[2,er(o,_,o.get(_),G,G,p,!0)];if(v=s,k=Mn(),A[_]=[k,0],M=!X(w),C=o.get(_),M&&(o.set(_,w),er(o,_,w)),dt(v))try{v=v(o.get(_))}catch(Q){S=Q}return v&&dt(v.then)?[4,v.catch(function(Q){S=Q})]:[3,2];case 1:if(v=O.sent(),k!==A[_][0]){if(S)throw S;return[2,v]}else S&&M&&m&&(b=!0,v=C,o.set(_,C));O.label=2;case 2:return b&&(S||(dt(b)&&(v=b(v,C)),o.set(_,v)),o.set(y,ze(o.get(y),{error:S}))),A[_][1]=Mn(),[4,er(o,_,v,S,G,p,!!b)];case 3:if(L=O.sent(),S)throw S;return[2,b?L:v]}})})},Fa=function(n,r){for(var o in n)n[o][0]&&n[o][0](r)},Ma=function(n,r){if(!ct.has(n)){var o=ze(Ou,r),i={},s=xa.bind(G,n),l=Ce;if(ct.set(n,[i,{},{},{},s]),!Yr){var f=o.initFocus(setTimeout.bind(G,Fa.bind(G,i,qa))),b=o.initReconnect(setTimeout.bind(G,Fa.bind(G,i,Ia)));l=function(){f&&f(),b&&b(),ct.delete(n)}}return[n,s,l]}return[n,ct.get(n)[4]]},Du=function(n,r,o,i,s){var l=o.errorRetryCount,f=s.retryCount,b=~~((Math.random()+.5)*(1<<(f<8?f:8)))*o.errorRetryInterval;!X(l)&&f>l||setTimeout(i,b,s)},Ua=Ma(new Map),$a=Ua[0],Wu=Ua[1],ja=ze({onLoadingSlow:Ce,onSuccess:Ce,onError:Ce,onErrorRetry:Du,onDiscarded:Ce,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:Oa?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:Oa?5e3:3e3,compare:function(n,r){return tr(n)==tr(r)},isPaused:function(){return!1},cache:$a,mutate:Wu,fallback:{}},Pu),Na=function(n,r){var o=ze(n,r);if(r){var i=n.use,s=n.fallback,l=r.use,f=r.fallback;i&&l&&(o.use=i.concat(l)),s&&f&&(o.fallback=ze(s,f))}return o},Un=(0,q.createContext)({}),ku=function(n){var r=n.value,o=Na((0,q.useContext)(Un),r),i=r&&r.provider,s=(0,q.useState)(function(){return i?Ma(i(o.cache||$a),r):G})[0];return s&&(o.cache=s[0],o.mutate=s[1]),Xt(function(){return s?s[2]:G},[]),(0,q.createElement)(Un.Provider,ze(n,{value:o}))},Lu=function(n,r){var o=(0,q.useState)({})[1],i=(0,q.useRef)(n),s=(0,q.useRef)({data:!1,error:!1,isValidating:!1}),l=(0,q.useCallback)(function(f){var b=!1,p=i.current;for(var m in f){var w=m;p[w]!==f[w]&&(p[w]=f[w],s.current[w]&&(b=!0))}b&&!r.current&&o({})},[]);return Xt(function(){i.current=n}),[i,s.current,l]},qu=function(n){return dt(n[1])?[n[0],n[1],n[2]||{}]:[n[0],null,(n[1]===null?n[2]:n[1])||{}]},Iu=function(){return ze(ja,(0,q.useContext)(Un))},zu=function(n){return function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];var s=Iu(),l=qu(o),f=l[0],b=l[1],p=l[2],m=Na(s,p),w=n,T=m.use;if(T)for(var _=T.length;_-- >0;)w=T[_](w);return w(f,b||m.fetcher,m)}},Ba=function(n,r,o){var i=r[n]||(r[n]=[]);return i.push(o),function(){var s=i.indexOf(o);s>=0&&(i[s]=i[i.length-1],i.pop())}},qn={dedupe:!0},xu=function(n,r,o){var i=o.cache,s=o.compare,l=o.fallbackData,f=o.suspense,b=o.revalidateOnMount,p=o.refreshInterval,m=o.refreshWhenHidden,w=o.refreshWhenOffline,T=ct.get(i),_=T[0],y=T[1],g=T[2],A=T[3],v=La(n),S=v[0],k=v[1],M=v[2],C=(0,q.useRef)(!1),L=(0,q.useRef)(!1),O=(0,q.useRef)(S),Q=(0,q.useRef)(r),V=(0,q.useRef)(o),N=function(){return V.current},nt=function(){return N().isVisible()&&N().isOnline()},ee=function(x){return i.set(M,ze(i.get(M),x))},Fe=i.get(S),Lt=X(l)?o.fallback[S]:l,de=X(Fe)?Lt:Fe,fr=i.get(M)||{},Be=fr.error,cr=!C.current,qt=function(){return cr&&!X(b)?b:N().isPaused()?!1:f?!X(de):X(de)||o.revalidateIfStale},dr=function(){return!S||!r?!1:fr.isValidating?!0:cr&&qt()},gt=dr(),ot=Lu({data:de,error:Be,isValidating:gt},L),Re=ot[0],St=ot[1],_t=ot[2],De=(0,q.useCallback)(function(x){return Da(void 0,void 0,void 0,function(){var te,Z,U,We,ke,ue,Y,pe,re,Te,je,Ee,Ne;return Wa(this,function(He){switch(He.label){case 0:if(te=Q.current,!S||!te||L.current||N().isPaused())return[2,!1];We=!0,ke=x||{},ue=!A[S]||!ke.dedupe,Y=function(){return!L.current&&S===O.current&&C.current},pe=function(){var Ve=A[S];Ve&&Ve[1]===U&&delete A[S]},re={isValidating:!1},Te=function(){ee({isValidating:!1}),Y()&&_t(re)},ee({isValidating:!0}),_t({isValidating:!0}),He.label=1;case 1:return He.trys.push([1,3,,4]),ue&&(er(i,S,Re.current.data,Re.current.error,!0),o.loadingTimeout&&!i.get(S)&&setTimeout(function(){We&&Y()&&N().onLoadingSlow(S,o)},o.loadingTimeout),A[S]=[te.apply(void 0,k),Mn()]),Ne=A[S],Z=Ne[0],U=Ne[1],[4,Z];case 2:return Z=He.sent(),ue&&setTimeout(pe,o.dedupingInterval),!A[S]||A[S][1]!==U?(ue&&Y()&&N().onDiscarded(S),[2,!1]):(ee({error:G}),re.error=G,je=g[S],!X(je)&&(U<=je[0]||U<=je[1]||je[1]===0)?(Te(),ue&&Y()&&N().onDiscarded(S),[2,!1]):(s(Re.current.data,Z)?re.data=Re.current.data:re.data=Z,s(i.get(S),Z)||i.set(S,Z),ue&&Y()&&N().onSuccess(Z,S,o),[3,4]));case 3:return Ee=He.sent(),pe(),N().isPaused()||(ee({error:Ee}),re.error=Ee,ue&&Y()&&(N().onError(Ee,S,o),(typeof o.shouldRetryOnError=="boolean"&&o.shouldRetryOnError||dt(o.shouldRetryOnError)&&o.shouldRetryOnError(Ee))&&nt()&&N().onErrorRetry(Ee,S,o,De,{retryCount:(ke.retryCount||0)+1,dedupe:!0}))),[3,4];case 4:return We=!1,Te(),Y()&&ue&&er(i,S,re.data,re.error,!1),[2,!0]}})})},[S]),be=(0,q.useCallback)(xa.bind(G,i,function(){return O.current}),[]);if(Xt(function(){Q.current=r,V.current=o}),Xt(function(){if(S){var x=S!==O.current,te=De.bind(G,qn),Z=function(Y,pe,re){_t(ze({error:pe,isValidating:re},s(Re.current.data,Y)?G:{data:Y}))},U=0,We=function(Y){if(Y==qa){var pe=Date.now();N().revalidateOnFocus&&pe>U&&nt()&&(U=pe+N().focusThrottleInterval,te())}else if(Y==Ia)N().revalidateOnReconnect&&nt()&&te();else if(Y==za)return De()},ke=Ba(S,y,Z),ue=Ba(S,_,We);return L.current=!1,O.current=S,C.current=!0,x&&_t({data:de,error:Be,isValidating:gt}),qt()&&(X(de)||Yr?te():Fu(te)),function(){L.current=!0,ke(),ue()}}},[S,De]),Xt(function(){var x;function te(){var U=dt(p)?p(de):p;U&&x!==-1&&(x=setTimeout(Z,U))}function Z(){!Re.current.error&&(m||N().isVisible())&&(w||N().isOnline())?De(qn).then(te):te()}return te(),function(){x&&(clearTimeout(x),x=-1)}},[p,m,w,De]),(0,q.useDebugValue)(de),f&&X(de)&&S)throw Q.current=r,V.current=o,L.current=!1,X(Be)?De(qn):Be;return{mutate:be,get data(){return St.data=!0,de},get error(){return St.error=!0,Be},get isValidating(){return St.isValidating=!0,gt}}},wl=Jt.defineProperty(ku,"default",{value:ja});var Ha=zu(xu);var Va=require("@raycast/api"),Qr=()=>(0,Va.getPreferenceValues)();var Ei=_e(require("node:http"),1),vi=_e(require("node:https"),1),pt=_e(require("node:zlib"),1),ce=_e(require("node:stream"),1),ur=require("node:buffer");function Mu(n){if(!/^data:/i.test(n))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');n=n.replace(/\r?\n/g,"");let r=n.indexOf(",");if(r===-1||r<=4)throw new TypeError("malformed data: URI");let o=n.substring(5,r).split(";"),i="",s=!1,l=o[0]||"text/plain",f=l;for(let w=1;w<o.length;w++)o[w]==="base64"?s=!0:(f+=`;${o[w]}`,o[w].indexOf("charset=")===0&&(i=o[w].substring(8)));!o[0]&&!i.length&&(f+=";charset=US-ASCII",i="US-ASCII");let b=s?"base64":"ascii",p=unescape(n.substring(r+1)),m=Buffer.from(p,b);return m.type=l,m.typeFull=f,m.charset=i,m}var Ya=Mu;var me=_e(require("node:stream"),1),Ue=require("node:util"),fe=require("node:buffer");rr();Kr();var Me=class extends Error{constructor(r,o){super(r),Error.captureStackTrace(this,this.constructor),this.type=o}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};var ae=class extends Me{constructor(r,o,i){super(r,o),i&&(this.code=this.errno=i.code,this.erroredSysCall=i.syscall)}};var Zr=Symbol.toStringTag,Gn=n=>typeof n=="object"&&typeof n.append=="function"&&typeof n.delete=="function"&&typeof n.get=="function"&&typeof n.getAll=="function"&&typeof n.has=="function"&&typeof n.set=="function"&&typeof n.sort=="function"&&n[Zr]==="URLSearchParams",or=n=>n&&typeof n=="object"&&typeof n.arrayBuffer=="function"&&typeof n.type=="string"&&typeof n.stream=="function"&&typeof n.constructor=="function"&&/^(Blob|File)$/.test(n[Zr]),ri=n=>typeof n=="object"&&(n[Zr]==="AbortSignal"||n[Zr]==="EventTarget"),ni=(n,r)=>{let o=new URL(r).hostname,i=new URL(n).hostname;return o===i||o.endsWith(`.${i}`)};var tl=(0,Ue.promisify)(me.default.pipeline),ie=Symbol("Body internals"),Pe=class{constructor(r,{size:o=0}={}){let i=null;r===null?r=null:Gn(r)?r=fe.Buffer.from(r.toString()):or(r)||fe.Buffer.isBuffer(r)||(Ue.types.isAnyArrayBuffer(r)?r=fe.Buffer.from(r):ArrayBuffer.isView(r)?r=fe.Buffer.from(r.buffer,r.byteOffset,r.byteLength):r instanceof me.default||(r instanceof mt?(r=ti(r),i=r.type.split("=")[1]):r=fe.Buffer.from(String(r))));let s=r;fe.Buffer.isBuffer(r)?s=me.default.Readable.from(r):or(r)&&(s=me.default.Readable.from(r.stream())),this[ie]={body:r,stream:s,boundary:i,disturbed:!1,error:null},this.size=o,r instanceof me.default&&r.on("error",l=>{let f=l instanceof Me?l:new ae(`Invalid response body while trying to fetch ${this.url}: ${l.message}`,"system",l);this[ie].error=f})}get body(){return this[ie].stream}get bodyUsed(){return this[ie].disturbed}async arrayBuffer(){let{buffer:r,byteOffset:o,byteLength:i}=await Jn(this);return r.slice(o,o+i)}async formData(){let r=this.headers.get("content-type");if(r.startsWith("application/x-www-form-urlencoded")){let i=new mt,s=new URLSearchParams(await this.text());for(let[l,f]of s)i.append(l,f);return i}let{toFormData:o}=await Promise.resolve().then(()=>(li(),ui));return o(this.body,r)}async blob(){let r=this.headers&&this.headers.get("content-type")||this[ie].body&&this[ie].body.type||"",o=await this.arrayBuffer();return new xe([o],{type:r})}async json(){let r=await this.text();return JSON.parse(r)}async text(){let r=await Jn(this);return new TextDecoder().decode(r)}buffer(){return Jn(this)}};Pe.prototype.buffer=(0,Ue.deprecate)(Pe.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer");Object.defineProperties(Pe.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:(0,Ue.deprecate)(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});async function Jn(n){if(n[ie].disturbed)throw new TypeError(`body used already for: ${n.url}`);if(n[ie].disturbed=!0,n[ie].error)throw n[ie].error;let{body:r}=n;if(r===null)return fe.Buffer.alloc(0);if(!(r instanceof me.default))return fe.Buffer.alloc(0);let o=[],i=0;try{for await(let s of r){if(n.size>0&&i+s.length>n.size){let l=new ae(`content size at ${n.url} over limit: ${n.size}`,"max-size");throw r.destroy(l),l}i+=s.length,o.push(s)}}catch(s){throw s instanceof Me?s:new ae(`Invalid response body while trying to fetch ${n.url}: ${s.message}`,"system",s)}if(r.readableEnded===!0||r._readableState.ended===!0)try{return o.every(s=>typeof s=="string")?fe.Buffer.from(o.join("")):fe.Buffer.concat(o,i)}catch(s){throw new ae(`Could not create Buffer from response body for ${n.url}: ${s.message}`,"system",s)}else throw new ae(`Premature close of server response while trying to fetch ${n.url}`)}var Dt=(n,r)=>{let o,i,{body:s}=n[ie];if(n.bodyUsed)throw new Error("cannot clone body after it is used");return s instanceof me.default&&typeof s.getBoundary!="function"&&(o=new me.PassThrough({highWaterMark:r}),i=new me.PassThrough({highWaterMark:r}),s.pipe(o),s.pipe(i),n[ie].stream=o,s=i),s},rl=(0,Ue.deprecate)(n=>n.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),tn=(n,r)=>n===null?null:typeof n=="string"?"text/plain;charset=UTF-8":Gn(n)?"application/x-www-form-urlencoded;charset=UTF-8":or(n)?n.type||null:fe.Buffer.isBuffer(n)||Ue.types.isAnyArrayBuffer(n)||ArrayBuffer.isView(n)?null:n instanceof mt?`multipart/form-data; boundary=${r[ie].boundary}`:n&&typeof n.getBoundary=="function"?`multipart/form-data;boundary=${rl(n)}`:n instanceof me.default?null:"text/plain;charset=UTF-8",fi=n=>{let{body:r}=n[ie];return r===null?0:or(r)?r.size:fe.Buffer.isBuffer(r)?r.length:r&&typeof r.getLengthSync=="function"&&r.hasKnownLength&&r.hasKnownLength()?r.getLengthSync():null},ci=async(n,{body:r})=>{r===null?n.end():await tl(r,n)};var Xn=require("node:util"),sr=_e(require("node:http"),1),rn=typeof sr.default.validateHeaderName=="function"?sr.default.validateHeaderName:n=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(n)){let r=new TypeError(`Header name must be a valid HTTP token [${n}]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),r}},eo=typeof sr.default.validateHeaderValue=="function"?sr.default.validateHeaderValue:(n,r)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(r)){let o=new TypeError(`Invalid character in header content ["${n}"]`);throw Object.defineProperty(o,"code",{value:"ERR_INVALID_CHAR"}),o}},se=class extends URLSearchParams{constructor(r){let o=[];if(r instanceof se){let i=r.raw();for(let[s,l]of Object.entries(i))o.push(...l.map(f=>[s,f]))}else if(r!=null)if(typeof r=="object"&&!Xn.types.isBoxedPrimitive(r)){let i=r[Symbol.iterator];if(i==null)o.push(...Object.entries(r));else{if(typeof i!="function")throw new TypeError("Header pairs must be iterable");o=[...r].map(s=>{if(typeof s!="object"||Xn.types.isBoxedPrimitive(s))throw new TypeError("Each header pair must be an iterable object");return[...s]}).map(s=>{if(s.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...s]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");return o=o.length>0?o.map(([i,s])=>(rn(i),eo(i,String(s)),[String(i).toLowerCase(),String(s)])):void 0,super(o),new Proxy(this,{get(i,s,l){switch(s){case"append":case"set":return(f,b)=>(rn(f),eo(f,String(b)),URLSearchParams.prototype[s].call(i,String(f).toLowerCase(),String(b)));case"delete":case"has":case"getAll":return f=>(rn(f),URLSearchParams.prototype[s].call(i,String(f).toLowerCase()));case"keys":return()=>(i.sort(),new Set(URLSearchParams.prototype.keys.call(i)).keys());default:return Reflect.get(i,s,l)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(r){let o=this.getAll(r);if(o.length===0)return null;let i=o.join(", ");return/^content-encoding$/i.test(r)&&(i=i.toLowerCase()),i}forEach(r,o=void 0){for(let i of this.keys())Reflect.apply(r,o,[this.get(i),i,this])}*values(){for(let r of this.keys())yield this.get(r)}*entries(){for(let r of this.keys())yield[r,this.get(r)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((r,o)=>(r[o]=this.getAll(o),r),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((r,o)=>{let i=this.getAll(o);return o==="host"?r[o]=i[0]:r[o]=i.length>1?i:i[0],r},{})}};Object.defineProperties(se.prototype,["get","entries","forEach","values"].reduce((n,r)=>(n[r]={enumerable:!0},n),{}));function di(n=[]){return new se(n.reduce((r,o,i,s)=>(i%2===0&&r.push(s.slice(i,i+2)),r),[]).filter(([r,o])=>{try{return rn(r),eo(r,String(o)),!0}catch{return!1}}))}var nl=new Set([301,302,303,307,308]),nn=n=>nl.has(n);var we=Symbol("Response internals"),K=class extends Pe{constructor(r=null,o={}){super(r,o);let i=o.status!=null?o.status:200,s=new se(o.headers);if(r!==null&&!s.has("Content-Type")){let l=tn(r,this);l&&s.append("Content-Type",l)}this[we]={type:"default",url:o.url,status:i,statusText:o.statusText||"",headers:s,counter:o.counter,highWaterMark:o.highWaterMark}}get type(){return this[we].type}get url(){return this[we].url||""}get status(){return this[we].status}get ok(){return this[we].status>=200&&this[we].status<300}get redirected(){return this[we].counter>0}get statusText(){return this[we].statusText}get headers(){return this[we].headers}get highWaterMark(){return this[we].highWaterMark}clone(){return new K(Dt(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(r,o=302){if(!nn(o))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new K(null,{headers:{location:new URL(r).toString()},status:o})}static error(){let r=new K(null,{status:0,statusText:""});return r[we].type="error",r}get[Symbol.toStringTag](){return"Response"}};Object.defineProperties(K.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});var wi=require("node:url"),Ri=require("node:util");var hi=n=>{if(n.search)return n.search;let r=n.href.length-1,o=n.hash||(n.href[r]==="#"?"#":"");return n.href[r-o.length]==="?"?"?":""};var bi=require("node:net");function mi(n,r=!1){return n==null||(n=new URL(n),/^(about|blob|data):$/.test(n.protocol))?"no-referrer":(n.username="",n.password="",n.hash="",r&&(n.pathname="",n.search=""),n)}var pi=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]),yi="strict-origin-when-cross-origin";function gi(n){if(!pi.has(n))throw new TypeError(`Invalid referrerPolicy: ${n}`);return n}function ol(n){if(/^(http|ws)s:$/.test(n.protocol))return!0;let r=n.host.replace(/(^\[)|(]$)/g,""),o=(0,bi.isIP)(r);return o===4&&/^127\./.test(r)||o===6&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(r)?!0:/^(.+\.)*localhost$/.test(n.host)?!1:n.protocol==="file:"}function Wt(n){return/^about:(blank|srcdoc)$/.test(n)||n.protocol==="data:"||/^(blob|filesystem):$/.test(n.protocol)?!0:ol(n)}function Si(n,{referrerURLCallback:r,referrerOriginCallback:o}={}){if(n.referrer==="no-referrer"||n.referrerPolicy==="")return null;let i=n.referrerPolicy;if(n.referrer==="about:client")return"no-referrer";let s=n.referrer,l=mi(s),f=mi(s,!0);l.toString().length>4096&&(l=f),r&&(l=r(l)),o&&(f=o(f));let b=new URL(n.url);switch(i){case"no-referrer":return"no-referrer";case"origin":return f;case"unsafe-url":return l;case"strict-origin":return Wt(l)&&!Wt(b)?"no-referrer":f.toString();case"strict-origin-when-cross-origin":return l.origin===b.origin?l:Wt(l)&&!Wt(b)?"no-referrer":f;case"same-origin":return l.origin===b.origin?l:"no-referrer";case"origin-when-cross-origin":return l.origin===b.origin?l:f;case"no-referrer-when-downgrade":return Wt(l)&&!Wt(b)?"no-referrer":l;default:throw new TypeError(`Invalid referrerPolicy: ${i}`)}}function _i(n){let r=(n.get("referrer-policy")||"").split(/[,\s]+/),o="";for(let i of r)i&&pi.has(i)&&(o=i);return o}var H=Symbol("Request internals"),on=n=>typeof n=="object"&&typeof n[H]=="object",al=(0,Ri.deprecate)(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)"),$e=class extends Pe{constructor(r,o={}){let i;if(on(r)?i=new URL(r.url):(i=new URL(r),r={}),i.username!==""||i.password!=="")throw new TypeError(`${i} is an url with embedded credentials.`);let s=o.method||r.method||"GET";if(s=s.toUpperCase(),"data"in o&&al(),(o.body!=null||on(r)&&r.body!==null)&&(s==="GET"||s==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let l=o.body?o.body:on(r)&&r.body!==null?Dt(r):null;super(l,{size:o.size||r.size||0});let f=new se(o.headers||r.headers||{});if(l!==null&&!f.has("Content-Type")){let m=tn(l,this);m&&f.set("Content-Type",m)}let b=on(r)?r.signal:null;if("signal"in o&&(b=o.signal),b!=null&&!ri(b))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let p=o.referrer==null?r.referrer:o.referrer;if(p==="")p="no-referrer";else if(p){let m=new URL(p);p=/^about:(\/\/)?client$/.test(m)?"client":m}else p=void 0;this[H]={method:s,redirect:o.redirect||r.redirect||"follow",headers:f,parsedURL:i,signal:b,referrer:p},this.follow=o.follow===void 0?r.follow===void 0?20:r.follow:o.follow,this.compress=o.compress===void 0?r.compress===void 0?!0:r.compress:o.compress,this.counter=o.counter||r.counter||0,this.agent=o.agent||r.agent,this.highWaterMark=o.highWaterMark||r.highWaterMark||16384,this.insecureHTTPParser=o.insecureHTTPParser||r.insecureHTTPParser||!1,this.referrerPolicy=o.referrerPolicy||r.referrerPolicy||""}get method(){return this[H].method}get url(){return(0,wi.format)(this[H].parsedURL)}get headers(){return this[H].headers}get redirect(){return this[H].redirect}get signal(){return this[H].signal}get referrer(){if(this[H].referrer==="no-referrer")return"";if(this[H].referrer==="client")return"about:client";if(this[H].referrer)return this[H].referrer.toString()}get referrerPolicy(){return this[H].referrerPolicy}set referrerPolicy(r){this[H].referrerPolicy=gi(r)}clone(){return new $e(this)}get[Symbol.toStringTag](){return"Request"}};Object.defineProperties($e.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});var Ti=n=>{let{parsedURL:r}=n[H],o=new se(n[H].headers);o.has("Accept")||o.set("Accept","*/*");let i=null;if(n.body===null&&/^(post|put)$/i.test(n.method)&&(i="0"),n.body!==null){let b=fi(n);typeof b=="number"&&!Number.isNaN(b)&&(i=String(b))}i&&o.set("Content-Length",i),n.referrerPolicy===""&&(n.referrerPolicy=yi),n.referrer&&n.referrer!=="no-referrer"?n[H].referrer=Si(n):n[H].referrer="no-referrer",n[H].referrer instanceof URL&&o.set("Referer",n.referrer),o.has("User-Agent")||o.set("User-Agent","node-fetch"),n.compress&&!o.has("Accept-Encoding")&&o.set("Accept-Encoding","gzip,deflate,br");let{agent:s}=n;typeof s=="function"&&(s=s(r)),!o.has("Connection")&&!s&&o.set("Connection","close");let l=hi(r),f={path:r.pathname+l,method:n.method,headers:o[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:n.insecureHTTPParser,agent:s};return{parsedURL:r,options:f}};var an=class extends Me{constructor(r,o="aborted"){super(r,o)}};Kr();Kn();var il=new Set(["data:","http:","https:"]);async function sn(n,r){return new Promise((o,i)=>{let s=new $e(n,r),{parsedURL:l,options:f}=Ti(s);if(!il.has(l.protocol))throw new TypeError(`node-fetch cannot load ${n}. URL scheme "${l.protocol.replace(/:$/,"")}" is not supported.`);if(l.protocol==="data:"){let g=Ya(s.url),A=new K(g,{headers:{"Content-Type":g.typeFull}});o(A);return}let b=(l.protocol==="https:"?vi.default:Ei.default).request,{signal:p}=s,m=null,w=()=>{let g=new an("The operation was aborted.");i(g),s.body&&s.body instanceof ce.default.Readable&&s.body.destroy(g),!(!m||!m.body)&&m.body.emit("error",g)};if(p&&p.aborted){w();return}let T=()=>{w(),y()},_=b(l.toString(),f);p&&p.addEventListener("abort",T);let y=()=>{_.abort(),p&&p.removeEventListener("abort",T)};_.on("error",g=>{i(new ae(`request to ${s.url} failed, reason: ${g.message}`,"system",g)),y()}),sl(_,g=>{m.body.destroy(g)}),process.version<"v14"&&_.on("socket",g=>{let A;g.prependListener("end",()=>{A=g._eventsCount}),g.prependListener("close",v=>{if(m&&A<g._eventsCount&&!v){let S=new Error("Premature close");S.code="ERR_STREAM_PREMATURE_CLOSE",m.body.emit("error",S)}})}),_.on("response",g=>{_.setTimeout(0);let A=di(g.rawHeaders);if(nn(g.statusCode)){let C=A.get("Location"),L=null;try{L=C===null?null:new URL(C,s.url)}catch{if(s.redirect!=="manual"){i(new ae(`uri requested responds with an invalid redirect URL: ${C}`,"invalid-redirect")),y();return}}switch(s.redirect){case"error":i(new ae(`uri requested responds with a redirect, redirect mode is set to error: ${s.url}`,"no-redirect")),y();return;case"manual":break;case"follow":{if(L===null)break;if(s.counter>=s.follow){i(new ae(`maximum redirect reached at: ${s.url}`,"max-redirect")),y();return}let O={headers:new se(s.headers),follow:s.follow,counter:s.counter+1,agent:s.agent,compress:s.compress,method:s.method,body:Dt(s),signal:s.signal,size:s.size,referrer:s.referrer,referrerPolicy:s.referrerPolicy};if(!ni(s.url,L))for(let V of["authorization","www-authenticate","cookie","cookie2"])O.headers.delete(V);if(g.statusCode!==303&&s.body&&r.body instanceof ce.default.Readable){i(new ae("Cannot follow redirect with body being a readable stream","unsupported-redirect")),y();return}(g.statusCode===303||(g.statusCode===301||g.statusCode===302)&&s.method==="POST")&&(O.method="GET",O.body=void 0,O.headers.delete("content-length"));let Q=_i(A);Q&&(O.referrerPolicy=Q),o(sn(new $e(L,O))),y();return}default:return i(new TypeError(`Redirect option '${s.redirect}' is not a valid value of RequestRedirect`))}}p&&g.once("end",()=>{p.removeEventListener("abort",T)});let v=(0,ce.pipeline)(g,new ce.PassThrough,C=>{C&&i(C)});process.version<"v12.10"&&g.on("aborted",T);let S={url:s.url,status:g.statusCode,statusText:g.statusMessage,headers:A,size:s.size,counter:s.counter,highWaterMark:s.highWaterMark},k=A.get("Content-Encoding");if(!s.compress||s.method==="HEAD"||k===null||g.statusCode===204||g.statusCode===304){m=new K(v,S),o(m);return}let M={flush:pt.default.Z_SYNC_FLUSH,finishFlush:pt.default.Z_SYNC_FLUSH};if(k==="gzip"||k==="x-gzip"){v=(0,ce.pipeline)(v,pt.default.createGunzip(M),C=>{C&&i(C)}),m=new K(v,S),o(m);return}if(k==="deflate"||k==="x-deflate"){let C=(0,ce.pipeline)(g,new ce.PassThrough,L=>{L&&i(L)});C.once("data",L=>{(L[0]&15)===8?v=(0,ce.pipeline)(v,pt.default.createInflate(),O=>{O&&i(O)}):v=(0,ce.pipeline)(v,pt.default.createInflateRaw(),O=>{O&&i(O)}),m=new K(v,S),o(m)}),C.once("end",()=>{m||(m=new K(v,S),o(m))});return}if(k==="br"){v=(0,ce.pipeline)(v,pt.default.createBrotliDecompress(),C=>{C&&i(C)}),m=new K(v,S),o(m);return}m=new K(v,S),o(m)}),ci(_,s).catch(i)})}function sl(n,r){let o=ur.Buffer.from(`0\r
\r
`),i=!1,s=!1,l;n.on("response",f=>{let{headers:b}=f;i=b["transfer-encoding"]==="chunked"&&!b["content-length"]}),n.on("socket",f=>{let b=()=>{if(i&&!s){let p=new Error("Premature close");p.code="ERR_STREAM_PREMATURE_CLOSE",r(p)}};f.prependListener("close",b),n.on("abort",()=>{f.removeListener("close",b)}),f.on("data",p=>{s=ur.Buffer.compare(p.slice(-5),o)===0,!s&&l&&(s=ur.Buffer.compare(l.slice(-3),o.slice(0,3))===0&&ur.Buffer.compare(p.slice(-2),o.slice(3))===0),l=p})})}var Ci=_e(Hr());var{token:ul}=Qr(),ll={method:"get",headers:{Authorization:`Token ${ul}`}},Ai=async(n,r)=>{let o=await sn(`https://readwise.io/api${n}?${Ci.default.stringify(r)}`,ll),i=await o.json();if(!o.ok){let s=new Error("An error occurred while fetching the data.");throw s.status=o.status,s}return i};var Pi=require("react"),kt=require("@raycast/api"),Oi=n=>{(0,Pi.useEffect)(()=>{n&&(n.status===401||n.status===403?(0,kt.showToast)(kt.Toast.Style.Failure,"Invalid API token","Please, validate your Readwise API token is correct and you added one."):(0,kt.showToast)(kt.Toast.Style.Failure,"Something went wrong.","Please, try it again."))},[n])};var{pageSize:fl}=Qr(),cl={page_size:fl},Bi=(n,r)=>{let o=r||cl,[i,s]=(0,Fi.useState)(o),{data:l,error:f,isValidating:b}=Ha([n,i],Ai);return Oi(f),{currentParams:i,data:l,defaultParams:o,loading:!l&&!f||b,setParams:s}};var to="/v2/all_highlight_tags";function Wi(){let{data:n,loading:r,setParams:o,defaultParams:i}=Bi(to);return{data:n,loading:r,refetch:async s=>{o({...i,...Di.default.parse(new URL(s,"https://readwise.io").search)})}}}var rt=require("@raycast/api"),lr=require("react/jsx-runtime"),ki=({actions:n,item:r})=>{let o=`https://readwise.io/tags/${encodeURIComponent(r.name)}`;return(0,lr.jsx)(rt.List.Item,{title:r.name,accessories:o&&[{text:o,icon:rt.Icon.Link}]||void 0,actions:(0,lr.jsxs)(rt.ActionPanel,{children:[o&&(0,lr.jsx)(rt.Action.OpenInBrowser,{title:"Open in Browser",url:o}),n]})})};var dl=_e(Hr());var ro=(n,r)=>n?"Loading...":r.toString();var un=require("@raycast/api"),Oe=require("react/jsx-runtime"),Li=({onNextAction:n,onPreviousAction:r,onHomeAction:o})=>(0,Oe.jsxs)(Oe.Fragment,{children:[n&&(0,Oe.jsx)(un.Action,{icon:"\u27A1\uFE0F",title:"Next Page",onAction:n,shortcut:{modifiers:["cmd"],key:"arrowRight"}}),r&&(0,Oe.jsxs)(Oe.Fragment,{children:[(0,Oe.jsx)(un.Action,{icon:"\u2B05\uFE0F",title:"Previous Page",onAction:r,shortcut:{modifiers:["cmd"],key:"arrowLeft"}}),(0,Oe.jsx)(un.Action,{icon:"\u{1F3E0}",title:"Back to Home",onAction:o,shortcut:{modifiers:["cmd"],key:"0"}})]})]});var qi=require("@raycast/api");var ln=require("react/jsx-runtime"),Ii=()=>(0,ln.jsx)(qi.List.EmptyView,{title:"No Results",icon:{source:"empty-view.png"}});var yt=require("react/jsx-runtime");function zi(){let{data:n,loading:r,refetch:o}=Wi(),{next:i,previous:s}=n||{},l=n?.results.length||0,f=ro(r,l);return(0,yt.jsxs)(no.List,{isLoading:r,enableFiltering:!0,children:[(0,yt.jsx)(Ii,{}),(0,yt.jsx)(no.List.Section,{title:"Results",subtitle:f,children:n?.results.map(b=>(0,yt.jsx)(ki,{item:b,actions:(0,yt.jsx)(Li,{onHomeAction:()=>o(to),onNextAction:i?()=>o(i):void 0,onPreviousAction:s?()=>s&&o(s):void 0})},b.name))})]})}
/*! Bundled license information:

fetch-blob/index.js:
  (*! fetch-blob. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> *)

formdata-polyfill/esm.min.js:
  (*! formdata-polyfill. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> *)

node-domexception/index.js:
  (*! node-domexception. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> *)

swr/dist/index.mjs:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)
*/
