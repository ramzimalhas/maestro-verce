"use strict";var tl=Object.create;var sn=Object.defineProperty;var rl=Object.getOwnPropertyDescriptor;var nl=Object.getOwnPropertyNames;var al=Object.getPrototypeOf,ol=Object.prototype.hasOwnProperty;var dr=(r,t)=>()=>(r&&(t=r(r=0)),t);var lt=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports),jo=(r,t)=>{for(var n in t)sn(r,n,{get:t[n],enumerable:!0})},Ho=(r,t,n,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of nl(t))!ol.call(r,i)&&i!==n&&sn(r,i,{get:()=>t[i],enumerable:!(o=rl(t,i))||o.enumerable});return r};var Ee=(r,t,n)=>(n=r!=null?tl(al(r)):{},Ho(t||!r||!r.__esModule?sn(n,"default",{value:r,enumerable:!0}):n,r)),il=r=>Ho(sn({},"__esModule",{value:!0}),r);var Yo=lt((ud,$o)=>{"use strict";$o.exports=r=>encodeURIComponent(r).replace(/[!'()*]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`)});var Ko=lt((ld,Xo)=>{"use strict";var Go="%[a-f0-9]{2}",Vo=new RegExp(Go,"gi"),Qo=new RegExp("("+Go+")+","gi");function Gn(r,t){try{return decodeURIComponent(r.join(""))}catch{}if(r.length===1)return r;t=t||1;var n=r.slice(0,t),o=r.slice(t);return Array.prototype.concat.call([],Gn(n),Gn(o))}function sl(r){try{return decodeURIComponent(r)}catch{for(var t=r.match(Vo),n=1;n<t.length;n++)r=Gn(t,n).join(""),t=r.match(Vo);return r}}function ul(r){for(var t={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},n=Qo.exec(r);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch{var o=sl(n[0]);o!==n[0]&&(t[n[0]]=o)}n=Qo.exec(r)}t["%C2"]="\uFFFD";for(var i=Object.keys(t),u=0;u<i.length;u++){var f=i[u];r=r.replace(new RegExp(f,"g"),t[f])}return r}Xo.exports=function(r){if(typeof r!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof r+"`");try{return r=r.replace(/\+/g," "),decodeURIComponent(r)}catch{return ul(r)}}});var Zo=lt((fd,Jo)=>{"use strict";Jo.exports=(r,t)=>{if(!(typeof r=="string"&&typeof t=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(t==="")return[r];let n=r.indexOf(t);return n===-1?[r]:[r.slice(0,n),r.slice(n+t.length)]}});var ti=lt((dd,ei)=>{"use strict";ei.exports=function(r,t){for(var n={},o=Object.keys(r),i=Array.isArray(t),u=0;u<o.length;u++){var f=o[u],h=r[f];(i?t.indexOf(f)!==-1:t(f,h,r))&&(n[f]=h)}return n}});var un=lt(fe=>{"use strict";var ll=Yo(),fl=Ko(),ni=Zo(),dl=ti(),cl=r=>r==null,Xn=Symbol("encodeFragmentIdentifier");function hl(r){switch(r.arrayFormat){case"index":return t=>(n,o)=>{let i=n.length;return o===void 0||r.skipNull&&o===null||r.skipEmptyString&&o===""?n:o===null?[...n,[H(t,r),"[",i,"]"].join("")]:[...n,[H(t,r),"[",H(i,r),"]=",H(o,r)].join("")]};case"bracket":return t=>(n,o)=>o===void 0||r.skipNull&&o===null||r.skipEmptyString&&o===""?n:o===null?[...n,[H(t,r),"[]"].join("")]:[...n,[H(t,r),"[]=",H(o,r)].join("")];case"colon-list-separator":return t=>(n,o)=>o===void 0||r.skipNull&&o===null||r.skipEmptyString&&o===""?n:o===null?[...n,[H(t,r),":list="].join("")]:[...n,[H(t,r),":list=",H(o,r)].join("")];case"comma":case"separator":case"bracket-separator":{let t=r.arrayFormat==="bracket-separator"?"[]=":"=";return n=>(o,i)=>i===void 0||r.skipNull&&i===null||r.skipEmptyString&&i===""?o:(i=i===null?"":i,o.length===0?[[H(n,r),t,H(i,r)].join("")]:[[o,H(i,r)].join(r.arrayFormatSeparator)])}default:return t=>(n,o)=>o===void 0||r.skipNull&&o===null||r.skipEmptyString&&o===""?n:o===null?[...n,H(t,r)]:[...n,[H(t,r),"=",H(o,r)].join("")]}}function ml(r){let t;switch(r.arrayFormat){case"index":return(n,o,i)=>{if(t=/\[(\d*)\]$/.exec(n),n=n.replace(/\[\d*\]$/,""),!t){i[n]=o;return}i[n]===void 0&&(i[n]={}),i[n][t[1]]=o};case"bracket":return(n,o,i)=>{if(t=/(\[\])$/.exec(n),n=n.replace(/\[\]$/,""),!t){i[n]=o;return}if(i[n]===void 0){i[n]=[o];return}i[n]=[].concat(i[n],o)};case"colon-list-separator":return(n,o,i)=>{if(t=/(:list)$/.exec(n),n=n.replace(/:list$/,""),!t){i[n]=o;return}if(i[n]===void 0){i[n]=[o];return}i[n]=[].concat(i[n],o)};case"comma":case"separator":return(n,o,i)=>{let u=typeof o=="string"&&o.includes(r.arrayFormatSeparator),f=typeof o=="string"&&!u&&He(o,r).includes(r.arrayFormatSeparator);o=f?He(o,r):o;let h=u||f?o.split(r.arrayFormatSeparator).map(p=>He(p,r)):o===null?o:He(o,r);i[n]=h};case"bracket-separator":return(n,o,i)=>{let u=/(\[\])$/.test(n);if(n=n.replace(/\[\]$/,""),!u){i[n]=o&&He(o,r);return}let f=o===null?[]:o.split(r.arrayFormatSeparator).map(h=>He(h,r));if(i[n]===void 0){i[n]=f;return}i[n]=[].concat(i[n],f)};default:return(n,o,i)=>{if(i[n]===void 0){i[n]=o;return}i[n]=[].concat(i[n],o)}}}function ai(r){if(typeof r!="string"||r.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function H(r,t){return t.encode?t.strict?ll(r):encodeURIComponent(r):r}function He(r,t){return t.decode?fl(r):r}function oi(r){return Array.isArray(r)?r.sort():typeof r=="object"?oi(Object.keys(r)).sort((t,n)=>Number(t)-Number(n)).map(t=>r[t]):r}function ii(r){let t=r.indexOf("#");return t!==-1&&(r=r.slice(0,t)),r}function pl(r){let t="",n=r.indexOf("#");return n!==-1&&(t=r.slice(n)),t}function si(r){r=ii(r);let t=r.indexOf("?");return t===-1?"":r.slice(t+1)}function ri(r,t){return t.parseNumbers&&!Number.isNaN(Number(r))&&typeof r=="string"&&r.trim()!==""?r=Number(r):t.parseBooleans&&r!==null&&(r.toLowerCase()==="true"||r.toLowerCase()==="false")&&(r=r.toLowerCase()==="true"),r}function ui(r,t){t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t),ai(t.arrayFormatSeparator);let n=ml(t),o=Object.create(null);if(typeof r!="string"||(r=r.trim().replace(/^[?#&]/,""),!r))return o;for(let i of r.split("&")){if(i==="")continue;let[u,f]=ni(t.decode?i.replace(/\+/g," "):i,"=");f=f===void 0?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?f:He(f,t),n(He(u,t),f,o)}for(let i of Object.keys(o)){let u=o[i];if(typeof u=="object"&&u!==null)for(let f of Object.keys(u))u[f]=ri(u[f],t);else o[i]=ri(u,t)}return t.sort===!1?o:(t.sort===!0?Object.keys(o).sort():Object.keys(o).sort(t.sort)).reduce((i,u)=>{let f=o[u];return f&&typeof f=="object"&&!Array.isArray(f)?i[u]=oi(f):i[u]=f,i},Object.create(null))}fe.extract=si;fe.parse=ui;fe.stringify=(r,t)=>{if(!r)return"";t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t),ai(t.arrayFormatSeparator);let n=f=>t.skipNull&&cl(r[f])||t.skipEmptyString&&r[f]==="",o=hl(t),i={};for(let f of Object.keys(r))n(f)||(i[f]=r[f]);let u=Object.keys(i);return t.sort!==!1&&u.sort(t.sort),u.map(f=>{let h=r[f];return h===void 0?"":h===null?H(f,t):Array.isArray(h)?h.length===0&&t.arrayFormat==="bracket-separator"?H(f,t)+"[]":h.reduce(o(f),[]).join("&"):H(f,t)+"="+H(h,t)}).filter(f=>f.length>0).join("&")};fe.parseUrl=(r,t)=>{t=Object.assign({decode:!0},t);let[n,o]=ni(r,"#");return Object.assign({url:n.split("?")[0]||"",query:ui(si(r),t)},t&&t.parseFragmentIdentifier&&o?{fragmentIdentifier:He(o,t)}:{})};fe.stringifyUrl=(r,t)=>{t=Object.assign({encode:!0,strict:!0,[Xn]:!0},t);let n=ii(r.url).split("?")[0]||"",o=fe.extract(r.url),i=fe.parse(o,{sort:!1}),u=Object.assign(i,r.query),f=fe.stringify(u,t);f&&(f=`?${f}`);let h=pl(r.url);return r.fragmentIdentifier&&(h=`#${t[Xn]?H(r.fragmentIdentifier,t):r.fragmentIdentifier}`),`${n}${f}${h}`};fe.pick=(r,t,n)=>{n=Object.assign({parseFragmentIdentifier:!0,[Xn]:!1},n);let{url:o,query:i,fragmentIdentifier:u}=fe.parseUrl(r,n);return fe.stringifyUrl({url:o,query:dl(i,t),fragmentIdentifier:u},n)};fe.exclude=(r,t,n)=>{let o=Array.isArray(t)?i=>!t.includes(i):(i,u)=>!t(i,u);return fe.pick(r,o,n)}});var Ai=lt((cn,Pi)=>{(function(r,t){typeof cn=="object"&&typeof Pi<"u"?t(cn):typeof define=="function"&&define.amd?define(["exports"],t):(r=typeof globalThis<"u"?globalThis:r||self,t(r.WebStreamsPolyfill={}))})(cn,function(r){"use strict";let t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:e=>`Symbol(${e})`;function n(){}function o(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}let i=o();function u(e){return typeof e=="object"&&e!==null||typeof e=="function"}let f=n,h=Promise,p=Promise.prototype.then,c=Promise.resolve.bind(h),_=Promise.reject.bind(h);function v(e){return new h(e)}function y(e){return c(e)}function w(e){return _(e)}function S(e,a,s){return p.call(e,a,s)}function E(e,a,s){S(S(e,a,s),void 0,f)}function T(e,a){E(e,a)}function g(e,a){E(e,void 0,a)}function O(e,a,s){return S(e,a,s)}function I(e){S(e,void 0,f)}let P=(()=>{let e=i&&i.queueMicrotask;if(typeof e=="function")return e;let a=y(void 0);return s=>S(a,s)})();function q(e,a,s){if(typeof e!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,a,s)}function D(e,a,s){try{return y(q(e,a,s))}catch(l){return w(l)}}let ee=16384;class J{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(a){let s=this._back,l=s;s._elements.length===ee-1&&(l={_elements:[],_next:void 0}),s._elements.push(a),l!==s&&(this._back=l,s._next=l),++this._size}shift(){let a=this._front,s=a,l=this._cursor,d=l+1,m=a._elements,b=m[l];return d===ee&&(s=a._next,d=0),--this._size,this._cursor=d,a!==s&&(this._front=s),m[l]=void 0,b}forEach(a){let s=this._cursor,l=this._front,d=l._elements;for(;(s!==d.length||l._next!==void 0)&&!(s===d.length&&(l=l._next,d=l._elements,s=0,d.length===0));)a(d[s]),++s}peek(){let a=this._front,s=this._cursor;return a._elements[s]}}function G(e,a){e._ownerReadableStream=a,a._reader=e,a._state==="readable"?Gt(e):a._state==="closed"?Er(e):ye(e,a._storedError)}function mt(e,a){let s=e._ownerReadableStream;return Te(s,a)}function ie(e){e._ownerReadableStream._state==="readable"?Le(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):Pr(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function qe(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function Gt(e){e._closedPromise=v((a,s)=>{e._closedPromise_resolve=a,e._closedPromise_reject=s})}function ye(e,a){Gt(e),Le(e,a)}function Er(e){Gt(e),Xt(e)}function Le(e,a){e._closedPromise_reject!==void 0&&(I(e._closedPromise),e._closedPromise_reject(a),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function Pr(e,a){ye(e,a)}function Xt(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}let Ar=t("[[AbortSteps]]"),Wt=t("[[ErrorSteps]]"),pt=t("[[CancelSteps]]"),Oe=t("[[PullSteps]]"),kt=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)},Ft=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function Ie(e){return typeof e=="object"||typeof e=="function"}function _e(e,a){if(e!==void 0&&!Ie(e))throw new TypeError(`${a} is not an object.`)}function N(e,a){if(typeof e!="function")throw new TypeError(`${a} is not a function.`)}function se(e){return typeof e=="object"&&e!==null||typeof e=="function"}function ne(e,a){if(!se(e))throw new TypeError(`${a} is not an object.`)}function j(e,a,s){if(e===void 0)throw new TypeError(`Parameter ${a} is required in '${s}'.`)}function Ue(e,a,s){if(e===void 0)throw new TypeError(`${a} is required in '${s}'.`)}function ze(e){return Number(e)}function me(e){return e===0?0:e}function Z(e){return me(Ft(e))}function ve(e,a){let l=Number.MAX_SAFE_INTEGER,d=Number(e);if(d=me(d),!kt(d))throw new TypeError(`${a} is not a finite number`);if(d=Z(d),d<0||d>l)throw new TypeError(`${a} is outside the accepted range of 0 to ${l}, inclusive`);return!kt(d)||d===0?0:d}function ue(e,a){if(!it(e))throw new TypeError(`${a} is not a ReadableStream.`)}function De(e){return new tt(e)}function Je(e,a){e._reader._readRequests.push(a)}function We(e,a,s){let d=e._reader._readRequests.shift();s?d._closeSteps():d._chunkSteps(a)}function Ze(e){return e._reader._readRequests.length}function et(e){let a=e._reader;return!(a===void 0||!rt(a))}class tt{constructor(a){if(j(a,1,"ReadableStreamDefaultReader"),ue(a,"First parameter"),st(a))throw new TypeError("This stream has already been locked for exclusive reading by another reader");G(this,a),this._readRequests=new J}get closed(){return rt(this)?this._closedPromise:w(Or("closed"))}cancel(a=void 0){return rt(this)?this._ownerReadableStream===void 0?w(qe("cancel")):mt(this,a):w(Or("cancel"))}read(){if(!rt(this))return w(Or("read"));if(this._ownerReadableStream===void 0)return w(qe("read from"));let a,s,l=v((m,b)=>{a=m,s=b});return Kt(this,{_chunkSteps:m=>a({value:m,done:!1}),_closeSteps:()=>a({value:void 0,done:!0}),_errorSteps:m=>s(m)}),l}releaseLock(){if(!rt(this))throw Or("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");ie(this)}}}Object.defineProperties(tt.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(tt.prototype,t.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function rt(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_readRequests")?!1:e instanceof tt}function Kt(e,a){let s=e._ownerReadableStream;s._disturbed=!0,s._state==="closed"?a._closeSteps():s._state==="errored"?a._errorSteps(s._storedError):s._readableStreamController[Oe](a)}function Or(e){return new TypeError(`ReadableStreamDefaultReader.prototype.${e} can only be used on a ReadableStreamDefaultReader`)}let La=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class Ia{constructor(a,s){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=a,this._preventCancel=s}next(){let a=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?O(this._ongoingPromise,a,a):a(),this._ongoingPromise}return(a){let s=()=>this._returnSteps(a);return this._ongoingPromise?O(this._ongoingPromise,s,s):s()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let a=this._reader;if(a._ownerReadableStream===void 0)return w(qe("iterate"));let s,l,d=v((b,R)=>{s=b,l=R});return Kt(a,{_chunkSteps:b=>{this._ongoingPromise=void 0,P(()=>s({value:b,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,ie(a),s({value:void 0,done:!0})},_errorSteps:b=>{this._ongoingPromise=void 0,this._isFinished=!0,ie(a),l(b)}}),d}_returnSteps(a){if(this._isFinished)return Promise.resolve({value:a,done:!0});this._isFinished=!0;let s=this._reader;if(s._ownerReadableStream===void 0)return w(qe("finish iterating"));if(!this._preventCancel){let l=mt(s,a);return ie(s),O(l,()=>({value:a,done:!0}))}return ie(s),y({value:a,done:!0})}}let Ua={next(){return za(this)?this._asyncIteratorImpl.next():w(Na("next"))},return(e){return za(this)?this._asyncIteratorImpl.return(e):w(Na("return"))}};La!==void 0&&Object.setPrototypeOf(Ua,La);function Ms(e,a){let s=De(e),l=new Ia(s,a),d=Object.create(Ua);return d._asyncIteratorImpl=l,d}function za(e){if(!u(e)||!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof Ia}catch{return!1}}function Na(e){return new TypeError(`ReadableStreamAsyncIterator.${e} can only be used on a ReadableSteamAsyncIterator`)}let ja=Number.isNaN||function(e){return e!==e};function Jt(e){return e.slice()}function Ha(e,a,s,l,d){new Uint8Array(e).set(new Uint8Array(s,l,d),a)}function id(e){return e}function Dr(e){return!1}function $a(e,a,s){if(e.slice)return e.slice(a,s);let l=s-a,d=new ArrayBuffer(l);return Ha(d,0,e,a,l),d}function qs(e){return!(typeof e!="number"||ja(e)||e<0)}function Ya(e){let a=$a(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(a)}function En(e){let a=e._queue.shift();return e._queueTotalSize-=a.size,e._queueTotalSize<0&&(e._queueTotalSize=0),a.value}function Pn(e,a,s){if(!qs(s)||s===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");e._queue.push({value:a,size:s}),e._queueTotalSize+=s}function Ls(e){return e._queue.peek().value}function nt(e){e._queue=new J,e._queueTotalSize=0}class Zt{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!An(this))throw kn("view");return this._view}respond(a){if(!An(this))throw kn("respond");if(j(a,1,"respond"),a=ve(a,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");Dr(this._view.buffer),Br(this._associatedReadableByteStreamController,a)}respondWithNewView(a){if(!An(this))throw kn("respondWithNewView");if(j(a,1,"respondWithNewView"),!ArrayBuffer.isView(a))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");Dr(a.buffer),Mr(this._associatedReadableByteStreamController,a)}}Object.defineProperties(Zt.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Zt.prototype,t.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class xt{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!bt(this))throw tr("byobRequest");return Wn(this)}get desiredSize(){if(!bt(this))throw tr("desiredSize");return eo(this)}close(){if(!bt(this))throw tr("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");let a=this._controlledReadableByteStream._state;if(a!=="readable")throw new TypeError(`The stream (in ${a} state) is not in the readable state and cannot be closed`);er(this)}enqueue(a){if(!bt(this))throw tr("enqueue");if(j(a,1,"enqueue"),!ArrayBuffer.isView(a))throw new TypeError("chunk must be an array buffer view");if(a.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(a.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");let s=this._controlledReadableByteStream._state;if(s!=="readable")throw new TypeError(`The stream (in ${s} state) is not in the readable state and cannot be enqueued to`);xr(this,a)}error(a=void 0){if(!bt(this))throw tr("error");Re(this,a)}[pt](a){Va(this),nt(this);let s=this._cancelAlgorithm(a);return Fr(this),s}[Oe](a){let s=this._controlledReadableByteStream;if(this._queueTotalSize>0){let d=this._queue.shift();this._queueTotalSize-=d.byteLength,Ka(this);let m=new Uint8Array(d.buffer,d.byteOffset,d.byteLength);a._chunkSteps(m);return}let l=this._autoAllocateChunkSize;if(l!==void 0){let d;try{d=new ArrayBuffer(l)}catch(b){a._errorSteps(b);return}let m={buffer:d,bufferByteLength:l,byteOffset:0,byteLength:l,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(m)}Je(s,a),gt(this)}}Object.defineProperties(xt.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(xt.prototype,t.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function bt(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")?!1:e instanceof xt}function An(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")?!1:e instanceof Zt}function gt(e){if(!Ns(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let s=e._pullAlgorithm();E(s,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,gt(e))},l=>{Re(e,l)})}function Va(e){Dn(e),e._pendingPullIntos=new J}function On(e,a){let s=!1;e._state==="closed"&&(s=!0);let l=Qa(a);a.readerType==="default"?We(e,l,s):$s(e,l,s)}function Qa(e){let a=e.bytesFilled,s=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,a/s)}function Wr(e,a,s,l){e._queue.push({buffer:a,byteOffset:s,byteLength:l}),e._queueTotalSize+=l}function Ga(e,a){let s=a.elementSize,l=a.bytesFilled-a.bytesFilled%s,d=Math.min(e._queueTotalSize,a.byteLength-a.bytesFilled),m=a.bytesFilled+d,b=m-m%s,R=d,A=!1;b>l&&(R=b-a.bytesFilled,A=!0);let k=e._queue;for(;R>0;){let F=k.peek(),x=Math.min(R,F.byteLength),Q=a.byteOffset+a.bytesFilled;Ha(a.buffer,Q,F.buffer,F.byteOffset,x),F.byteLength===x?k.shift():(F.byteOffset+=x,F.byteLength-=x),e._queueTotalSize-=x,Xa(e,x,a),R-=x}return A}function Xa(e,a,s){s.bytesFilled+=a}function Ka(e){e._queueTotalSize===0&&e._closeRequested?(Fr(e),lr(e._controlledReadableByteStream)):gt(e)}function Dn(e){e._byobRequest!==null&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function Ja(e){for(;e._pendingPullIntos.length>0;){if(e._queueTotalSize===0)return;let a=e._pendingPullIntos.peek();Ga(e,a)&&(kr(e),On(e._controlledReadableByteStream,a))}}function Is(e,a,s){let l=e._controlledReadableByteStream,d=1;a.constructor!==DataView&&(d=a.constructor.BYTES_PER_ELEMENT);let m=a.constructor,b=a.buffer,R={buffer:b,bufferByteLength:b.byteLength,byteOffset:a.byteOffset,byteLength:a.byteLength,bytesFilled:0,elementSize:d,viewConstructor:m,readerType:"byob"};if(e._pendingPullIntos.length>0){e._pendingPullIntos.push(R),no(l,s);return}if(l._state==="closed"){let A=new m(R.buffer,R.byteOffset,0);s._closeSteps(A);return}if(e._queueTotalSize>0){if(Ga(e,R)){let A=Qa(R);Ka(e),s._chunkSteps(A);return}if(e._closeRequested){let A=new TypeError("Insufficient bytes to fill elements in the given buffer");Re(e,A),s._errorSteps(A);return}}e._pendingPullIntos.push(R),no(l,s),gt(e)}function Us(e,a){let s=e._controlledReadableByteStream;if(Fn(s))for(;ao(s)>0;){let l=kr(e);On(s,l)}}function zs(e,a,s){if(Xa(e,a,s),s.bytesFilled<s.elementSize)return;kr(e);let l=s.bytesFilled%s.elementSize;if(l>0){let d=s.byteOffset+s.bytesFilled,m=$a(s.buffer,d-l,d);Wr(e,m,0,m.byteLength)}s.bytesFilled-=l,On(e._controlledReadableByteStream,s),Ja(e)}function Za(e,a){let s=e._pendingPullIntos.peek();Dn(e),e._controlledReadableByteStream._state==="closed"?Us(e):zs(e,a,s),gt(e)}function kr(e){return e._pendingPullIntos.shift()}function Ns(e){let a=e._controlledReadableByteStream;return a._state!=="readable"||e._closeRequested||!e._started?!1:!!(et(a)&&Ze(a)>0||Fn(a)&&ao(a)>0||eo(e)>0)}function Fr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function er(e){let a=e._controlledReadableByteStream;if(!(e._closeRequested||a._state!=="readable")){if(e._queueTotalSize>0){e._closeRequested=!0;return}if(e._pendingPullIntos.length>0&&e._pendingPullIntos.peek().bytesFilled>0){let l=new TypeError("Insufficient bytes to fill elements in the given buffer");throw Re(e,l),l}Fr(e),lr(a)}}function xr(e,a){let s=e._controlledReadableByteStream;if(e._closeRequested||s._state!=="readable")return;let l=a.buffer,d=a.byteOffset,m=a.byteLength,b=l;if(e._pendingPullIntos.length>0){let R=e._pendingPullIntos.peek();Dr(R.buffer),R.buffer=R.buffer}if(Dn(e),et(s))if(Ze(s)===0)Wr(e,b,d,m);else{e._pendingPullIntos.length>0&&kr(e);let R=new Uint8Array(b,d,m);We(s,R,!1)}else Fn(s)?(Wr(e,b,d,m),Ja(e)):Wr(e,b,d,m);gt(e)}function Re(e,a){let s=e._controlledReadableByteStream;s._state==="readable"&&(Va(e),nt(e),Fr(e),Oo(s,a))}function Wn(e){if(e._byobRequest===null&&e._pendingPullIntos.length>0){let a=e._pendingPullIntos.peek(),s=new Uint8Array(a.buffer,a.byteOffset+a.bytesFilled,a.byteLength-a.bytesFilled),l=Object.create(Zt.prototype);Hs(l,e,s),e._byobRequest=l}return e._byobRequest}function eo(e){let a=e._controlledReadableByteStream._state;return a==="errored"?null:a==="closed"?0:e._strategyHWM-e._queueTotalSize}function Br(e,a){let s=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(a!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(a===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(s.bytesFilled+a>s.byteLength)throw new RangeError("bytesWritten out of range")}s.buffer=s.buffer,Za(e,a)}function Mr(e,a){let s=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(a.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(a.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(s.byteOffset+s.bytesFilled!==a.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(s.bufferByteLength!==a.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(s.bytesFilled+a.byteLength>s.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");let d=a.byteLength;s.buffer=a.buffer,Za(e,d)}function to(e,a,s,l,d,m,b){a._controlledReadableByteStream=e,a._pullAgain=!1,a._pulling=!1,a._byobRequest=null,a._queue=a._queueTotalSize=void 0,nt(a),a._closeRequested=!1,a._started=!1,a._strategyHWM=m,a._pullAlgorithm=l,a._cancelAlgorithm=d,a._autoAllocateChunkSize=b,a._pendingPullIntos=new J,e._readableStreamController=a;let R=s();E(y(R),()=>{a._started=!0,gt(a)},A=>{Re(a,A)})}function js(e,a,s){let l=Object.create(xt.prototype),d=()=>{},m=()=>y(void 0),b=()=>y(void 0);a.start!==void 0&&(d=()=>a.start(l)),a.pull!==void 0&&(m=()=>a.pull(l)),a.cancel!==void 0&&(b=A=>a.cancel(A));let R=a.autoAllocateChunkSize;if(R===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");to(e,l,d,m,b,s,R)}function Hs(e,a,s){e._associatedReadableByteStreamController=a,e._view=s}function kn(e){return new TypeError(`ReadableStreamBYOBRequest.prototype.${e} can only be used on a ReadableStreamBYOBRequest`)}function tr(e){return new TypeError(`ReadableByteStreamController.prototype.${e} can only be used on a ReadableByteStreamController`)}function ro(e){return new rr(e)}function no(e,a){e._reader._readIntoRequests.push(a)}function $s(e,a,s){let d=e._reader._readIntoRequests.shift();s?d._closeSteps(a):d._chunkSteps(a)}function ao(e){return e._reader._readIntoRequests.length}function Fn(e){let a=e._reader;return!(a===void 0||!yt(a))}class rr{constructor(a){if(j(a,1,"ReadableStreamBYOBReader"),ue(a,"First parameter"),st(a))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!bt(a._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");G(this,a),this._readIntoRequests=new J}get closed(){return yt(this)?this._closedPromise:w(qr("closed"))}cancel(a=void 0){return yt(this)?this._ownerReadableStream===void 0?w(qe("cancel")):mt(this,a):w(qr("cancel"))}read(a){if(!yt(this))return w(qr("read"));if(!ArrayBuffer.isView(a))return w(new TypeError("view must be an array buffer view"));if(a.byteLength===0)return w(new TypeError("view must have non-zero byteLength"));if(a.buffer.byteLength===0)return w(new TypeError("view's buffer must have non-zero byteLength"));if(Dr(a.buffer),this._ownerReadableStream===void 0)return w(qe("read from"));let s,l,d=v((b,R)=>{s=b,l=R});return oo(this,a,{_chunkSteps:b=>s({value:b,done:!1}),_closeSteps:b=>s({value:b,done:!0}),_errorSteps:b=>l(b)}),d}releaseLock(){if(!yt(this))throw qr("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");ie(this)}}}Object.defineProperties(rr.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(rr.prototype,t.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function yt(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")?!1:e instanceof rr}function oo(e,a,s){let l=e._ownerReadableStream;l._disturbed=!0,l._state==="errored"?s._errorSteps(l._storedError):Is(l._readableStreamController,a,s)}function qr(e){return new TypeError(`ReadableStreamBYOBReader.prototype.${e} can only be used on a ReadableStreamBYOBReader`)}function nr(e,a){let{highWaterMark:s}=e;if(s===void 0)return a;if(ja(s)||s<0)throw new RangeError("Invalid highWaterMark");return s}function Lr(e){let{size:a}=e;return a||(()=>1)}function Ir(e,a){_e(e,a);let s=e?.highWaterMark,l=e?.size;return{highWaterMark:s===void 0?void 0:ze(s),size:l===void 0?void 0:Ys(l,`${a} has member 'size' that`)}}function Ys(e,a){return N(e,a),s=>ze(e(s))}function Vs(e,a){_e(e,a);let s=e?.abort,l=e?.close,d=e?.start,m=e?.type,b=e?.write;return{abort:s===void 0?void 0:Qs(s,e,`${a} has member 'abort' that`),close:l===void 0?void 0:Gs(l,e,`${a} has member 'close' that`),start:d===void 0?void 0:Xs(d,e,`${a} has member 'start' that`),write:b===void 0?void 0:Ks(b,e,`${a} has member 'write' that`),type:m}}function Qs(e,a,s){return N(e,s),l=>D(e,a,[l])}function Gs(e,a,s){return N(e,s),()=>D(e,a,[])}function Xs(e,a,s){return N(e,s),l=>q(e,a,[l])}function Ks(e,a,s){return N(e,s),(l,d)=>D(e,a,[l,d])}function io(e,a){if(!Bt(e))throw new TypeError(`${a} is not a WritableStream.`)}function Js(e){if(typeof e!="object"||e===null)return!1;try{return typeof e.aborted=="boolean"}catch{return!1}}let Zs=typeof AbortController=="function";function eu(){if(Zs)return new AbortController}class ar{constructor(a={},s={}){a===void 0?a=null:ne(a,"First parameter");let l=Ir(s,"Second parameter"),d=Vs(a,"First parameter");if(uo(this),d.type!==void 0)throw new RangeError("Invalid type is specified");let b=Lr(l),R=nr(l,1);mu(this,d,R,b)}get locked(){if(!Bt(this))throw Hr("locked");return Mt(this)}abort(a=void 0){return Bt(this)?Mt(this)?w(new TypeError("Cannot abort a stream that already has a writer")):Ur(this,a):w(Hr("abort"))}close(){return Bt(this)?Mt(this)?w(new TypeError("Cannot close a stream that already has a writer")):ke(this)?w(new TypeError("Cannot close an already-closing stream")):lo(this):w(Hr("close"))}getWriter(){if(!Bt(this))throw Hr("getWriter");return so(this)}}Object.defineProperties(ar.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(ar.prototype,t.toStringTag,{value:"WritableStream",configurable:!0});function so(e){return new or(e)}function tu(e,a,s,l,d=1,m=()=>1){let b=Object.create(ar.prototype);uo(b);let R=Object.create(qt.prototype);return bo(b,R,e,a,s,l,d,m),b}function uo(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new J,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function Bt(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")?!1:e instanceof ar}function Mt(e){return e._writer!==void 0}function Ur(e,a){var s;if(e._state==="closed"||e._state==="errored")return y(void 0);e._writableStreamController._abortReason=a,(s=e._writableStreamController._abortController)===null||s===void 0||s.abort();let l=e._state;if(l==="closed"||l==="errored")return y(void 0);if(e._pendingAbortRequest!==void 0)return e._pendingAbortRequest._promise;let d=!1;l==="erroring"&&(d=!0,a=void 0);let m=v((b,R)=>{e._pendingAbortRequest={_promise:void 0,_resolve:b,_reject:R,_reason:a,_wasAlreadyErroring:d}});return e._pendingAbortRequest._promise=m,d||Bn(e,a),m}function lo(e){let a=e._state;if(a==="closed"||a==="errored")return w(new TypeError(`The stream (in ${a} state) is not in the writable state and cannot be closed`));let s=v((d,m)=>{let b={_resolve:d,_reject:m};e._closeRequest=b}),l=e._writer;return l!==void 0&&e._backpressure&&a==="writable"&&Hn(l),pu(e._writableStreamController),s}function ru(e){return v((s,l)=>{let d={_resolve:s,_reject:l};e._writeRequests.push(d)})}function xn(e,a){if(e._state==="writable"){Bn(e,a);return}Mn(e)}function Bn(e,a){let s=e._writableStreamController;e._state="erroring",e._storedError=a;let l=e._writer;l!==void 0&&co(l,a),!su(e)&&s._started&&Mn(e)}function Mn(e){e._state="errored",e._writableStreamController[Wt]();let a=e._storedError;if(e._writeRequests.forEach(d=>{d._reject(a)}),e._writeRequests=new J,e._pendingAbortRequest===void 0){zr(e);return}let s=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,s._wasAlreadyErroring){s._reject(a),zr(e);return}let l=e._writableStreamController[Ar](s._reason);E(l,()=>{s._resolve(),zr(e)},d=>{s._reject(d),zr(e)})}function nu(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}function au(e,a){e._inFlightWriteRequest._reject(a),e._inFlightWriteRequest=void 0,xn(e,a)}function ou(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0,e._state==="erroring"&&(e._storedError=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";let s=e._writer;s!==void 0&&So(s)}function iu(e,a){e._inFlightCloseRequest._reject(a),e._inFlightCloseRequest=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._reject(a),e._pendingAbortRequest=void 0),xn(e,a)}function ke(e){return!(e._closeRequest===void 0&&e._inFlightCloseRequest===void 0)}function su(e){return!(e._inFlightWriteRequest===void 0&&e._inFlightCloseRequest===void 0)}function uu(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0}function lu(e){e._inFlightWriteRequest=e._writeRequests.shift()}function zr(e){e._closeRequest!==void 0&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);let a=e._writer;a!==void 0&&Nn(a,e._storedError)}function qn(e,a){let s=e._writer;s!==void 0&&a!==e._backpressure&&(a?vu(s):Hn(s)),e._backpressure=a}class or{constructor(a){if(j(a,1,"WritableStreamDefaultWriter"),io(a,"First parameter"),Mt(a))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=a,a._writer=this;let s=a._state;if(s==="writable")!ke(a)&&a._backpressure?Yr(this):_o(this),$r(this);else if(s==="erroring")jn(this,a._storedError),$r(this);else if(s==="closed")_o(this),Su(this);else{let l=a._storedError;jn(this,l),wo(this,l)}}get closed(){return wt(this)?this._closedPromise:w(St("closed"))}get desiredSize(){if(!wt(this))throw St("desiredSize");if(this._ownerWritableStream===void 0)throw ir("desiredSize");return hu(this)}get ready(){return wt(this)?this._readyPromise:w(St("ready"))}abort(a=void 0){return wt(this)?this._ownerWritableStream===void 0?w(ir("abort")):fu(this,a):w(St("abort"))}close(){if(!wt(this))return w(St("close"));let a=this._ownerWritableStream;return a===void 0?w(ir("close")):ke(a)?w(new TypeError("Cannot close an already-closing stream")):fo(this)}releaseLock(){if(!wt(this))throw St("releaseLock");this._ownerWritableStream!==void 0&&ho(this)}write(a=void 0){return wt(this)?this._ownerWritableStream===void 0?w(ir("write to")):mo(this,a):w(St("write"))}}Object.defineProperties(or.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(or.prototype,t.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function wt(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")?!1:e instanceof or}function fu(e,a){let s=e._ownerWritableStream;return Ur(s,a)}function fo(e){let a=e._ownerWritableStream;return lo(a)}function du(e){let a=e._ownerWritableStream,s=a._state;return ke(a)||s==="closed"?y(void 0):s==="errored"?w(a._storedError):fo(e)}function cu(e,a){e._closedPromiseState==="pending"?Nn(e,a):_u(e,a)}function co(e,a){e._readyPromiseState==="pending"?vo(e,a):Ru(e,a)}function hu(e){let a=e._ownerWritableStream,s=a._state;return s==="errored"||s==="erroring"?null:s==="closed"?0:go(a._writableStreamController)}function ho(e){let a=e._ownerWritableStream,s=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");co(e,s),cu(e,s),a._writer=void 0,e._ownerWritableStream=void 0}function mo(e,a){let s=e._ownerWritableStream,l=s._writableStreamController,d=bu(l,a);if(s!==e._ownerWritableStream)return w(ir("write to"));let m=s._state;if(m==="errored")return w(s._storedError);if(ke(s)||m==="closed")return w(new TypeError("The stream is closing or closed and cannot be written to"));if(m==="erroring")return w(s._storedError);let b=ru(s);return gu(l,a,d),b}let po={};class qt{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!Ln(this))throw zn("abortReason");return this._abortReason}get signal(){if(!Ln(this))throw zn("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(a=void 0){if(!Ln(this))throw zn("error");this._controlledWritableStream._state==="writable"&&yo(this,a)}[Ar](a){let s=this._abortAlgorithm(a);return Nr(this),s}[Wt](){nt(this)}}Object.defineProperties(qt.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(qt.prototype,t.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function Ln(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")?!1:e instanceof qt}function bo(e,a,s,l,d,m,b,R){a._controlledWritableStream=e,e._writableStreamController=a,a._queue=void 0,a._queueTotalSize=void 0,nt(a),a._abortReason=void 0,a._abortController=eu(),a._started=!1,a._strategySizeAlgorithm=R,a._strategyHWM=b,a._writeAlgorithm=l,a._closeAlgorithm=d,a._abortAlgorithm=m;let A=Un(a);qn(e,A);let k=s(),F=y(k);E(F,()=>{a._started=!0,jr(a)},x=>{a._started=!0,xn(e,x)})}function mu(e,a,s,l){let d=Object.create(qt.prototype),m=()=>{},b=()=>y(void 0),R=()=>y(void 0),A=()=>y(void 0);a.start!==void 0&&(m=()=>a.start(d)),a.write!==void 0&&(b=k=>a.write(k,d)),a.close!==void 0&&(R=()=>a.close()),a.abort!==void 0&&(A=k=>a.abort(k)),bo(e,d,m,b,R,A,s,l)}function Nr(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function pu(e){Pn(e,po,0),jr(e)}function bu(e,a){try{return e._strategySizeAlgorithm(a)}catch(s){return In(e,s),1}}function go(e){return e._strategyHWM-e._queueTotalSize}function gu(e,a,s){try{Pn(e,a,s)}catch(d){In(e,d);return}let l=e._controlledWritableStream;if(!ke(l)&&l._state==="writable"){let d=Un(e);qn(l,d)}jr(e)}function jr(e){let a=e._controlledWritableStream;if(!e._started||a._inFlightWriteRequest!==void 0)return;if(a._state==="erroring"){Mn(a);return}if(e._queue.length===0)return;let l=Ls(e);l===po?yu(e):wu(e,l)}function In(e,a){e._controlledWritableStream._state==="writable"&&yo(e,a)}function yu(e){let a=e._controlledWritableStream;uu(a),En(e);let s=e._closeAlgorithm();Nr(e),E(s,()=>{ou(a)},l=>{iu(a,l)})}function wu(e,a){let s=e._controlledWritableStream;lu(s);let l=e._writeAlgorithm(a);E(l,()=>{nu(s);let d=s._state;if(En(e),!ke(s)&&d==="writable"){let m=Un(e);qn(s,m)}jr(e)},d=>{s._state==="writable"&&Nr(e),au(s,d)})}function Un(e){return go(e)<=0}function yo(e,a){let s=e._controlledWritableStream;Nr(e),Bn(s,a)}function Hr(e){return new TypeError(`WritableStream.prototype.${e} can only be used on a WritableStream`)}function zn(e){return new TypeError(`WritableStreamDefaultController.prototype.${e} can only be used on a WritableStreamDefaultController`)}function St(e){return new TypeError(`WritableStreamDefaultWriter.prototype.${e} can only be used on a WritableStreamDefaultWriter`)}function ir(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function $r(e){e._closedPromise=v((a,s)=>{e._closedPromise_resolve=a,e._closedPromise_reject=s,e._closedPromiseState="pending"})}function wo(e,a){$r(e),Nn(e,a)}function Su(e){$r(e),So(e)}function Nn(e,a){e._closedPromise_reject!==void 0&&(I(e._closedPromise),e._closedPromise_reject(a),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function _u(e,a){wo(e,a)}function So(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function Yr(e){e._readyPromise=v((a,s)=>{e._readyPromise_resolve=a,e._readyPromise_reject=s}),e._readyPromiseState="pending"}function jn(e,a){Yr(e),vo(e,a)}function _o(e){Yr(e),Hn(e)}function vo(e,a){e._readyPromise_reject!==void 0&&(I(e._readyPromise),e._readyPromise_reject(a),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function vu(e){Yr(e)}function Ru(e,a){jn(e,a)}function Hn(e){e._readyPromise_resolve!==void 0&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}let Ro=typeof DOMException<"u"?DOMException:void 0;function Tu(e){if(!(typeof e=="function"||typeof e=="object"))return!1;try{return new e,!0}catch{return!1}}function Cu(){let e=function(s,l){this.message=s||"",this.name=l||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}let Eu=Tu(Ro)?Ro:Cu();function To(e,a,s,l,d,m){let b=De(e),R=so(a);e._disturbed=!0;let A=!1,k=y(void 0);return v((F,x)=>{let Q;if(m!==void 0){if(Q=()=>{let C=new Eu("Aborted","AbortError"),W=[];l||W.push(()=>a._state==="writable"?Ur(a,C):y(void 0)),d||W.push(()=>e._state==="readable"?Te(e,C):y(void 0)),le(()=>Promise.all(W.map(U=>U())),!0,C)},m.aborted){Q();return}m.addEventListener("abort",Q)}function Ce(){return v((C,W)=>{function U(pe){pe?C():S(Ut(),U,W)}U(!1)})}function Ut(){return A?y(!0):S(R._readyPromise,()=>v((C,W)=>{Kt(b,{_chunkSteps:U=>{k=S(mo(R,U),void 0,n),C(!1)},_closeSteps:()=>C(!0),_errorSteps:W})}))}if(Ne(e,b._closedPromise,C=>{l?we(!0,C):le(()=>Ur(a,C),!0,C)}),Ne(a,R._closedPromise,C=>{d?we(!0,C):le(()=>Te(e,C),!0,C)}),ae(e,b._closedPromise,()=>{s?we():le(()=>du(R))}),ke(a)||a._state==="closed"){let C=new TypeError("the destination writable stream closed before all data could be piped to it");d?we(!0,C):le(()=>Te(e,C),!0,C)}I(Ce());function ut(){let C=k;return S(k,()=>C!==k?ut():void 0)}function Ne(C,W,U){C._state==="errored"?U(C._storedError):g(W,U)}function ae(C,W,U){C._state==="closed"?U():T(W,U)}function le(C,W,U){if(A)return;A=!0,a._state==="writable"&&!ke(a)?T(ut(),pe):pe();function pe(){E(C(),()=>je(W,U),zt=>je(!0,zt))}}function we(C,W){A||(A=!0,a._state==="writable"&&!ke(a)?T(ut(),()=>je(C,W)):je(C,W))}function je(C,W){ho(R),ie(b),m!==void 0&&m.removeEventListener("abort",Q),C?x(W):F(void 0)}})}class Lt{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Vr(this))throw Xr("desiredSize");return $n(this)}close(){if(!Vr(this))throw Xr("close");if(!It(this))throw new TypeError("The stream is not in a state that permits close");ur(this)}enqueue(a=void 0){if(!Vr(this))throw Xr("enqueue");if(!It(this))throw new TypeError("The stream is not in a state that permits enqueue");return Gr(this,a)}error(a=void 0){if(!Vr(this))throw Xr("error");at(this,a)}[pt](a){nt(this);let s=this._cancelAlgorithm(a);return Qr(this),s}[Oe](a){let s=this._controlledReadableStream;if(this._queue.length>0){let l=En(this);this._closeRequested&&this._queue.length===0?(Qr(this),lr(s)):sr(this),a._chunkSteps(l)}else Je(s,a),sr(this)}}Object.defineProperties(Lt.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Lt.prototype,t.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function Vr(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")?!1:e instanceof Lt}function sr(e){if(!Co(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let s=e._pullAlgorithm();E(s,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,sr(e))},l=>{at(e,l)})}function Co(e){let a=e._controlledReadableStream;return!It(e)||!e._started?!1:!!(st(a)&&Ze(a)>0||$n(e)>0)}function Qr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function ur(e){if(!It(e))return;let a=e._controlledReadableStream;e._closeRequested=!0,e._queue.length===0&&(Qr(e),lr(a))}function Gr(e,a){if(!It(e))return;let s=e._controlledReadableStream;if(st(s)&&Ze(s)>0)We(s,a,!1);else{let l;try{l=e._strategySizeAlgorithm(a)}catch(d){throw at(e,d),d}try{Pn(e,a,l)}catch(d){throw at(e,d),d}}sr(e)}function at(e,a){let s=e._controlledReadableStream;s._state==="readable"&&(nt(e),Qr(e),Oo(s,a))}function $n(e){let a=e._controlledReadableStream._state;return a==="errored"?null:a==="closed"?0:e._strategyHWM-e._queueTotalSize}function Pu(e){return!Co(e)}function It(e){let a=e._controlledReadableStream._state;return!e._closeRequested&&a==="readable"}function Eo(e,a,s,l,d,m,b){a._controlledReadableStream=e,a._queue=void 0,a._queueTotalSize=void 0,nt(a),a._started=!1,a._closeRequested=!1,a._pullAgain=!1,a._pulling=!1,a._strategySizeAlgorithm=b,a._strategyHWM=m,a._pullAlgorithm=l,a._cancelAlgorithm=d,e._readableStreamController=a;let R=s();E(y(R),()=>{a._started=!0,sr(a)},A=>{at(a,A)})}function Au(e,a,s,l){let d=Object.create(Lt.prototype),m=()=>{},b=()=>y(void 0),R=()=>y(void 0);a.start!==void 0&&(m=()=>a.start(d)),a.pull!==void 0&&(b=()=>a.pull(d)),a.cancel!==void 0&&(R=A=>a.cancel(A)),Eo(e,d,m,b,R,s,l)}function Xr(e){return new TypeError(`ReadableStreamDefaultController.prototype.${e} can only be used on a ReadableStreamDefaultController`)}function Ou(e,a){return bt(e._readableStreamController)?Wu(e):Du(e)}function Du(e,a){let s=De(e),l=!1,d=!1,m=!1,b=!1,R,A,k,F,x,Q=v(ae=>{x=ae});function Ce(){return l?(d=!0,y(void 0)):(l=!0,Kt(s,{_chunkSteps:le=>{P(()=>{d=!1;let we=le,je=le;m||Gr(k._readableStreamController,we),b||Gr(F._readableStreamController,je),l=!1,d&&Ce()})},_closeSteps:()=>{l=!1,m||ur(k._readableStreamController),b||ur(F._readableStreamController),(!m||!b)&&x(void 0)},_errorSteps:()=>{l=!1}}),y(void 0))}function Ut(ae){if(m=!0,R=ae,b){let le=Jt([R,A]),we=Te(e,le);x(we)}return Q}function ut(ae){if(b=!0,A=ae,m){let le=Jt([R,A]),we=Te(e,le);x(we)}return Q}function Ne(){}return k=Yn(Ne,Ce,Ut),F=Yn(Ne,Ce,ut),g(s._closedPromise,ae=>{at(k._readableStreamController,ae),at(F._readableStreamController,ae),(!m||!b)&&x(void 0)}),[k,F]}function Wu(e){let a=De(e),s=!1,l=!1,d=!1,m=!1,b=!1,R,A,k,F,x,Q=v(C=>{x=C});function Ce(C){g(C._closedPromise,W=>{C===a&&(Re(k._readableStreamController,W),Re(F._readableStreamController,W),(!m||!b)&&x(void 0))})}function Ut(){yt(a)&&(ie(a),a=De(e),Ce(a)),Kt(a,{_chunkSteps:W=>{P(()=>{l=!1,d=!1;let U=W,pe=W;if(!m&&!b)try{pe=Ya(W)}catch(zt){Re(k._readableStreamController,zt),Re(F._readableStreamController,zt),x(Te(e,zt));return}m||xr(k._readableStreamController,U),b||xr(F._readableStreamController,pe),s=!1,l?Ne():d&&ae()})},_closeSteps:()=>{s=!1,m||er(k._readableStreamController),b||er(F._readableStreamController),k._readableStreamController._pendingPullIntos.length>0&&Br(k._readableStreamController,0),F._readableStreamController._pendingPullIntos.length>0&&Br(F._readableStreamController,0),(!m||!b)&&x(void 0)},_errorSteps:()=>{s=!1}})}function ut(C,W){rt(a)&&(ie(a),a=ro(e),Ce(a));let U=W?F:k,pe=W?k:F;oo(a,C,{_chunkSteps:Nt=>{P(()=>{l=!1,d=!1;let jt=W?b:m;if(W?m:b)jt||Mr(U._readableStreamController,Nt);else{let No;try{No=Ya(Nt)}catch(Qn){Re(U._readableStreamController,Qn),Re(pe._readableStreamController,Qn),x(Te(e,Qn));return}jt||Mr(U._readableStreamController,Nt),xr(pe._readableStreamController,No)}s=!1,l?Ne():d&&ae()})},_closeSteps:Nt=>{s=!1;let jt=W?b:m,on=W?m:b;jt||er(U._readableStreamController),on||er(pe._readableStreamController),Nt!==void 0&&(jt||Mr(U._readableStreamController,Nt),!on&&pe._readableStreamController._pendingPullIntos.length>0&&Br(pe._readableStreamController,0)),(!jt||!on)&&x(void 0)},_errorSteps:()=>{s=!1}})}function Ne(){if(s)return l=!0,y(void 0);s=!0;let C=Wn(k._readableStreamController);return C===null?Ut():ut(C._view,!1),y(void 0)}function ae(){if(s)return d=!0,y(void 0);s=!0;let C=Wn(F._readableStreamController);return C===null?Ut():ut(C._view,!0),y(void 0)}function le(C){if(m=!0,R=C,b){let W=Jt([R,A]),U=Te(e,W);x(U)}return Q}function we(C){if(b=!0,A=C,m){let W=Jt([R,A]),U=Te(e,W);x(U)}return Q}function je(){}return k=Ao(je,Ne,le),F=Ao(je,ae,we),Ce(a),[k,F]}function ku(e,a){_e(e,a);let s=e,l=s?.autoAllocateChunkSize,d=s?.cancel,m=s?.pull,b=s?.start,R=s?.type;return{autoAllocateChunkSize:l===void 0?void 0:ve(l,`${a} has member 'autoAllocateChunkSize' that`),cancel:d===void 0?void 0:Fu(d,s,`${a} has member 'cancel' that`),pull:m===void 0?void 0:xu(m,s,`${a} has member 'pull' that`),start:b===void 0?void 0:Bu(b,s,`${a} has member 'start' that`),type:R===void 0?void 0:Mu(R,`${a} has member 'type' that`)}}function Fu(e,a,s){return N(e,s),l=>D(e,a,[l])}function xu(e,a,s){return N(e,s),l=>D(e,a,[l])}function Bu(e,a,s){return N(e,s),l=>q(e,a,[l])}function Mu(e,a){if(e=`${e}`,e!=="bytes")throw new TypeError(`${a} '${e}' is not a valid enumeration value for ReadableStreamType`);return e}function qu(e,a){_e(e,a);let s=e?.mode;return{mode:s===void 0?void 0:Lu(s,`${a} has member 'mode' that`)}}function Lu(e,a){if(e=`${e}`,e!=="byob")throw new TypeError(`${a} '${e}' is not a valid enumeration value for ReadableStreamReaderMode`);return e}function Iu(e,a){return _e(e,a),{preventCancel:!!e?.preventCancel}}function Po(e,a){_e(e,a);let s=e?.preventAbort,l=e?.preventCancel,d=e?.preventClose,m=e?.signal;return m!==void 0&&Uu(m,`${a} has member 'signal' that`),{preventAbort:!!s,preventCancel:!!l,preventClose:!!d,signal:m}}function Uu(e,a){if(!Js(e))throw new TypeError(`${a} is not an AbortSignal.`)}function zu(e,a){_e(e,a);let s=e?.readable;Ue(s,"readable","ReadableWritablePair"),ue(s,`${a} has member 'readable' that`);let l=e?.writable;return Ue(l,"writable","ReadableWritablePair"),io(l,`${a} has member 'writable' that`),{readable:s,writable:l}}class ot{constructor(a={},s={}){a===void 0?a=null:ne(a,"First parameter");let l=Ir(s,"Second parameter"),d=ku(a,"First parameter");if(Vn(this),d.type==="bytes"){if(l.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");let m=nr(l,0);js(this,d,m)}else{let m=Lr(l),b=nr(l,1);Au(this,d,b,m)}}get locked(){if(!it(this))throw _t("locked");return st(this)}cancel(a=void 0){return it(this)?st(this)?w(new TypeError("Cannot cancel a stream that already has a reader")):Te(this,a):w(_t("cancel"))}getReader(a=void 0){if(!it(this))throw _t("getReader");return qu(a,"First parameter").mode===void 0?De(this):ro(this)}pipeThrough(a,s={}){if(!it(this))throw _t("pipeThrough");j(a,1,"pipeThrough");let l=zu(a,"First parameter"),d=Po(s,"Second parameter");if(st(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(Mt(l.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");let m=To(this,l.writable,d.preventClose,d.preventAbort,d.preventCancel,d.signal);return I(m),l.readable}pipeTo(a,s={}){if(!it(this))return w(_t("pipeTo"));if(a===void 0)return w("Parameter 1 is required in 'pipeTo'.");if(!Bt(a))return w(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let l;try{l=Po(s,"Second parameter")}catch(d){return w(d)}return st(this)?w(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):Mt(a)?w(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):To(this,a,l.preventClose,l.preventAbort,l.preventCancel,l.signal)}tee(){if(!it(this))throw _t("tee");let a=Ou(this);return Jt(a)}values(a=void 0){if(!it(this))throw _t("values");let s=Iu(a,"First parameter");return Ms(this,s.preventCancel)}}Object.defineProperties(ot.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(ot.prototype,t.toStringTag,{value:"ReadableStream",configurable:!0}),typeof t.asyncIterator=="symbol"&&Object.defineProperty(ot.prototype,t.asyncIterator,{value:ot.prototype.values,writable:!0,configurable:!0});function Yn(e,a,s,l=1,d=()=>1){let m=Object.create(ot.prototype);Vn(m);let b=Object.create(Lt.prototype);return Eo(m,b,e,a,s,l,d),m}function Ao(e,a,s){let l=Object.create(ot.prototype);Vn(l);let d=Object.create(xt.prototype);return to(l,d,e,a,s,0,void 0),l}function Vn(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function it(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")?!1:e instanceof ot}function st(e){return e._reader!==void 0}function Te(e,a){if(e._disturbed=!0,e._state==="closed")return y(void 0);if(e._state==="errored")return w(e._storedError);lr(e);let s=e._reader;s!==void 0&&yt(s)&&(s._readIntoRequests.forEach(d=>{d._closeSteps(void 0)}),s._readIntoRequests=new J);let l=e._readableStreamController[pt](a);return O(l,n)}function lr(e){e._state="closed";let a=e._reader;a!==void 0&&(Xt(a),rt(a)&&(a._readRequests.forEach(s=>{s._closeSteps()}),a._readRequests=new J))}function Oo(e,a){e._state="errored",e._storedError=a;let s=e._reader;s!==void 0&&(Le(s,a),rt(s)?(s._readRequests.forEach(l=>{l._errorSteps(a)}),s._readRequests=new J):(s._readIntoRequests.forEach(l=>{l._errorSteps(a)}),s._readIntoRequests=new J))}function _t(e){return new TypeError(`ReadableStream.prototype.${e} can only be used on a ReadableStream`)}function Do(e,a){_e(e,a);let s=e?.highWaterMark;return Ue(s,"highWaterMark","QueuingStrategyInit"),{highWaterMark:ze(s)}}let Wo=e=>e.byteLength;Object.defineProperty(Wo,"name",{value:"size",configurable:!0});class Kr{constructor(a){j(a,1,"ByteLengthQueuingStrategy"),a=Do(a,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=a.highWaterMark}get highWaterMark(){if(!Fo(this))throw ko("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!Fo(this))throw ko("size");return Wo}}Object.defineProperties(Kr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Kr.prototype,t.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function ko(e){return new TypeError(`ByteLengthQueuingStrategy.prototype.${e} can only be used on a ByteLengthQueuingStrategy`)}function Fo(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")?!1:e instanceof Kr}let xo=()=>1;Object.defineProperty(xo,"name",{value:"size",configurable:!0});class Jr{constructor(a){j(a,1,"CountQueuingStrategy"),a=Do(a,"First parameter"),this._countQueuingStrategyHighWaterMark=a.highWaterMark}get highWaterMark(){if(!Mo(this))throw Bo("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!Mo(this))throw Bo("size");return xo}}Object.defineProperties(Jr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Jr.prototype,t.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function Bo(e){return new TypeError(`CountQueuingStrategy.prototype.${e} can only be used on a CountQueuingStrategy`)}function Mo(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")?!1:e instanceof Jr}function Nu(e,a){_e(e,a);let s=e?.flush,l=e?.readableType,d=e?.start,m=e?.transform,b=e?.writableType;return{flush:s===void 0?void 0:ju(s,e,`${a} has member 'flush' that`),readableType:l,start:d===void 0?void 0:Hu(d,e,`${a} has member 'start' that`),transform:m===void 0?void 0:$u(m,e,`${a} has member 'transform' that`),writableType:b}}function ju(e,a,s){return N(e,s),l=>D(e,a,[l])}function Hu(e,a,s){return N(e,s),l=>q(e,a,[l])}function $u(e,a,s){return N(e,s),(l,d)=>D(e,a,[l,d])}class Zr{constructor(a={},s={},l={}){a===void 0&&(a=null);let d=Ir(s,"Second parameter"),m=Ir(l,"Third parameter"),b=Nu(a,"First parameter");if(b.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(b.writableType!==void 0)throw new RangeError("Invalid writableType specified");let R=nr(m,0),A=Lr(m),k=nr(d,1),F=Lr(d),x,Q=v(Ce=>{x=Ce});Yu(this,Q,k,F,R,A),Qu(this,b),b.start!==void 0?x(b.start(this._transformStreamController)):x(void 0)}get readable(){if(!qo(this))throw zo("readable");return this._readable}get writable(){if(!qo(this))throw zo("writable");return this._writable}}Object.defineProperties(Zr.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Zr.prototype,t.toStringTag,{value:"TransformStream",configurable:!0});function Yu(e,a,s,l,d,m){function b(){return a}function R(Q){return Ku(e,Q)}function A(Q){return Ju(e,Q)}function k(){return Zu(e)}e._writable=tu(b,R,k,A,s,l);function F(){return el(e)}function x(Q){return tn(e,Q),y(void 0)}e._readable=Yn(b,F,x,d,m),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,rn(e,!0),e._transformStreamController=void 0}function qo(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")?!1:e instanceof Zr}function en(e,a){at(e._readable._readableStreamController,a),tn(e,a)}function tn(e,a){Lo(e._transformStreamController),In(e._writable._writableStreamController,a),e._backpressure&&rn(e,!1)}function rn(e,a){e._backpressureChangePromise!==void 0&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=v(s=>{e._backpressureChangePromise_resolve=s}),e._backpressure=a}class fr{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!nn(this))throw an("desiredSize");let a=this._controlledTransformStream._readable._readableStreamController;return $n(a)}enqueue(a=void 0){if(!nn(this))throw an("enqueue");Io(this,a)}error(a=void 0){if(!nn(this))throw an("error");Gu(this,a)}terminate(){if(!nn(this))throw an("terminate");Xu(this)}}Object.defineProperties(fr.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(fr.prototype,t.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function nn(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")?!1:e instanceof fr}function Vu(e,a,s,l){a._controlledTransformStream=e,e._transformStreamController=a,a._transformAlgorithm=s,a._flushAlgorithm=l}function Qu(e,a){let s=Object.create(fr.prototype),l=m=>{try{return Io(s,m),y(void 0)}catch(b){return w(b)}},d=()=>y(void 0);a.transform!==void 0&&(l=m=>a.transform(m,s)),a.flush!==void 0&&(d=()=>a.flush(s)),Vu(e,s,l,d)}function Lo(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0}function Io(e,a){let s=e._controlledTransformStream,l=s._readable._readableStreamController;if(!It(l))throw new TypeError("Readable side is not in a state that permits enqueue");try{Gr(l,a)}catch(m){throw tn(s,m),s._readable._storedError}Pu(l)!==s._backpressure&&rn(s,!0)}function Gu(e,a){en(e._controlledTransformStream,a)}function Uo(e,a){let s=e._transformAlgorithm(a);return O(s,void 0,l=>{throw en(e._controlledTransformStream,l),l})}function Xu(e){let a=e._controlledTransformStream,s=a._readable._readableStreamController;ur(s);let l=new TypeError("TransformStream terminated");tn(a,l)}function Ku(e,a){let s=e._transformStreamController;if(e._backpressure){let l=e._backpressureChangePromise;return O(l,()=>{let d=e._writable;if(d._state==="erroring")throw d._storedError;return Uo(s,a)})}return Uo(s,a)}function Ju(e,a){return en(e,a),y(void 0)}function Zu(e){let a=e._readable,s=e._transformStreamController,l=s._flushAlgorithm();return Lo(s),O(l,()=>{if(a._state==="errored")throw a._storedError;ur(a._readableStreamController)},d=>{throw en(e,d),a._storedError})}function el(e){return rn(e,!1),e._backpressureChangePromise}function an(e){return new TypeError(`TransformStreamDefaultController.prototype.${e} can only be used on a TransformStreamDefaultController`)}function zo(e){return new TypeError(`TransformStream.prototype.${e} can only be used on a TransformStream`)}r.ByteLengthQueuingStrategy=Kr,r.CountQueuingStrategy=Jr,r.ReadableByteStreamController=xt,r.ReadableStream=ot,r.ReadableStreamBYOBReader=rr,r.ReadableStreamBYOBRequest=Zt,r.ReadableStreamDefaultController=Lt,r.ReadableStreamDefaultReader=tt,r.TransformStream=Zr,r.TransformStreamDefaultController=fr,r.WritableStream=ar,r.WritableStreamDefaultController=qt,r.WritableStreamDefaultWriter=or,Object.defineProperty(r,"__esModule",{value:!0})})});var Oi=lt(()=>{if(!globalThis.ReadableStream)try{let r=require("node:process"),{emitWarning:t}=r;try{r.emitWarning=()=>{},Object.assign(globalThis,require("node:stream/web")),r.emitWarning=t}catch(n){throw r.emitWarning=t,n}}catch{Object.assign(globalThis,Ai())}try{let{Blob:r}=require("buffer");r&&!r.prototype.stream&&(r.prototype.stream=function(n){let o=0,i=this;return new ReadableStream({type:"bytes",async pull(u){let h=await i.slice(o,Math.min(i.size,o+65536)).arrayBuffer();o+=h.byteLength,u.enqueue(new Uint8Array(h)),o===i.size&&u.close()}})})}catch{}});async function*ua(r,t=!0){for(let n of r)if("stream"in n)yield*n.stream();else if(ArrayBuffer.isView(n))if(t){let o=n.byteOffset,i=n.byteOffset+n.byteLength;for(;o!==i;){let u=Math.min(i-o,Di),f=n.buffer.slice(o,o+u);o+=f.byteLength,yield new Uint8Array(f)}}else yield n;else{let o=0,i=n;for(;o!==i.size;){let f=await i.slice(o,Math.min(i.size,o+Di)).arrayBuffer();o+=f.byteLength,yield new Uint8Array(f)}}}var wd,Di,Wi,Ll,Ye,br=dr(()=>{wd=Ee(Oi(),1);Di=65536;Wi=class la{#e=[];#t="";#r=0;#n="transparent";constructor(t=[],n={}){if(typeof t!="object"||t===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(typeof t[Symbol.iterator]!="function")throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof n!="object"&&typeof n!="function")throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");n===null&&(n={});let o=new TextEncoder;for(let u of t){let f;ArrayBuffer.isView(u)?f=new Uint8Array(u.buffer.slice(u.byteOffset,u.byteOffset+u.byteLength)):u instanceof ArrayBuffer?f=new Uint8Array(u.slice(0)):u instanceof la?f=u:f=o.encode(`${u}`);let h=ArrayBuffer.isView(f)?f.byteLength:f.size;h&&(this.#r+=h,this.#e.push(f))}this.#n=`${n.endings===void 0?"transparent":n.endings}`;let i=n.type===void 0?"":String(n.type);this.#t=/^[\x20-\x7E]*$/.test(i)?i:""}get size(){return this.#r}get type(){return this.#t}async text(){let t=new TextDecoder,n="";for await(let o of ua(this.#e,!1))n+=t.decode(o,{stream:!0});return n+=t.decode(),n}async arrayBuffer(){let t=new Uint8Array(this.size),n=0;for await(let o of ua(this.#e,!1))t.set(o,n),n+=o.length;return t.buffer}stream(){let t=ua(this.#e,!0);return new globalThis.ReadableStream({type:"bytes",async pull(n){let o=await t.next();o.done?n.close():n.enqueue(o.value)},async cancel(){await t.return()}})}slice(t=0,n=this.size,o=""){let{size:i}=this,u=t<0?Math.max(i+t,0):Math.min(t,i),f=n<0?Math.max(i+n,0):Math.min(n,i),h=Math.max(f-u,0),p=this.#e,c=[],_=0;for(let y of p){if(_>=h)break;let w=ArrayBuffer.isView(y)?y.byteLength:y.size;if(u&&w<=u)u-=w,f-=w;else{let S;ArrayBuffer.isView(y)?(S=y.subarray(u,Math.min(w,f)),_+=S.byteLength):(S=y.slice(u,Math.min(w,f)),_+=S.size),f-=w,c.push(S),u=0}}let v=new la([],{type:String(o).toLowerCase()});return v.#r=h,v.#e=c,v}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](t){return t&&typeof t=="object"&&typeof t.constructor=="function"&&(typeof t.stream=="function"||typeof t.arrayBuffer=="function")&&/^(Blob|File)$/.test(t[Symbol.toStringTag])}};Object.defineProperties(Wi.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});Ll=Wi,Ye=Ll});var Il,Ul,Ht,fa=dr(()=>{br();Il=class extends Ye{#e=0;#t="";constructor(t,n,o={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(t,o),o===null&&(o={});let i=o.lastModified===void 0?Date.now():Number(o.lastModified);Number.isNaN(i)||(this.#e=i),this.#t=String(n)}get name(){return this.#t}get lastModified(){return this.#e}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](t){return!!t&&t instanceof Ye&&/^(File)$/.test(t[Symbol.toStringTag])}},Ul=Il,Ht=Ul});function xi(r,t=Ye){var n=`${ki()}${ki()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),o=[],i=`--${n}\r
Content-Disposition: form-data; name="`;return r.forEach((u,f)=>typeof u=="string"?o.push(i+da(f)+`"\r
\r
${u.replace(/\r(?!\n)|(?<!\r)\n/g,`\r
`)}\r
`):o.push(i+da(f)+`"; filename="${da(u.name,1)}"\r
Content-Type: ${u.type||"application/octet-stream"}\r
\r
`,u,`\r
`)),o.push(`--${n}--`),new t(o,{type:"multipart/form-data; boundary="+n})}var gr,zl,Nl,ki,jl,Fi,da,Tt,Ct,hn=dr(()=>{br();fa();({toStringTag:gr,iterator:zl,hasInstance:Nl}=Symbol),ki=Math.random,jl="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),Fi=(r,t,n)=>(r+="",/^(Blob|File)$/.test(t&&t[gr])?[(n=n!==void 0?n+"":t[gr]=="File"?t.name:"blob",r),t.name!==n||t[gr]=="blob"?new Ht([t],n,t):t]:[r,t+""]),da=(r,t)=>(t?r:r.replace(/\r?\n|\r/g,`\r
`)).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),Tt=(r,t,n)=>{if(t.length<n)throw new TypeError(`Failed to execute '${r}' on 'FormData': ${n} arguments required, but only ${t.length} present.`)},Ct=class{#e=[];constructor(...t){if(t.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[gr](){return"FormData"}[zl](){return this.entries()}static[Nl](t){return t&&typeof t=="object"&&t[gr]==="FormData"&&!jl.some(n=>typeof t[n]!="function")}append(...t){Tt("append",arguments,2),this.#e.push(Fi(...t))}delete(t){Tt("delete",arguments,1),t+="",this.#e=this.#e.filter(([n])=>n!==t)}get(t){Tt("get",arguments,1),t+="";for(var n=this.#e,o=n.length,i=0;i<o;i++)if(n[i][0]===t)return n[i][1];return null}getAll(t,n){return Tt("getAll",arguments,1),n=[],t+="",this.#e.forEach(o=>o[0]===t&&n.push(o[1])),n}has(t){return Tt("has",arguments,1),t+="",this.#e.some(n=>n[0]===t)}forEach(t,n){Tt("forEach",arguments,1);for(var[o,i]of this)t.call(n,i,o,this)}set(...t){Tt("set",arguments,2);var n=[],o=!0;t=Fi(...t),this.#e.forEach(i=>{i[0]===t[0]?o&&(o=!n.push(t)):n.push(i)}),o&&n.push(t),this.#e=n}*entries(){yield*this.#e}*keys(){for(var[t]of this)yield t}*values(){for(var[,t]of this)yield t}}});var Li=lt((kd,qi)=>{if(!globalThis.DOMException)try{let{MessageChannel:r}=require("worker_threads"),t=new r().port1,n=new ArrayBuffer;t.postMessage(n,[n,n])}catch(r){r.constructor.name==="DOMException"&&(globalThis.DOMException=r.constructor)}qi.exports=globalThis.DOMException});var wr,Ii,Hl,pn,ha=dr(()=>{wr=require("node:fs"),Ii=Ee(Li(),1);fa();br();({stat:Hl}=wr.promises),pn=class{#e;#t;constructor(t){this.#e=t.path,this.#t=t.start,this.size=t.size,this.lastModified=t.lastModified,this.originalSize=t.originalSize===void 0?t.size:t.originalSize}slice(t,n){return new pn({path:this.#e,lastModified:this.lastModified,originalSize:this.originalSize,size:n-t,start:this.#t+t})}async*stream(){let{mtimeMs:t,size:n}=await Hl(this.#e);if(t>this.lastModified||this.originalSize!==n)throw new Ii.default("The requested file could not be read, typically due to permission problems that have occurred after a reference to a file was acquired.","NotReadableError");yield*(0,wr.createReadStream)(this.#e,{start:this.#t,end:this.#t+this.size-1})}get[Symbol.toStringTag](){return"Blob"}}});var zi={};jo(zi,{toFormData:()=>Kl});function Xl(r){let t=r.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!t)return;let n=t[2]||t[3]||"",o=n.slice(n.lastIndexOf("\\")+1);return o=o.replace(/%22/g,'"'),o=o.replace(/&#(\d{4});/g,(i,u)=>String.fromCharCode(u)),o}async function Kl(r,t){if(!/multipart/i.test(t))throw new TypeError("Failed to fetch");let n=t.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!n)throw new TypeError("no or bad content-type header, no multipart boundary");let o=new ma(n[1]||n[2]),i,u,f,h,p,c,_=[],v=new Ct,y=g=>{f+=T.decode(g,{stream:!0})},w=g=>{_.push(g)},S=()=>{let g=new Ht(_,c,{type:p});v.append(h,g)},E=()=>{v.append(h,f)},T=new TextDecoder("utf-8");T.decode(),o.onPartBegin=function(){o.onPartData=y,o.onPartEnd=E,i="",u="",f="",h="",p="",c=null,_.length=0},o.onHeaderField=function(g){i+=T.decode(g,{stream:!0})},o.onHeaderValue=function(g){u+=T.decode(g,{stream:!0})},o.onHeaderEnd=function(){if(u+=T.decode(),i=i.toLowerCase(),i==="content-disposition"){let g=u.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);g&&(h=g[2]||g[3]||""),c=Xl(u),c&&(o.onPartData=w,o.onPartEnd=S)}else i==="content-type"&&(p=u);u="",i=""};for await(let g of r)o.write(g);return o.end(),v}var xe,z,Ui,ft,bn,gn,$l,Sr,Yl,Vl,Ql,Gl,Et,ma,Ni=dr(()=>{ha();hn();xe=0,z={START_BOUNDARY:xe++,HEADER_FIELD_START:xe++,HEADER_FIELD:xe++,HEADER_VALUE_START:xe++,HEADER_VALUE:xe++,HEADER_VALUE_ALMOST_DONE:xe++,HEADERS_ALMOST_DONE:xe++,PART_DATA_START:xe++,PART_DATA:xe++,END:xe++},Ui=1,ft={PART_BOUNDARY:Ui,LAST_BOUNDARY:Ui*=2},bn=10,gn=13,$l=32,Sr=45,Yl=58,Vl=97,Ql=122,Gl=r=>r|32,Et=()=>{},ma=class{constructor(t){this.index=0,this.flags=0,this.onHeaderEnd=Et,this.onHeaderField=Et,this.onHeadersEnd=Et,this.onHeaderValue=Et,this.onPartBegin=Et,this.onPartData=Et,this.onPartEnd=Et,this.boundaryChars={},t=`\r
--`+t;let n=new Uint8Array(t.length);for(let o=0;o<t.length;o++)n[o]=t.charCodeAt(o),this.boundaryChars[n[o]]=!0;this.boundary=n,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=z.START_BOUNDARY}write(t){let n=0,o=t.length,i=this.index,{lookbehind:u,boundary:f,boundaryChars:h,index:p,state:c,flags:_}=this,v=this.boundary.length,y=v-1,w=t.length,S,E,T=P=>{this[P+"Mark"]=n},g=P=>{delete this[P+"Mark"]},O=(P,q,D,ee)=>{(q===void 0||q!==D)&&this[P](ee&&ee.subarray(q,D))},I=(P,q)=>{let D=P+"Mark";D in this&&(q?(O(P,this[D],n,t),delete this[D]):(O(P,this[D],t.length,t),this[D]=0))};for(n=0;n<o;n++)switch(S=t[n],c){case z.START_BOUNDARY:if(p===f.length-2){if(S===Sr)_|=ft.LAST_BOUNDARY;else if(S!==gn)return;p++;break}else if(p-1===f.length-2){if(_&ft.LAST_BOUNDARY&&S===Sr)c=z.END,_=0;else if(!(_&ft.LAST_BOUNDARY)&&S===bn)p=0,O("onPartBegin"),c=z.HEADER_FIELD_START;else return;break}S!==f[p+2]&&(p=-2),S===f[p+2]&&p++;break;case z.HEADER_FIELD_START:c=z.HEADER_FIELD,T("onHeaderField"),p=0;case z.HEADER_FIELD:if(S===gn){g("onHeaderField"),c=z.HEADERS_ALMOST_DONE;break}if(p++,S===Sr)break;if(S===Yl){if(p===1)return;I("onHeaderField",!0),c=z.HEADER_VALUE_START;break}if(E=Gl(S),E<Vl||E>Ql)return;break;case z.HEADER_VALUE_START:if(S===$l)break;T("onHeaderValue"),c=z.HEADER_VALUE;case z.HEADER_VALUE:S===gn&&(I("onHeaderValue",!0),O("onHeaderEnd"),c=z.HEADER_VALUE_ALMOST_DONE);break;case z.HEADER_VALUE_ALMOST_DONE:if(S!==bn)return;c=z.HEADER_FIELD_START;break;case z.HEADERS_ALMOST_DONE:if(S!==bn)return;O("onHeadersEnd"),c=z.PART_DATA_START;break;case z.PART_DATA_START:c=z.PART_DATA,T("onPartData");case z.PART_DATA:if(i=p,p===0){for(n+=y;n<w&&!(t[n]in h);)n+=v;n-=y,S=t[n]}if(p<f.length)f[p]===S?(p===0&&I("onPartData",!0),p++):p=0;else if(p===f.length)p++,S===gn?_|=ft.PART_BOUNDARY:S===Sr?_|=ft.LAST_BOUNDARY:p=0;else if(p-1===f.length)if(_&ft.PART_BOUNDARY){if(p=0,S===bn){_&=~ft.PART_BOUNDARY,O("onPartEnd"),O("onPartBegin"),c=z.HEADER_FIELD_START;break}}else _&ft.LAST_BOUNDARY&&S===Sr?(O("onPartEnd"),c=z.END,_=0):p=0;if(p>0)u[p-1]=S;else if(i>0){let P=new Uint8Array(u.buffer,u.byteOffset,u.byteLength);O("onPartData",0,i,P),i=0,T("onPartData"),n--}break;case z.END:break;default:throw new Error(`Unexpected state entered: ${c}`)}I("onHeaderField"),I("onHeaderValue"),I("onPartData"),this.index=p,this.state=c,this.flags=_}end(){if(this.state===z.HEADER_FIELD_START&&this.index===0||this.state===z.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==z.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}}});var od={};jo(od,{default:()=>Bs});module.exports=il(od);var xs=require("@raycast/api");var fs=Ee(un());var ss=require("react");var L=require("react");function ci(r,t,n,o){function i(u){return u instanceof n?u:new n(function(f){f(u)})}return new(n||(n=Promise))(function(u,f){function h(_){try{c(o.next(_))}catch(v){f(v)}}function p(_){try{c(o.throw(_))}catch(v){f(v)}}function c(_){_.done?u(_.value):i(_.value).then(h,p)}c((o=o.apply(r,t||[])).next())})}function hi(r,t){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},o,i,u,f;return f={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function h(c){return function(_){return p([c,_])}}function p(c){if(o)throw new TypeError("Generator is already executing.");for(;n;)try{if(o=1,i&&(u=c[0]&2?i.return:c[0]?i.throw||((u=i.return)&&u.call(i),0):i.next)&&!(u=u.call(i,c[1])).done)return u;switch(i=0,u&&(c=[c[0]&2,u.value]),c[0]){case 0:case 1:u=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!u||c[1]>u[0]&&c[1]<u[3])){n.label=c[1];break}if(c[0]===6&&n.label<u[1]){n.label=u[1],u=c;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(c);break}u[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(r,n)}catch(_){c=[6,_],i=0}finally{o=u=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var Fe=function(){},te=Fe(),cr=Object,oe=function(r){return r===te},Rt=function(r){return typeof r=="function"},$e=function(r,t){return cr.assign({},r,t)},aa="undefined",oa=function(){return typeof window!=aa},bl=function(){return typeof document!=aa},gl=function(){return oa()&&typeof window.requestAnimationFrame!=aa},ln=new WeakMap,yl=0,pr=function(r){var t=typeof r,n=r&&r.constructor,o=n==Date,i,u;if(cr(r)===r&&!o&&n!=RegExp){if(i=ln.get(r),i)return i;if(i=++yl+"~",ln.set(r,i),n==Array){for(i="@",u=0;u<r.length;u++)i+=pr(r[u])+",";ln.set(r,i)}if(n==cr){i="#";for(var f=cr.keys(r).sort();!oe(u=f.pop());)oe(r[u])||(i+=u+":"+pr(r[u])+",");ln.set(r,i)}}else i=o?r.toJSON():t=="symbol"?r.toString():t=="string"?JSON.stringify(r):""+r;return i},Zn=!0,wl=function(){return Zn},mi=oa(),ia=bl(),ea=mi&&window.addEventListener?window.addEventListener.bind(window):Fe,Sl=ia?document.addEventListener.bind(document):Fe,ta=mi&&window.removeEventListener?window.removeEventListener.bind(window):Fe,_l=ia?document.removeEventListener.bind(document):Fe,vl=function(){var r=ia&&document.visibilityState;return oe(r)||r!=="hidden"},Rl=function(r){return Sl("visibilitychange",r),ea("focus",r),function(){_l("visibilitychange",r),ta("focus",r)}},Tl=function(r){var t=function(){Zn=!0,r()},n=function(){Zn=!1};return ea("online",t),ea("offline",n),function(){ta("online",t),ta("offline",n)}},Cl={isOnline:wl,isVisible:vl},El={initFocus:Rl,initReconnect:Tl},fn=!oa()||"Deno"in window,Pl=function(r){return gl()?window.requestAnimationFrame(r):setTimeout(r,1)},hr=fn?L.useEffect:L.useLayoutEffect,Kn=typeof navigator<"u"&&navigator.connection,li=!fn&&Kn&&(["slow-2g","2g"].includes(Kn.effectiveType)||Kn.saveData),pi=function(r){if(Rt(r))try{r=r()}catch{r=""}var t=[].concat(r);r=typeof r=="string"?r:(Array.isArray(r)?r.length:r)?pr(r):"";var n=r?"$swr$"+r:"";return[r,t,n]},vt=new WeakMap,bi=0,gi=1,yi=2,mr=function(r,t,n,o,i,u,f){f===void 0&&(f=!0);var h=vt.get(r),p=h[0],c=h[1],_=h[3],v=p[t],y=c[t];if(f&&y)for(var w=0;w<y.length;++w)y[w](n,o,i);return u&&(delete _[t],v&&v[0])?v[0](yi).then(function(){return r.get(t)}):r.get(t)},Al=0,ra=function(){return++Al},wi=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return ci(void 0,void 0,void 0,function(){var n,o,i,u,f,h,p,c,_,v,y,w,S,E,T,g,O,I,P,q;return hi(this,function(D){switch(D.label){case 0:if(n=r[0],o=r[1],i=r[2],u=r[3],f=typeof u=="boolean"?{revalidate:u}:u||{},h=oe(f.populateCache)?!0:f.populateCache,p=f.revalidate!==!1,c=f.rollbackOnError!==!1,_=f.optimisticData,v=pi(o),y=v[0],w=v[2],!y)return[2];if(S=vt.get(n),E=S[2],r.length<3)return[2,mr(n,y,n.get(y),te,te,p,!0)];if(T=i,O=ra(),E[y]=[O,0],I=!oe(_),P=n.get(y),I&&(n.set(y,_),mr(n,y,_)),Rt(T))try{T=T(n.get(y))}catch(ee){g=ee}return T&&Rt(T.then)?[4,T.catch(function(ee){g=ee})]:[3,2];case 1:if(T=D.sent(),O!==E[y][0]){if(g)throw g;return[2,T]}else g&&I&&c&&(h=!0,T=P,n.set(y,P));D.label=2;case 2:return h&&(g||(Rt(h)&&(T=h(T,P)),n.set(y,T)),n.set(w,$e(n.get(w),{error:g}))),E[y][1]=ra(),[4,mr(n,y,T,g,te,p,!!h)];case 3:if(q=D.sent(),g)throw g;return[2,h?q:T]}})})},fi=function(r,t){for(var n in r)r[n][0]&&r[n][0](t)},Si=function(r,t){if(!vt.has(r)){var n=$e(El,t),o={},i=wi.bind(te,r),u=Fe;if(vt.set(r,[o,{},{},{},i]),!fn){var f=n.initFocus(setTimeout.bind(te,fi.bind(te,o,bi))),h=n.initReconnect(setTimeout.bind(te,fi.bind(te,o,gi)));u=function(){f&&f(),h&&h(),vt.delete(r)}}return[r,i,u]}return[r,vt.get(r)[4]]},Ol=function(r,t,n,o,i){var u=n.errorRetryCount,f=i.retryCount,h=~~((Math.random()+.5)*(1<<(f<8?f:8)))*n.errorRetryInterval;!oe(u)&&f>u||setTimeout(o,h,i)},_i=Si(new Map),vi=_i[0],Dl=_i[1],Ri=$e({onLoadingSlow:Fe,onSuccess:Fe,onError:Fe,onErrorRetry:Ol,onDiscarded:Fe,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:li?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:li?5e3:3e3,compare:function(r,t){return pr(r)==pr(t)},isPaused:function(){return!1},cache:vi,mutate:Dl,fallback:{}},Cl),Ti=function(r,t){var n=$e(r,t);if(t){var o=r.use,i=r.fallback,u=t.use,f=t.fallback;o&&u&&(n.use=o.concat(u)),i&&f&&(n.fallback=$e(i,f))}return n},na=(0,L.createContext)({}),Wl=function(r){var t=r.value,n=Ti((0,L.useContext)(na),t),o=t&&t.provider,i=(0,L.useState)(function(){return o?Si(o(n.cache||vi),t):te})[0];return i&&(n.cache=i[0],n.mutate=i[1]),hr(function(){return i?i[2]:te},[]),(0,L.createElement)(na.Provider,$e(r,{value:n}))},kl=function(r,t){var n=(0,L.useState)({})[1],o=(0,L.useRef)(r),i=(0,L.useRef)({data:!1,error:!1,isValidating:!1}),u=(0,L.useCallback)(function(f){var h=!1,p=o.current;for(var c in f){var _=c;p[_]!==f[_]&&(p[_]=f[_],i.current[_]&&(h=!0))}h&&!t.current&&n({})},[]);return hr(function(){o.current=r}),[o,i.current,u]},Fl=function(r){return Rt(r[1])?[r[0],r[1],r[2]||{}]:[r[0],null,(r[1]===null?r[2]:r[1])||{}]},xl=function(){return $e(Ri,(0,L.useContext)(na))},Bl=function(r){return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var i=xl(),u=Fl(n),f=u[0],h=u[1],p=u[2],c=Ti(i,p),_=r,v=c.use;if(v)for(var y=v.length;y-- >0;)_=v[y](_);return _(f,h||c.fetcher,c)}},di=function(r,t,n){var o=t[r]||(t[r]=[]);return o.push(n),function(){var i=o.indexOf(n);i>=0&&(o[i]=o[o.length-1],o.pop())}},Jn={dedupe:!0},Ml=function(r,t,n){var o=n.cache,i=n.compare,u=n.fallbackData,f=n.suspense,h=n.revalidateOnMount,p=n.refreshInterval,c=n.refreshWhenHidden,_=n.refreshWhenOffline,v=vt.get(o),y=v[0],w=v[1],S=v[2],E=v[3],T=pi(r),g=T[0],O=T[1],I=T[2],P=(0,L.useRef)(!1),q=(0,L.useRef)(!1),D=(0,L.useRef)(g),ee=(0,L.useRef)(t),J=(0,L.useRef)(n),G=function(){return J.current},mt=function(){return G().isVisible()&&G().isOnline()},ie=function(N){return o.set(I,$e(o.get(I),N))},qe=o.get(g),Gt=oe(u)?n.fallback[g]:u,ye=oe(qe)?Gt:qe,Er=o.get(I)||{},Le=Er.error,Pr=!P.current,Xt=function(){return Pr&&!oe(h)?h:G().isPaused()?!1:f?!oe(ye):oe(ye)||n.revalidateIfStale},Ar=function(){return!g||!t?!1:Er.isValidating?!0:Pr&&Xt()},Wt=Ar(),pt=kl({data:ye,error:Le,isValidating:Wt},q),Oe=pt[0],kt=pt[1],Ft=pt[2],Ie=(0,L.useCallback)(function(N){return ci(void 0,void 0,void 0,function(){var se,ne,j,Ue,ze,me,Z,ve,ue,De,Je,We,Ze;return hi(this,function(et){switch(et.label){case 0:if(se=ee.current,!g||!se||q.current||G().isPaused())return[2,!1];Ue=!0,ze=N||{},me=!E[g]||!ze.dedupe,Z=function(){return!q.current&&g===D.current&&P.current},ve=function(){var tt=E[g];tt&&tt[1]===j&&delete E[g]},ue={isValidating:!1},De=function(){ie({isValidating:!1}),Z()&&Ft(ue)},ie({isValidating:!0}),Ft({isValidating:!0}),et.label=1;case 1:return et.trys.push([1,3,,4]),me&&(mr(o,g,Oe.current.data,Oe.current.error,!0),n.loadingTimeout&&!o.get(g)&&setTimeout(function(){Ue&&Z()&&G().onLoadingSlow(g,n)},n.loadingTimeout),E[g]=[se.apply(void 0,O),ra()]),Ze=E[g],ne=Ze[0],j=Ze[1],[4,ne];case 2:return ne=et.sent(),me&&setTimeout(ve,n.dedupingInterval),!E[g]||E[g][1]!==j?(me&&Z()&&G().onDiscarded(g),[2,!1]):(ie({error:te}),ue.error=te,Je=S[g],!oe(Je)&&(j<=Je[0]||j<=Je[1]||Je[1]===0)?(De(),me&&Z()&&G().onDiscarded(g),[2,!1]):(i(Oe.current.data,ne)?ue.data=Oe.current.data:ue.data=ne,i(o.get(g),ne)||o.set(g,ne),me&&Z()&&G().onSuccess(ne,g,n),[3,4]));case 3:return We=et.sent(),ve(),G().isPaused()||(ie({error:We}),ue.error=We,me&&Z()&&(G().onError(We,g,n),(typeof n.shouldRetryOnError=="boolean"&&n.shouldRetryOnError||Rt(n.shouldRetryOnError)&&n.shouldRetryOnError(We))&&mt()&&G().onErrorRetry(We,g,n,Ie,{retryCount:(ze.retryCount||0)+1,dedupe:!0}))),[3,4];case 4:return Ue=!1,De(),Z()&&me&&mr(o,g,ue.data,ue.error,!1),[2,!0]}})})},[g]),_e=(0,L.useCallback)(wi.bind(te,o,function(){return D.current}),[]);if(hr(function(){ee.current=t,J.current=n}),hr(function(){if(g){var N=g!==D.current,se=Ie.bind(te,Jn),ne=function(Z,ve,ue){Ft($e({error:ve,isValidating:ue},i(Oe.current.data,Z)?te:{data:Z}))},j=0,Ue=function(Z){if(Z==bi){var ve=Date.now();G().revalidateOnFocus&&ve>j&&mt()&&(j=ve+G().focusThrottleInterval,se())}else if(Z==gi)G().revalidateOnReconnect&&mt()&&se();else if(Z==yi)return Ie()},ze=di(g,w,ne),me=di(g,y,Ue);return q.current=!1,D.current=g,P.current=!0,N&&Ft({data:ye,error:Le,isValidating:Wt}),Xt()&&(oe(ye)||fn?se():Pl(se)),function(){q.current=!0,ze(),me()}}},[g,Ie]),hr(function(){var N;function se(){var j=Rt(p)?p(ye):p;j&&N!==-1&&(N=setTimeout(ne,j))}function ne(){!Oe.current.error&&(c||G().isVisible())&&(_||G().isOnline())?Ie(Jn).then(se):se()}return se(),function(){N&&(clearTimeout(N),N=-1)}},[p,c,_,Ie]),(0,L.useDebugValue)(ye),f&&oe(ye)&&g)throw ee.current=t,J.current=n,q.current=!1,oe(Le)?Ie(Jn):Le;return{mutate:_e,get data(){return kt.data=!0,ye},get error(){return kt.error=!0,Le},get isValidating(){return kt.isValidating=!0,Wt}}},hd=cr.defineProperty(Wl,"default",{value:Ri});var sa=Bl(Ml);var Ci=require("@raycast/api"),dn=()=>(0,Ci.getPreferenceValues)();var ns=Ee(require("node:http"),1),as=Ee(require("node:https"),1),Pt=Ee(require("node:zlib"),1),ge=Ee(require("node:stream"),1),vr=require("node:buffer");function ql(r){if(!/^data:/i.test(r))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');r=r.replace(/\r?\n/g,"");let t=r.indexOf(",");if(t===-1||t<=4)throw new TypeError("malformed data: URI");let n=r.substring(5,t).split(";"),o="",i=!1,u=n[0]||"text/plain",f=u;for(let _=1;_<n.length;_++)n[_]==="base64"?i=!0:(f+=`;${n[_]}`,n[_].indexOf("charset=")===0&&(o=n[_].substring(8)));!n[0]&&!o.length&&(f+=";charset=US-ASCII",o="US-ASCII");let h=i?"base64":"ascii",p=unescape(r.substring(t+1)),c=Buffer.from(p,h);return c.type=u,c.typeFull=f,c.charset=o,c}var Ei=ql;var Se=Ee(require("node:stream"),1),Qe=require("node:util"),be=require("node:buffer");br();hn();var Ve=class extends Error{constructor(t,n){super(t),Error.captureStackTrace(this,this.constructor),this.type=n}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};var de=class extends Ve{constructor(t,n,o){super(t,n),o&&(this.code=this.errno=o.code,this.erroredSysCall=o.syscall)}};var mn=Symbol.toStringTag,ca=r=>typeof r=="object"&&typeof r.append=="function"&&typeof r.delete=="function"&&typeof r.get=="function"&&typeof r.getAll=="function"&&typeof r.has=="function"&&typeof r.set=="function"&&typeof r.sort=="function"&&r[mn]==="URLSearchParams",yr=r=>r&&typeof r=="object"&&typeof r.arrayBuffer=="function"&&typeof r.type=="string"&&typeof r.stream=="function"&&typeof r.constructor=="function"&&/^(Blob|File)$/.test(r[mn]),Bi=r=>typeof r=="object"&&(r[mn]==="AbortSignal"||r[mn]==="EventTarget"),Mi=(r,t)=>{let n=new URL(t).hostname,o=new URL(r).hostname;return n===o||n.endsWith(`.${o}`)};var Jl=(0,Qe.promisify)(Se.default.pipeline),ce=Symbol("Body internals"),Be=class{constructor(t,{size:n=0}={}){let o=null;t===null?t=null:ca(t)?t=be.Buffer.from(t.toString()):yr(t)||be.Buffer.isBuffer(t)||(Qe.types.isAnyArrayBuffer(t)?t=be.Buffer.from(t):ArrayBuffer.isView(t)?t=be.Buffer.from(t.buffer,t.byteOffset,t.byteLength):t instanceof Se.default||(t instanceof Ct?(t=xi(t),o=t.type.split("=")[1]):t=be.Buffer.from(String(t))));let i=t;be.Buffer.isBuffer(t)?i=Se.default.Readable.from(t):yr(t)&&(i=Se.default.Readable.from(t.stream())),this[ce]={body:t,stream:i,boundary:o,disturbed:!1,error:null},this.size=n,t instanceof Se.default&&t.on("error",u=>{let f=u instanceof Ve?u:new de(`Invalid response body while trying to fetch ${this.url}: ${u.message}`,"system",u);this[ce].error=f})}get body(){return this[ce].stream}get bodyUsed(){return this[ce].disturbed}async arrayBuffer(){let{buffer:t,byteOffset:n,byteLength:o}=await pa(this);return t.slice(n,n+o)}async formData(){let t=this.headers.get("content-type");if(t.startsWith("application/x-www-form-urlencoded")){let o=new Ct,i=new URLSearchParams(await this.text());for(let[u,f]of i)o.append(u,f);return o}let{toFormData:n}=await Promise.resolve().then(()=>(Ni(),zi));return n(this.body,t)}async blob(){let t=this.headers&&this.headers.get("content-type")||this[ce].body&&this[ce].body.type||"",n=await this.arrayBuffer();return new Ye([n],{type:t})}async json(){let t=await this.text();return JSON.parse(t)}async text(){let t=await pa(this);return new TextDecoder().decode(t)}buffer(){return pa(this)}};Be.prototype.buffer=(0,Qe.deprecate)(Be.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer");Object.defineProperties(Be.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:(0,Qe.deprecate)(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});async function pa(r){if(r[ce].disturbed)throw new TypeError(`body used already for: ${r.url}`);if(r[ce].disturbed=!0,r[ce].error)throw r[ce].error;let{body:t}=r;if(t===null)return be.Buffer.alloc(0);if(!(t instanceof Se.default))return be.Buffer.alloc(0);let n=[],o=0;try{for await(let i of t){if(r.size>0&&o+i.length>r.size){let u=new de(`content size at ${r.url} over limit: ${r.size}`,"max-size");throw t.destroy(u),u}o+=i.length,n.push(i)}}catch(i){throw i instanceof Ve?i:new de(`Invalid response body while trying to fetch ${r.url}: ${i.message}`,"system",i)}if(t.readableEnded===!0||t._readableState.ended===!0)try{return n.every(i=>typeof i=="string")?be.Buffer.from(n.join("")):be.Buffer.concat(n,o)}catch(i){throw new de(`Could not create Buffer from response body for ${r.url}: ${i.message}`,"system",i)}else throw new de(`Premature close of server response while trying to fetch ${r.url}`)}var $t=(r,t)=>{let n,o,{body:i}=r[ce];if(r.bodyUsed)throw new Error("cannot clone body after it is used");return i instanceof Se.default&&typeof i.getBoundary!="function"&&(n=new Se.PassThrough({highWaterMark:t}),o=new Se.PassThrough({highWaterMark:t}),i.pipe(n),i.pipe(o),r[ce].stream=n,i=o),i},Zl=(0,Qe.deprecate)(r=>r.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),yn=(r,t)=>r===null?null:typeof r=="string"?"text/plain;charset=UTF-8":ca(r)?"application/x-www-form-urlencoded;charset=UTF-8":yr(r)?r.type||null:be.Buffer.isBuffer(r)||Qe.types.isAnyArrayBuffer(r)||ArrayBuffer.isView(r)?null:r instanceof Ct?`multipart/form-data; boundary=${t[ce].boundary}`:r&&typeof r.getBoundary=="function"?`multipart/form-data;boundary=${Zl(r)}`:r instanceof Se.default?null:"text/plain;charset=UTF-8",ji=r=>{let{body:t}=r[ce];return t===null?0:yr(t)?t.size:be.Buffer.isBuffer(t)?t.length:t&&typeof t.getLengthSync=="function"&&t.hasKnownLength&&t.hasKnownLength()?t.getLengthSync():null},Hi=async(r,{body:t})=>{t===null?r.end():await Jl(t,r)};var ba=require("node:util"),_r=Ee(require("node:http"),1),wn=typeof _r.default.validateHeaderName=="function"?_r.default.validateHeaderName:r=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(r)){let t=new TypeError(`Header name must be a valid HTTP token [${r}]`);throw Object.defineProperty(t,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),t}},ga=typeof _r.default.validateHeaderValue=="function"?_r.default.validateHeaderValue:(r,t)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(t)){let n=new TypeError(`Invalid character in header content ["${r}"]`);throw Object.defineProperty(n,"code",{value:"ERR_INVALID_CHAR"}),n}},he=class extends URLSearchParams{constructor(t){let n=[];if(t instanceof he){let o=t.raw();for(let[i,u]of Object.entries(o))n.push(...u.map(f=>[i,f]))}else if(t!=null)if(typeof t=="object"&&!ba.types.isBoxedPrimitive(t)){let o=t[Symbol.iterator];if(o==null)n.push(...Object.entries(t));else{if(typeof o!="function")throw new TypeError("Header pairs must be iterable");n=[...t].map(i=>{if(typeof i!="object"||ba.types.isBoxedPrimitive(i))throw new TypeError("Each header pair must be an iterable object");return[...i]}).map(i=>{if(i.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...i]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");return n=n.length>0?n.map(([o,i])=>(wn(o),ga(o,String(i)),[String(o).toLowerCase(),String(i)])):void 0,super(n),new Proxy(this,{get(o,i,u){switch(i){case"append":case"set":return(f,h)=>(wn(f),ga(f,String(h)),URLSearchParams.prototype[i].call(o,String(f).toLowerCase(),String(h)));case"delete":case"has":case"getAll":return f=>(wn(f),URLSearchParams.prototype[i].call(o,String(f).toLowerCase()));case"keys":return()=>(o.sort(),new Set(URLSearchParams.prototype.keys.call(o)).keys());default:return Reflect.get(o,i,u)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(t){let n=this.getAll(t);if(n.length===0)return null;let o=n.join(", ");return/^content-encoding$/i.test(t)&&(o=o.toLowerCase()),o}forEach(t,n=void 0){for(let o of this.keys())Reflect.apply(t,n,[this.get(o),o,this])}*values(){for(let t of this.keys())yield this.get(t)}*entries(){for(let t of this.keys())yield[t,this.get(t)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((t,n)=>(t[n]=this.getAll(n),t),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((t,n)=>{let o=this.getAll(n);return n==="host"?t[n]=o[0]:t[n]=o.length>1?o:o[0],t},{})}};Object.defineProperties(he.prototype,["get","entries","forEach","values"].reduce((r,t)=>(r[t]={enumerable:!0},r),{}));function $i(r=[]){return new he(r.reduce((t,n,o,i)=>(o%2===0&&t.push(i.slice(o,o+2)),t),[]).filter(([t,n])=>{try{return wn(t),ga(t,String(n)),!0}catch{return!1}}))}var ef=new Set([301,302,303,307,308]),Sn=r=>ef.has(r);var Pe=Symbol("Response internals"),re=class extends Be{constructor(t=null,n={}){super(t,n);let o=n.status!=null?n.status:200,i=new he(n.headers);if(t!==null&&!i.has("Content-Type")){let u=yn(t,this);u&&i.append("Content-Type",u)}this[Pe]={type:"default",url:n.url,status:o,statusText:n.statusText||"",headers:i,counter:n.counter,highWaterMark:n.highWaterMark}}get type(){return this[Pe].type}get url(){return this[Pe].url||""}get status(){return this[Pe].status}get ok(){return this[Pe].status>=200&&this[Pe].status<300}get redirected(){return this[Pe].counter>0}get statusText(){return this[Pe].statusText}get headers(){return this[Pe].headers}get highWaterMark(){return this[Pe].highWaterMark}clone(){return new re($t(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(t,n=302){if(!Sn(n))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new re(null,{headers:{location:new URL(t).toString()},status:n})}static error(){let t=new re(null,{status:0,statusText:""});return t[Pe].type="error",t}get[Symbol.toStringTag](){return"Response"}};Object.defineProperties(re.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});var es=require("node:url"),ts=require("node:util");var Yi=r=>{if(r.search)return r.search;let t=r.href.length-1,n=r.hash||(r.href[t]==="#"?"#":"");return r.href[t-n.length]==="?"?"?":""};var Qi=require("node:net");function Vi(r,t=!1){return r==null||(r=new URL(r),/^(about|blob|data):$/.test(r.protocol))?"no-referrer":(r.username="",r.password="",r.hash="",t&&(r.pathname="",r.search=""),r)}var Gi=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]),Xi="strict-origin-when-cross-origin";function Ki(r){if(!Gi.has(r))throw new TypeError(`Invalid referrerPolicy: ${r}`);return r}function tf(r){if(/^(http|ws)s:$/.test(r.protocol))return!0;let t=r.host.replace(/(^\[)|(]$)/g,""),n=(0,Qi.isIP)(t);return n===4&&/^127\./.test(t)||n===6&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(t)?!0:/^(.+\.)*localhost$/.test(r.host)?!1:r.protocol==="file:"}function Yt(r){return/^about:(blank|srcdoc)$/.test(r)||r.protocol==="data:"||/^(blob|filesystem):$/.test(r.protocol)?!0:tf(r)}function Ji(r,{referrerURLCallback:t,referrerOriginCallback:n}={}){if(r.referrer==="no-referrer"||r.referrerPolicy==="")return null;let o=r.referrerPolicy;if(r.referrer==="about:client")return"no-referrer";let i=r.referrer,u=Vi(i),f=Vi(i,!0);u.toString().length>4096&&(u=f),t&&(u=t(u)),n&&(f=n(f));let h=new URL(r.url);switch(o){case"no-referrer":return"no-referrer";case"origin":return f;case"unsafe-url":return u;case"strict-origin":return Yt(u)&&!Yt(h)?"no-referrer":f.toString();case"strict-origin-when-cross-origin":return u.origin===h.origin?u:Yt(u)&&!Yt(h)?"no-referrer":f;case"same-origin":return u.origin===h.origin?u:"no-referrer";case"origin-when-cross-origin":return u.origin===h.origin?u:f;case"no-referrer-when-downgrade":return Yt(u)&&!Yt(h)?"no-referrer":u;default:throw new TypeError(`Invalid referrerPolicy: ${o}`)}}function Zi(r){let t=(r.get("referrer-policy")||"").split(/[,\s]+/),n="";for(let o of t)o&&Gi.has(o)&&(n=o);return n}var K=Symbol("Request internals"),_n=r=>typeof r=="object"&&typeof r[K]=="object",rf=(0,ts.deprecate)(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)"),Ge=class extends Be{constructor(t,n={}){let o;if(_n(t)?o=new URL(t.url):(o=new URL(t),t={}),o.username!==""||o.password!=="")throw new TypeError(`${o} is an url with embedded credentials.`);let i=n.method||t.method||"GET";if(i=i.toUpperCase(),"data"in n&&rf(),(n.body!=null||_n(t)&&t.body!==null)&&(i==="GET"||i==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let u=n.body?n.body:_n(t)&&t.body!==null?$t(t):null;super(u,{size:n.size||t.size||0});let f=new he(n.headers||t.headers||{});if(u!==null&&!f.has("Content-Type")){let c=yn(u,this);c&&f.set("Content-Type",c)}let h=_n(t)?t.signal:null;if("signal"in n&&(h=n.signal),h!=null&&!Bi(h))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let p=n.referrer==null?t.referrer:n.referrer;if(p==="")p="no-referrer";else if(p){let c=new URL(p);p=/^about:(\/\/)?client$/.test(c)?"client":c}else p=void 0;this[K]={method:i,redirect:n.redirect||t.redirect||"follow",headers:f,parsedURL:o,signal:h,referrer:p},this.follow=n.follow===void 0?t.follow===void 0?20:t.follow:n.follow,this.compress=n.compress===void 0?t.compress===void 0?!0:t.compress:n.compress,this.counter=n.counter||t.counter||0,this.agent=n.agent||t.agent,this.highWaterMark=n.highWaterMark||t.highWaterMark||16384,this.insecureHTTPParser=n.insecureHTTPParser||t.insecureHTTPParser||!1,this.referrerPolicy=n.referrerPolicy||t.referrerPolicy||""}get method(){return this[K].method}get url(){return(0,es.format)(this[K].parsedURL)}get headers(){return this[K].headers}get redirect(){return this[K].redirect}get signal(){return this[K].signal}get referrer(){if(this[K].referrer==="no-referrer")return"";if(this[K].referrer==="client")return"about:client";if(this[K].referrer)return this[K].referrer.toString()}get referrerPolicy(){return this[K].referrerPolicy}set referrerPolicy(t){this[K].referrerPolicy=Ki(t)}clone(){return new Ge(this)}get[Symbol.toStringTag](){return"Request"}};Object.defineProperties(Ge.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});var rs=r=>{let{parsedURL:t}=r[K],n=new he(r[K].headers);n.has("Accept")||n.set("Accept","*/*");let o=null;if(r.body===null&&/^(post|put)$/i.test(r.method)&&(o="0"),r.body!==null){let h=ji(r);typeof h=="number"&&!Number.isNaN(h)&&(o=String(h))}o&&n.set("Content-Length",o),r.referrerPolicy===""&&(r.referrerPolicy=Xi),r.referrer&&r.referrer!=="no-referrer"?r[K].referrer=Ji(r):r[K].referrer="no-referrer",r[K].referrer instanceof URL&&n.set("Referer",r.referrer),n.has("User-Agent")||n.set("User-Agent","node-fetch"),r.compress&&!n.has("Accept-Encoding")&&n.set("Accept-Encoding","gzip,deflate,br");let{agent:i}=r;typeof i=="function"&&(i=i(t)),!n.has("Connection")&&!i&&n.set("Connection","close");let u=Yi(t),f={path:t.pathname+u,method:r.method,headers:n[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:r.insecureHTTPParser,agent:i};return{parsedURL:t,options:f}};var vn=class extends Ve{constructor(t,n="aborted"){super(t,n)}};hn();ha();var nf=new Set(["data:","http:","https:"]);async function Rn(r,t){return new Promise((n,o)=>{let i=new Ge(r,t),{parsedURL:u,options:f}=rs(i);if(!nf.has(u.protocol))throw new TypeError(`node-fetch cannot load ${r}. URL scheme "${u.protocol.replace(/:$/,"")}" is not supported.`);if(u.protocol==="data:"){let S=Ei(i.url),E=new re(S,{headers:{"Content-Type":S.typeFull}});n(E);return}let h=(u.protocol==="https:"?as.default:ns.default).request,{signal:p}=i,c=null,_=()=>{let S=new vn("The operation was aborted.");o(S),i.body&&i.body instanceof ge.default.Readable&&i.body.destroy(S),!(!c||!c.body)&&c.body.emit("error",S)};if(p&&p.aborted){_();return}let v=()=>{_(),w()},y=h(u.toString(),f);p&&p.addEventListener("abort",v);let w=()=>{y.abort(),p&&p.removeEventListener("abort",v)};y.on("error",S=>{o(new de(`request to ${i.url} failed, reason: ${S.message}`,"system",S)),w()}),af(y,S=>{c.body.destroy(S)}),process.version<"v14"&&y.on("socket",S=>{let E;S.prependListener("end",()=>{E=S._eventsCount}),S.prependListener("close",T=>{if(c&&E<S._eventsCount&&!T){let g=new Error("Premature close");g.code="ERR_STREAM_PREMATURE_CLOSE",c.body.emit("error",g)}})}),y.on("response",S=>{y.setTimeout(0);let E=$i(S.rawHeaders);if(Sn(S.statusCode)){let P=E.get("Location"),q=null;try{q=P===null?null:new URL(P,i.url)}catch{if(i.redirect!=="manual"){o(new de(`uri requested responds with an invalid redirect URL: ${P}`,"invalid-redirect")),w();return}}switch(i.redirect){case"error":o(new de(`uri requested responds with a redirect, redirect mode is set to error: ${i.url}`,"no-redirect")),w();return;case"manual":break;case"follow":{if(q===null)break;if(i.counter>=i.follow){o(new de(`maximum redirect reached at: ${i.url}`,"max-redirect")),w();return}let D={headers:new he(i.headers),follow:i.follow,counter:i.counter+1,agent:i.agent,compress:i.compress,method:i.method,body:$t(i),signal:i.signal,size:i.size,referrer:i.referrer,referrerPolicy:i.referrerPolicy};if(!Mi(i.url,q))for(let J of["authorization","www-authenticate","cookie","cookie2"])D.headers.delete(J);if(S.statusCode!==303&&i.body&&t.body instanceof ge.default.Readable){o(new de("Cannot follow redirect with body being a readable stream","unsupported-redirect")),w();return}(S.statusCode===303||(S.statusCode===301||S.statusCode===302)&&i.method==="POST")&&(D.method="GET",D.body=void 0,D.headers.delete("content-length"));let ee=Zi(E);ee&&(D.referrerPolicy=ee),n(Rn(new Ge(q,D))),w();return}default:return o(new TypeError(`Redirect option '${i.redirect}' is not a valid value of RequestRedirect`))}}p&&S.once("end",()=>{p.removeEventListener("abort",v)});let T=(0,ge.pipeline)(S,new ge.PassThrough,P=>{P&&o(P)});process.version<"v12.10"&&S.on("aborted",v);let g={url:i.url,status:S.statusCode,statusText:S.statusMessage,headers:E,size:i.size,counter:i.counter,highWaterMark:i.highWaterMark},O=E.get("Content-Encoding");if(!i.compress||i.method==="HEAD"||O===null||S.statusCode===204||S.statusCode===304){c=new re(T,g),n(c);return}let I={flush:Pt.default.Z_SYNC_FLUSH,finishFlush:Pt.default.Z_SYNC_FLUSH};if(O==="gzip"||O==="x-gzip"){T=(0,ge.pipeline)(T,Pt.default.createGunzip(I),P=>{P&&o(P)}),c=new re(T,g),n(c);return}if(O==="deflate"||O==="x-deflate"){let P=(0,ge.pipeline)(S,new ge.PassThrough,q=>{q&&o(q)});P.once("data",q=>{(q[0]&15)===8?T=(0,ge.pipeline)(T,Pt.default.createInflate(),D=>{D&&o(D)}):T=(0,ge.pipeline)(T,Pt.default.createInflateRaw(),D=>{D&&o(D)}),c=new re(T,g),n(c)}),P.once("end",()=>{c||(c=new re(T,g),n(c))});return}if(O==="br"){T=(0,ge.pipeline)(T,Pt.default.createBrotliDecompress(),P=>{P&&o(P)}),c=new re(T,g),n(c);return}c=new re(T,g),n(c)}),Hi(y,i).catch(o)})}function af(r,t){let n=vr.Buffer.from(`0\r
\r
`),o=!1,i=!1,u;r.on("response",f=>{let{headers:h}=f;o=h["transfer-encoding"]==="chunked"&&!h["content-length"]}),r.on("socket",f=>{let h=()=>{if(o&&!i){let p=new Error("Premature close");p.code="ERR_STREAM_PREMATURE_CLOSE",t(p)}};f.prependListener("close",h),r.on("abort",()=>{f.removeListener("close",h)}),f.on("data",p=>{i=vr.Buffer.compare(p.slice(-5),n)===0,!i&&u&&(i=vr.Buffer.compare(u.slice(-3),n.slice(0,3))===0&&vr.Buffer.compare(p.slice(-2),n.slice(3))===0),u=p})})}var os=Ee(un());var{token:of}=dn(),sf={method:"get",headers:{Authorization:`Token ${of}`}},ya=async(r,t)=>{let n=await Rn(`https://readwise.io/api${r}?${os.default.stringify(t)}`,sf),o=await n.json();if(!n.ok){let i=new Error("An error occurred while fetching the data.");throw i.status=n.status,i}return o};var is=require("react"),Vt=require("@raycast/api"),wa=r=>{(0,is.useEffect)(()=>{r&&(r.status===401||r.status===403?(0,Vt.showToast)(Vt.Toast.Style.Failure,"Invalid API token","Please, validate your Readwise API token is correct and you added one."):(0,Vt.showToast)(Vt.Toast.Style.Failure,"Something went wrong.","Please, try it again."))},[r])};var us=r=>{let{data:t,error:n,isValidating:o}=sa(r,ya);return wa(n),{data:t,loading:!t&&!n||o}},{pageSize:uf}=dn(),lf={page_size:uf},ls=(r,t)=>{let n=t||lf,[o,i]=(0,ss.useState)(n),{data:u,error:f,isValidating:h}=sa([r,o],ya);return wa(f),{currentParams:o,data:u,defaultParams:n,loading:!u&&!f||h,setParams:i}};var Sa="/v2/highlights";function ds(){let{data:r,loading:t,setParams:n,defaultParams:o}=ls(Sa);return{data:r,loading:t,refetch:async i=>{n({...o,...fs.default.parse(new URL(i,"https://readwise.io").search)})}}}var Ae=require("@raycast/api");var V=require("@raycast/api");function cs(r){let{data:t,loading:n}=us(`/v2/books/${r}`);return{data:t,loading:n}}var _a=require("@raycast/api"),va=require("react/jsx-runtime"),hs=({tags:r})=>r.length===0?null:(0,va.jsx)(_a.Detail.Metadata.TagList,{title:"Tag",children:r.map(t=>(0,va.jsx)(_a.Detail.Metadata.TagList.Item,{text:t.name},t.name))});var nd=Ee(un());function M(r,t){if(t.length<r)throw new TypeError(r+" argument"+(r>1?"s":"")+" required, but only "+t.length+" present")}function Ra(r){return M(1,arguments),r instanceof Date||typeof r=="object"&&Object.prototype.toString.call(r)==="[object Date]"}function $(r){M(1,arguments);var t=Object.prototype.toString.call(r);return r instanceof Date||typeof r=="object"&&t==="[object Date]"?new Date(r.getTime()):typeof r=="number"||t==="[object Number]"?new Date(r):((typeof r=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn(new Error().stack)),new Date(NaN))}function Ta(r){if(M(1,arguments),!Ra(r)&&typeof r!="number")return!1;var t=$(r);return!isNaN(Number(t))}var ff={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},df=function(r,t,n){var o,i=ff[r];return typeof i=="string"?o=i:t===1?o=i.one:o=i.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+o:o+" ago":o},ms=df;function Rr(r){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.width?String(t.width):r.defaultWidth,o=r.formats[n]||r.formats[r.defaultWidth];return o}}var cf={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},hf={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},mf={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},pf={date:Rr({formats:cf,defaultWidth:"full"}),time:Rr({formats:hf,defaultWidth:"full"}),dateTime:Rr({formats:mf,defaultWidth:"full"})},ps=pf;var bf={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},gf=function(r,t,n,o){return bf[r]},bs=gf;function At(r){return function(t,n){var o=n||{},i=o.context?String(o.context):"standalone",u;if(i==="formatting"&&r.formattingValues){var f=r.defaultFormattingWidth||r.defaultWidth,h=o.width?String(o.width):f;u=r.formattingValues[h]||r.formattingValues[f]}else{var p=r.defaultWidth,c=o.width?String(o.width):r.defaultWidth;u=r.values[c]||r.values[p]}var _=r.argumentCallback?r.argumentCallback(t):t;return u[_]}}var yf={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},wf={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Sf={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},_f={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},vf={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Rf={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Tf=function(r,t){var n=Number(r),o=n%100;if(o>20||o<10)switch(o%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Cf={ordinalNumber:Tf,era:At({values:yf,defaultWidth:"wide"}),quarter:At({values:wf,defaultWidth:"wide",argumentCallback:function(r){return r-1}}),month:At({values:Sf,defaultWidth:"wide"}),day:At({values:_f,defaultWidth:"wide"}),dayPeriod:At({values:vf,defaultWidth:"wide",formattingValues:Rf,defaultFormattingWidth:"wide"})},gs=Cf;function Ot(r){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=n.width,i=o&&r.matchPatterns[o]||r.matchPatterns[r.defaultMatchWidth],u=t.match(i);if(!u)return null;var f=u[0],h=o&&r.parsePatterns[o]||r.parsePatterns[r.defaultParseWidth],p=Array.isArray(h)?Pf(h,function(v){return v.test(f)}):Ef(h,function(v){return v.test(f)}),c;c=r.valueCallback?r.valueCallback(p):p,c=n.valueCallback?n.valueCallback(c):c;var _=t.slice(f.length);return{value:c,rest:_}}}function Ef(r,t){for(var n in r)if(r.hasOwnProperty(n)&&t(r[n]))return n}function Pf(r,t){for(var n=0;n<r.length;n++)if(t(r[n]))return n}function Ca(r){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=t.match(r.matchPattern);if(!o)return null;var i=o[0],u=t.match(r.parsePattern);if(!u)return null;var f=r.valueCallback?r.valueCallback(u[0]):u[0];f=n.valueCallback?n.valueCallback(f):f;var h=t.slice(i.length);return{value:f,rest:h}}}var Af=/^(\d+)(th|st|nd|rd)?/i,Of=/\d+/i,Df={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Wf={any:[/^b/i,/^(a|c)/i]},kf={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Ff={any:[/1/i,/2/i,/3/i,/4/i]},xf={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Bf={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Mf={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},qf={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Lf={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},If={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Uf={ordinalNumber:Ca({matchPattern:Af,parsePattern:Of,valueCallback:function(r){return parseInt(r,10)}}),era:Ot({matchPatterns:Df,defaultMatchWidth:"wide",parsePatterns:Wf,defaultParseWidth:"any"}),quarter:Ot({matchPatterns:kf,defaultMatchWidth:"wide",parsePatterns:Ff,defaultParseWidth:"any",valueCallback:function(r){return r+1}}),month:Ot({matchPatterns:xf,defaultMatchWidth:"wide",parsePatterns:Bf,defaultParseWidth:"any"}),day:Ot({matchPatterns:Mf,defaultMatchWidth:"wide",parsePatterns:qf,defaultParseWidth:"any"}),dayPeriod:Ot({matchPatterns:Lf,defaultMatchWidth:"any",parsePatterns:If,defaultParseWidth:"any"})},ys=Uf;var zf={code:"en-US",formatDistance:ms,formatLong:ps,formatRelative:bs,localize:gs,match:ys,options:{weekStartsOn:0,firstWeekContainsDate:1}},ws=zf;function X(r){if(r===null||r===!0||r===!1)return NaN;var t=Number(r);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function Ea(r,t){M(2,arguments);var n=$(r).getTime(),o=X(t);return new Date(n+o)}function Pa(r,t){M(2,arguments);var n=X(t);return Ea(r,-n)}var Nf=864e5;function Aa(r){M(1,arguments);var t=$(r),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var o=t.getTime(),i=n-o;return Math.floor(i/Nf)+1}function dt(r){M(1,arguments);var t=1,n=$(r),o=n.getUTCDay(),i=(o<t?7:0)+o-t;return n.setUTCDate(n.getUTCDate()-i),n.setUTCHours(0,0,0,0),n}function Tr(r){M(1,arguments);var t=$(r),n=t.getUTCFullYear(),o=new Date(0);o.setUTCFullYear(n+1,0,4),o.setUTCHours(0,0,0,0);var i=dt(o),u=new Date(0);u.setUTCFullYear(n,0,4),u.setUTCHours(0,0,0,0);var f=dt(u);return t.getTime()>=i.getTime()?n+1:t.getTime()>=f.getTime()?n:n-1}function Oa(r){M(1,arguments);var t=Tr(r),n=new Date(0);n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0);var o=dt(n);return o}var jf=6048e5;function Da(r){M(1,arguments);var t=$(r),n=dt(t).getTime()-Oa(t).getTime();return Math.round(n/jf)+1}function ct(r,t){M(1,arguments);var n=t||{},o=n.locale,i=o&&o.options&&o.options.weekStartsOn,u=i==null?0:X(i),f=n.weekStartsOn==null?u:X(n.weekStartsOn);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=$(r),p=h.getUTCDay(),c=(p<f?7:0)+p-f;return h.setUTCDate(h.getUTCDate()-c),h.setUTCHours(0,0,0,0),h}function Cr(r,t){M(1,arguments);var n=$(r),o=n.getUTCFullYear(),i=t||{},u=i.locale,f=u&&u.options&&u.options.firstWeekContainsDate,h=f==null?1:X(f),p=i.firstWeekContainsDate==null?h:X(i.firstWeekContainsDate);if(!(p>=1&&p<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var c=new Date(0);c.setUTCFullYear(o+1,0,p),c.setUTCHours(0,0,0,0);var _=ct(c,t),v=new Date(0);v.setUTCFullYear(o,0,p),v.setUTCHours(0,0,0,0);var y=ct(v,t);return n.getTime()>=_.getTime()?o+1:n.getTime()>=y.getTime()?o:o-1}function Wa(r,t){M(1,arguments);var n=t||{},o=n.locale,i=o&&o.options&&o.options.firstWeekContainsDate,u=i==null?1:X(i),f=n.firstWeekContainsDate==null?u:X(n.firstWeekContainsDate),h=Cr(r,t),p=new Date(0);p.setUTCFullYear(h,0,f),p.setUTCHours(0,0,0,0);var c=ct(p,t);return c}var Hf=6048e5;function ka(r,t){M(1,arguments);var n=$(r),o=ct(n,t).getTime()-Wa(n,t).getTime();return Math.round(o/Hf)+1}function B(r,t){for(var n=r<0?"-":"",o=Math.abs(r).toString();o.length<t;)o="0"+o;return n+o}var $f={y:function(r,t){var n=r.getUTCFullYear(),o=n>0?n:1-n;return B(t==="yy"?o%100:o,t.length)},M:function(r,t){var n=r.getUTCMonth();return t==="M"?String(n+1):B(n+1,2)},d:function(r,t){return B(r.getUTCDate(),t.length)},a:function(r,t){var n=r.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h:function(r,t){return B(r.getUTCHours()%12||12,t.length)},H:function(r,t){return B(r.getUTCHours(),t.length)},m:function(r,t){return B(r.getUTCMinutes(),t.length)},s:function(r,t){return B(r.getUTCSeconds(),t.length)},S:function(r,t){var n=t.length,o=r.getUTCMilliseconds(),i=Math.floor(o*Math.pow(10,n-3));return B(i,t.length)}},Xe=$f;var Qt={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Yf={G:function(r,t,n){var o=r.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(o,{width:"abbreviated"});case"GGGGG":return n.era(o,{width:"narrow"});case"GGGG":default:return n.era(o,{width:"wide"})}},y:function(r,t,n){if(t==="yo"){var o=r.getUTCFullYear(),i=o>0?o:1-o;return n.ordinalNumber(i,{unit:"year"})}return Xe.y(r,t)},Y:function(r,t,n,o){var i=Cr(r,o),u=i>0?i:1-i;if(t==="YY"){var f=u%100;return B(f,2)}return t==="Yo"?n.ordinalNumber(u,{unit:"year"}):B(u,t.length)},R:function(r,t){var n=Tr(r);return B(n,t.length)},u:function(r,t){var n=r.getUTCFullYear();return B(n,t.length)},Q:function(r,t,n){var o=Math.ceil((r.getUTCMonth()+1)/3);switch(t){case"Q":return String(o);case"QQ":return B(o,2);case"Qo":return n.ordinalNumber(o,{unit:"quarter"});case"QQQ":return n.quarter(o,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(o,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(o,{width:"wide",context:"formatting"})}},q:function(r,t,n){var o=Math.ceil((r.getUTCMonth()+1)/3);switch(t){case"q":return String(o);case"qq":return B(o,2);case"qo":return n.ordinalNumber(o,{unit:"quarter"});case"qqq":return n.quarter(o,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(o,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(o,{width:"wide",context:"standalone"})}},M:function(r,t,n){var o=r.getUTCMonth();switch(t){case"M":case"MM":return Xe.M(r,t);case"Mo":return n.ordinalNumber(o+1,{unit:"month"});case"MMM":return n.month(o,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(o,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(o,{width:"wide",context:"formatting"})}},L:function(r,t,n){var o=r.getUTCMonth();switch(t){case"L":return String(o+1);case"LL":return B(o+1,2);case"Lo":return n.ordinalNumber(o+1,{unit:"month"});case"LLL":return n.month(o,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(o,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(o,{width:"wide",context:"standalone"})}},w:function(r,t,n,o){var i=ka(r,o);return t==="wo"?n.ordinalNumber(i,{unit:"week"}):B(i,t.length)},I:function(r,t,n){var o=Da(r);return t==="Io"?n.ordinalNumber(o,{unit:"week"}):B(o,t.length)},d:function(r,t,n){return t==="do"?n.ordinalNumber(r.getUTCDate(),{unit:"date"}):Xe.d(r,t)},D:function(r,t,n){var o=Aa(r);return t==="Do"?n.ordinalNumber(o,{unit:"dayOfYear"}):B(o,t.length)},E:function(r,t,n){var o=r.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(o,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(o,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(o,{width:"short",context:"formatting"});case"EEEE":default:return n.day(o,{width:"wide",context:"formatting"})}},e:function(r,t,n,o){var i=r.getUTCDay(),u=(i-o.weekStartsOn+8)%7||7;switch(t){case"e":return String(u);case"ee":return B(u,2);case"eo":return n.ordinalNumber(u,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(r,t,n,o){var i=r.getUTCDay(),u=(i-o.weekStartsOn+8)%7||7;switch(t){case"c":return String(u);case"cc":return B(u,t.length);case"co":return n.ordinalNumber(u,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(r,t,n){var o=r.getUTCDay(),i=o===0?7:o;switch(t){case"i":return String(i);case"ii":return B(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(o,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(o,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(o,{width:"short",context:"formatting"});case"iiii":default:return n.day(o,{width:"wide",context:"formatting"})}},a:function(r,t,n){var o=r.getUTCHours(),i=o/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(r,t,n){var o=r.getUTCHours(),i;switch(o===12?i=Qt.noon:o===0?i=Qt.midnight:i=o/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(r,t,n){var o=r.getUTCHours(),i;switch(o>=17?i=Qt.evening:o>=12?i=Qt.afternoon:o>=4?i=Qt.morning:i=Qt.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(r,t,n){if(t==="ho"){var o=r.getUTCHours()%12;return o===0&&(o=12),n.ordinalNumber(o,{unit:"hour"})}return Xe.h(r,t)},H:function(r,t,n){return t==="Ho"?n.ordinalNumber(r.getUTCHours(),{unit:"hour"}):Xe.H(r,t)},K:function(r,t,n){var o=r.getUTCHours()%12;return t==="Ko"?n.ordinalNumber(o,{unit:"hour"}):B(o,t.length)},k:function(r,t,n){var o=r.getUTCHours();return o===0&&(o=24),t==="ko"?n.ordinalNumber(o,{unit:"hour"}):B(o,t.length)},m:function(r,t,n){return t==="mo"?n.ordinalNumber(r.getUTCMinutes(),{unit:"minute"}):Xe.m(r,t)},s:function(r,t,n){return t==="so"?n.ordinalNumber(r.getUTCSeconds(),{unit:"second"}):Xe.s(r,t)},S:function(r,t){return Xe.S(r,t)},X:function(r,t,n,o){var i=o._originalDate||r,u=i.getTimezoneOffset();if(u===0)return"Z";switch(t){case"X":return _s(u);case"XXXX":case"XX":return Dt(u);case"XXXXX":case"XXX":default:return Dt(u,":")}},x:function(r,t,n,o){var i=o._originalDate||r,u=i.getTimezoneOffset();switch(t){case"x":return _s(u);case"xxxx":case"xx":return Dt(u);case"xxxxx":case"xxx":default:return Dt(u,":")}},O:function(r,t,n,o){var i=o._originalDate||r,u=i.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Ss(u,":");case"OOOO":default:return"GMT"+Dt(u,":")}},z:function(r,t,n,o){var i=o._originalDate||r,u=i.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Ss(u,":");case"zzzz":default:return"GMT"+Dt(u,":")}},t:function(r,t,n,o){var i=o._originalDate||r,u=Math.floor(i.getTime()/1e3);return B(u,t.length)},T:function(r,t,n,o){var i=o._originalDate||r,u=i.getTime();return B(u,t.length)}};function Ss(r,t){var n=r>0?"-":"+",o=Math.abs(r),i=Math.floor(o/60),u=o%60;if(u===0)return n+String(i);var f=t||"";return n+String(i)+f+B(u,2)}function _s(r,t){if(r%60===0){var n=r>0?"-":"+";return n+B(Math.abs(r)/60,2)}return Dt(r,t)}function Dt(r,t){var n=t||"",o=r>0?"-":"+",i=Math.abs(r),u=B(Math.floor(i/60),2),f=B(i%60,2);return o+u+n+f}var vs=Yf;function Rs(r,t){switch(r){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}}function Ts(r,t){switch(r){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}}function Vf(r,t){var n=r.match(/(P+)(p+)?/)||[],o=n[1],i=n[2];if(!i)return Rs(r,t);var u;switch(o){case"P":u=t.dateTime({width:"short"});break;case"PP":u=t.dateTime({width:"medium"});break;case"PPP":u=t.dateTime({width:"long"});break;case"PPPP":default:u=t.dateTime({width:"full"});break}return u.replace("{{date}}",Rs(o,t)).replace("{{time}}",Ts(i,t))}var Qf={p:Ts,P:Vf},Cs=Qf;function Fa(r){var t=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()));return t.setUTCFullYear(r.getFullYear()),r.getTime()-t.getTime()}var Gf=["D","DD"],Xf=["YY","YYYY"];function Es(r){return Gf.indexOf(r)!==-1}function Ps(r){return Xf.indexOf(r)!==-1}function xa(r,t,n){if(r==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if(r==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if(r==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"));if(r==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"))}var Kf=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Jf=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Zf=/^'([^]*?)'?$/,ed=/''/g,td=/[a-zA-Z]/;function Ba(r,t,n){M(2,arguments);var o=String(t),i=n||{},u=i.locale||ws,f=u.options&&u.options.firstWeekContainsDate,h=f==null?1:X(f),p=i.firstWeekContainsDate==null?h:X(i.firstWeekContainsDate);if(!(p>=1&&p<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var c=u.options&&u.options.weekStartsOn,_=c==null?0:X(c),v=i.weekStartsOn==null?_:X(i.weekStartsOn);if(!(v>=0&&v<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!u.localize)throw new RangeError("locale must contain localize property");if(!u.formatLong)throw new RangeError("locale must contain formatLong property");var y=$(r);if(!Ta(y))throw new RangeError("Invalid time value");var w=Fa(y),S=Pa(y,w),E={firstWeekContainsDate:p,weekStartsOn:v,locale:u,_originalDate:y},T=o.match(Jf).map(function(g){var O=g[0];if(O==="p"||O==="P"){var I=Cs[O];return I(g,u.formatLong,E)}return g}).join("").match(Kf).map(function(g){if(g==="''")return"'";var O=g[0];if(O==="'")return rd(g);var I=vs[O];if(I)return!i.useAdditionalWeekYearTokens&&Ps(g)&&xa(g,t,r),!i.useAdditionalDayOfYearTokens&&Es(g)&&xa(g,t,r),I(S,g,u.localize,E);if(O.match(td))throw new RangeError("Format string contains an unescaped latin alphabet character `"+O+"`");return g}).join("");return T}function rd(r){return r.match(Zf)[1].replace(ed,"'")}var Ma=r=>Ba(new Date(r),"MMMM dd, yyyy hh:mm"),As=(r,t)=>r?r.filter(Boolean).join(t):"",Os=(r,t)=>r?"Loading...":t.toString();var Y=require("react/jsx-runtime"),Ds=({item:r})=>{let{data:t,loading:n}=cs(r.book_id),o=t?.highlights_url,i=`https://readwise.io/open/${r.id}`;return(0,Y.jsx)(V.Detail,{isLoading:n,actions:(0,Y.jsxs)(V.ActionPanel,{children:[(0,Y.jsx)(V.Action.CopyToClipboard,{title:"Copy Text",content:r.text,shortcut:{modifiers:["cmd"],key:"."}}),r.url&&(0,Y.jsx)(V.Action.OpenInBrowser,{title:"Open Source",url:r.url}),(0,Y.jsx)(V.Action.OpenInBrowser,{title:"Open Highlight",url:i}),o&&(0,Y.jsx)(V.Action.OpenInBrowser,{title:"Browse related highlights",url:o})]}),navigationTitle:"Highlight Detail",metadata:(0,Y.jsxs)(V.Detail.Metadata,{children:[(0,Y.jsx)(V.Detail.Metadata.Label,{title:"Author",text:t?.author||"-"}),(0,Y.jsx)(V.Detail.Metadata.Label,{title:"Category",text:t?.category||"-"}),(0,Y.jsx)(V.Detail.Metadata.Label,{title:"Source",text:t?.source||"-"}),(0,Y.jsx)(V.Detail.Metadata.Separator,{}),(0,Y.jsx)(V.Detail.Metadata.Label,{title:"Highlighted At",text:Ma(r.highlighted_at)}),(0,Y.jsx)(V.Detail.Metadata.Label,{title:"Updated At",text:Ma(r.updated)}),(0,Y.jsx)(hs,{tags:r.tags}),(0,Y.jsx)(V.Detail.Metadata.Separator,{}),r.url&&(0,Y.jsx)(V.Detail.Metadata.Link,{title:"Source",target:r.url,text:r.url}),(0,Y.jsx)(V.Action.OpenInBrowser,{title:"Open Highlight",url:i}),o&&(0,Y.jsx)(V.Detail.Metadata.Link,{title:"Related",text:"Browse related highlights",target:o}),(0,Y.jsx)(V.Detail.Metadata.Separator,{})]}),markdown:As([`## Highlight
${r.text}`,r.note&&`## Notes
${r.note}`],`

`)})};var ht=require("react/jsx-runtime"),Ws=({actions:r,item:t})=>(0,ht.jsx)(Ae.List.Item,{title:t.text,subtitle:t.note,keywords:t.tags.map(n=>n.name),accessories:t.url&&[{text:t.url,icon:Ae.Icon.Link}]||void 0,actions:(0,ht.jsxs)(Ae.ActionPanel,{children:[(0,ht.jsx)(Ae.Action.Push,{icon:Ae.Icon.Document,title:"Show Details",target:(0,ht.jsx)(Ds,{item:t})}),t.url&&(0,ht.jsx)(Ae.Action.OpenInBrowser,{title:"Open in Browser",url:t.url}),(0,ht.jsx)(Ae.Action.CopyToClipboard,{title:"Copy Text",content:t.text,shortcut:{modifiers:["cmd"],key:"."}}),r]})});var qa=require("@raycast/api");var Ke=require("react/jsx-runtime"),ad=()=>(0,Ke.jsx)(qa.List.EmptyView,{title:"No Results",icon:{source:"empty-view.png"}}),ks=({actions:r,data:t,loading:n,listView:o})=>{let i=t?.results.length||0,u=Os(n,i);return(0,Ke.jsxs)(Ke.Fragment,{children:[(0,Ke.jsx)(ad,{}),(0,Ke.jsx)(qa.List.Section,{title:"Results",subtitle:u,children:t?.results.map(f=>(0,Ke.jsx)(o,{item:f,actions:r},f.id))})]})};var Tn=require("@raycast/api"),Me=require("react/jsx-runtime"),Fs=({onNextAction:r,onPreviousAction:t,onHomeAction:n})=>(0,Me.jsxs)(Me.Fragment,{children:[r&&(0,Me.jsx)(Tn.Action,{icon:"\u27A1\uFE0F",title:"Next Page",onAction:r,shortcut:{modifiers:["cmd"],key:"arrowRight"}}),t&&(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)(Tn.Action,{icon:"\u2B05\uFE0F",title:"Previous Page",onAction:t,shortcut:{modifiers:["cmd"],key:"arrowLeft"}}),(0,Me.jsx)(Tn.Action,{icon:"\u{1F3E0}",title:"Back to Home",onAction:n,shortcut:{modifiers:["cmd"],key:"0"}})]})]});var Cn=require("react/jsx-runtime");function Bs(){let{data:r,loading:t,refetch:n}=ds(),{next:o,previous:i}=r||{};return(0,Cn.jsx)(xs.List,{isLoading:t,enableFiltering:!0,children:(0,Cn.jsx)(ks,{loading:t,data:r,actions:(0,Cn.jsx)(Fs,{onHomeAction:()=>n(Sa),onNextAction:o?()=>n(o):void 0,onPreviousAction:i?()=>i&&n(i):void 0}),listView:Ws})})}
/*! Bundled license information:

fetch-blob/index.js:
  (*! fetch-blob. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

formdata-polyfill/esm.min.js:
  (*! formdata-polyfill. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

node-domexception/index.js:
  (*! node-domexception. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

swr/dist/index.mjs:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)
*/
