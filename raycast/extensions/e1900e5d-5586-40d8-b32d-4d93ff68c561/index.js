var Tt=Object.create;var L=Object.defineProperty;var kt=Object.getOwnPropertyDescriptor;var Ct=Object.getOwnPropertyNames;var Ut=Object.getPrototypeOf,Nt=Object.prototype.hasOwnProperty;var ye=e=>L(e,"__esModule",{value:!0});var b=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Wt=(e,t)=>{for(var r in t)L(e,r,{get:t[r],enumerable:!0})},ge=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Ct(t))!Nt.call(e,s)&&(r||s!=="default")&&L(e,s,{get:()=>t[s],enumerable:!(n=kt(t,s))||n.enumerable});return e},Bt=(e,t)=>ge(ye(L(e!=null?Tt(Ut(e)):{},"default",!t&&e&&e.__esModule?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),zt=(e=>(t,r)=>e&&e.get(t)||(r=ge(ye({}),t,1),e&&e.set(t,r),r))(typeof WeakMap!="undefined"?new WeakMap:0);var Pe=b($=>{"use strict";Object.defineProperty($,"__esModule",{value:!0});function N(e){let t=[...e.caches],r=t.shift();return r===void 0?fe():{get(n,s,o={miss:()=>Promise.resolve()}){return r.get(n,s,o).catch(()=>N({caches:t}).get(n,s,o))},set(n,s){return r.set(n,s).catch(()=>N({caches:t}).set(n,s))},delete(n){return r.delete(n).catch(()=>N({caches:t}).delete(n))},clear(){return r.clear().catch(()=>N({caches:t}).clear())}}}function fe(){return{get(e,t,r={miss:()=>Promise.resolve()}){return t().then(s=>Promise.all([s,r.miss(s)])).then(([s])=>s)},set(e,t){return Promise.resolve(t)},delete(e){return Promise.resolve()},clear(){return Promise.resolve()}}}$.createFallbackableCache=N;$.createNullCache=fe});var Ee=b((_n,be)=>{be.exports=Pe()});var Ie=b(Z=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});function _t(e={serializable:!0}){let t={};return{get(r,n,s={miss:()=>Promise.resolve()}){let o=JSON.stringify(r);if(o in t)return Promise.resolve(e.serializable?JSON.parse(t[o]):t[o]);let i=n(),l=s&&s.miss||(()=>Promise.resolve());return i.then(m=>l(m)).then(()=>i)},set(r,n){return t[JSON.stringify(r)]=e.serializable?JSON.stringify(n):n,Promise.resolve(n)},delete(r){return delete t[JSON.stringify(r)],Promise.resolve()},clear(){return t={},Promise.resolve()}}}Z.createInMemoryCache=_t});var Ae=b((Fn,Se)=>{Se.exports=Ie()});var De=b(w=>{"use strict";Object.defineProperty(w,"__esModule",{value:!0});function Kt(e,t,r){let n={"x-algolia-api-key":r,"x-algolia-application-id":t};return{headers(){return e===ee.WithinHeaders?n:{}},queryParameters(){return e===ee.WithinQueryParameters?n:{}}}}function Ft(e){let t=0,r=()=>(t++,new Promise(n=>{setTimeout(()=>{n(e(r))},Math.min(100*t,1e3))}));return e(r)}function Oe(e,t=(r,n)=>Promise.resolve()){return Object.assign(e,{wait(r){return Oe(e.then(n=>Promise.all([t(n,r),n])).then(n=>n[1]))}})}function Gt(e){let t=e.length-1;for(t;t>0;t--){let r=Math.floor(Math.random()*(t+1)),n=e[t];e[t]=e[r],e[r]=n}return e}function Ht(e,t){return t&&Object.keys(t).forEach(r=>{e[r]=t[r](e)}),e}function Lt(e,...t){let r=0;return e.replace(/%s/g,()=>encodeURIComponent(t[r++]))}var $t="4.11.0",Vt=e=>()=>e.transporter.requester.destroy(),ee={WithinQueryParameters:0,WithinHeaders:1};w.AuthMode=ee;w.addMethods=Ht;w.createAuth=Kt;w.createRetryablePromise=Ft;w.createWaitablePromise=Oe;w.destroy=Vt;w.encode=Lt;w.shuffle=Gt;w.version=$t});var W=b((Hn,je)=>{je.exports=De()});var xe=b(te=>{"use strict";Object.defineProperty(te,"__esModule",{value:!0});var Qt={Delete:"DELETE",Get:"GET",Post:"POST",Put:"PUT"};te.MethodEnum=Qt});var B=b(($n,we)=>{we.exports=xe()});var Fe=b(E=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});var Me=B();function re(e,t){let r=e||{},n=r.data||{};return Object.keys(r).forEach(s=>{["timeout","headers","queryParameters","data","cacheable"].indexOf(s)===-1&&(n[s]=r[s])}),{data:Object.entries(n).length>0?n:void 0,timeout:r.timeout||t,headers:r.headers||{},queryParameters:r.queryParameters||{},cacheable:r.cacheable}}var z={Read:1,Write:2,Any:3},T={Up:1,Down:2,Timeouted:3},Re=2*60*1e3;function ne(e,t=T.Up){return{...e,status:t,lastUpdate:Date.now()}}function ve(e){return e.status===T.Up||Date.now()-e.lastUpdate>Re}function qe(e){return e.status===T.Timeouted&&Date.now()-e.lastUpdate<=Re}function se(e){return typeof e=="string"?{protocol:"https",url:e,accept:z.Any}:{protocol:e.protocol||"https",url:e.url,accept:e.accept||z.Any}}function Jt(e,t){return Promise.all(t.map(r=>e.get(r,()=>Promise.resolve(ne(r))))).then(r=>{let n=r.filter(l=>ve(l)),s=r.filter(l=>qe(l)),o=[...n,...s],i=o.length>0?o.map(l=>se(l)):t;return{getTimeout(l,m){return(s.length===0&&l===0?1:s.length+3+l)*m},statelessHosts:i}})}var Xt=({isTimedOut:e,status:t})=>!e&&~~t===0,Yt=e=>{let t=e.status;return e.isTimedOut||Xt(e)||~~(t/100)!==2&&~~(t/100)!==4},Zt=({status:e})=>~~(e/100)===2,er=(e,t)=>Yt(e)?t.onRetry(e):Zt(e)?t.onSuccess(e):t.onFail(e);function Te(e,t,r,n){let s=[],o=We(r,n),i=Be(e,n),l=r.method,m=r.method!==Me.MethodEnum.Get?{}:{...r.data,...n.data},h={"x-algolia-agent":e.userAgent.value,...e.queryParameters,...m,...n.queryParameters},g=0,p=(f,A)=>{let y=f.pop();if(y===void 0)throw Ke(ae(s));let I={data:o,headers:i,method:l,url:Ue(y,r.path,h),connectTimeout:A(g,e.timeouts.connect),responseTimeout:A(g,n.timeout)},O=P=>{let M={request:I,response:P,host:y,triesLeft:f.length};return s.push(M),M},x={onSuccess:P=>ke(P),onRetry(P){let M=O(P);return P.isTimedOut&&g++,Promise.all([e.logger.info("Retryable failure",oe(M)),e.hostsCache.set(y,ne(y,P.isTimedOut?T.Timeouted:T.Down))]).then(()=>p(f,A))},onFail(P){throw O(P),Ce(P,ae(s))}};return e.requester.send(I).then(P=>er(P,x))};return Jt(e.hostsCache,t).then(f=>p([...f.statelessHosts].reverse(),f.getTimeout))}function tr(e){let{hostsCache:t,logger:r,requester:n,requestsCache:s,responsesCache:o,timeouts:i,userAgent:l,hosts:m,queryParameters:h,headers:g}=e,p={hostsCache:t,logger:r,requester:n,requestsCache:s,responsesCache:o,timeouts:i,userAgent:l,headers:g,queryParameters:h,hosts:m.map(f=>se(f)),read(f,A){let y=re(A,p.timeouts.read),I=()=>Te(p,p.hosts.filter(P=>(P.accept&z.Read)!==0),f,y);if((y.cacheable!==void 0?y.cacheable:f.cacheable)!==!0)return I();let x={request:f,mappedRequestOptions:y,transporter:{queryParameters:p.queryParameters,headers:p.headers}};return p.responsesCache.get(x,()=>p.requestsCache.get(x,()=>p.requestsCache.set(x,I()).then(P=>Promise.all([p.requestsCache.delete(x),P]),P=>Promise.all([p.requestsCache.delete(x),Promise.reject(P)])).then(([P,M])=>M)),{miss:P=>p.responsesCache.set(x,P)})},write(f,A){return Te(p,p.hosts.filter(y=>(y.accept&z.Write)!==0),f,re(A,p.timeouts.write))}};return p}function rr(e){let t={value:`Algolia for JavaScript (${e})`,add(r){let n=`; ${r.segment}${r.version!==void 0?` (${r.version})`:""}`;return t.value.indexOf(n)===-1&&(t.value=`${t.value}${n}`),t}};return t}function ke(e){try{return JSON.parse(e.content)}catch(t){throw _e(t.message,e)}}function Ce({content:e,status:t},r){let n=e;try{n=JSON.parse(e).message}catch{}return ze(n,t,r)}function nr(e,...t){let r=0;return e.replace(/%s/g,()=>encodeURIComponent(t[r++]))}function Ue(e,t,r){let n=Ne(r),s=`${e.protocol}://${e.url}/${t.charAt(0)==="/"?t.substr(1):t}`;return n.length&&(s+=`?${n}`),s}function Ne(e){let t=r=>Object.prototype.toString.call(r)==="[object Object]"||Object.prototype.toString.call(r)==="[object Array]";return Object.keys(e).map(r=>nr("%s=%s",r,t(e[r])?JSON.stringify(e[r]):e[r])).join("&")}function We(e,t){if(e.method===Me.MethodEnum.Get||e.data===void 0&&t.data===void 0)return;let r=Array.isArray(e.data)?e.data:{...e.data,...t.data};return JSON.stringify(r)}function Be(e,t){let r={...e.headers,...t.headers},n={};return Object.keys(r).forEach(s=>{let o=r[s];n[s.toLowerCase()]=o}),n}function ae(e){return e.map(t=>oe(t))}function oe(e){let t=e.request.headers["x-algolia-api-key"]?{"x-algolia-api-key":"*****"}:{};return{...e,request:{...e.request,headers:{...e.request.headers,...t}}}}function ze(e,t,r){return{name:"ApiError",message:e,status:t,transporterStackTrace:r}}function _e(e,t){return{name:"DeserializationError",message:e,response:t}}function Ke(e){return{name:"RetryError",message:"Unreachable hosts - your application id may be incorrect. If the error persists, contact support@algolia.com.",transporterStackTrace:e}}E.CallEnum=z;E.HostStatusEnum=T;E.createApiError=ze;E.createDeserializationError=_e;E.createMappedRequestOptions=re;E.createRetryError=Ke;E.createStatefulHost=ne;E.createStatelessHost=se;E.createTransporter=tr;E.createUserAgent=rr;E.deserializeFailure=Ce;E.deserializeSuccess=ke;E.isStatefulHostTimeouted=qe;E.isStatefulHostUp=ve;E.serializeData=We;E.serializeHeaders=Be;E.serializeQueryParameters=Ne;E.serializeUrl=Ue;E.stackFrameWithoutCredentials=oe;E.stackTraceWithoutCredentials=ae});var _=b((Qn,Ge)=>{Ge.exports=Fe()});var He=b(R=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});var k=W(),sr=_(),K=B(),ar=e=>{let t=e.region||"us",r=k.createAuth(k.AuthMode.WithinHeaders,e.appId,e.apiKey),n=sr.createTransporter({hosts:[{url:`analytics.${t}.algolia.com`}],...e,headers:{...r.headers(),"content-type":"application/json",...e.headers},queryParameters:{...r.queryParameters(),...e.queryParameters}}),s=e.appId;return k.addMethods({appId:s,transporter:n},e.methods)},or=e=>(t,r)=>e.transporter.write({method:K.MethodEnum.Post,path:"2/abtests",data:t},r),ir=e=>(t,r)=>e.transporter.write({method:K.MethodEnum.Delete,path:k.encode("2/abtests/%s",t)},r),cr=e=>(t,r)=>e.transporter.read({method:K.MethodEnum.Get,path:k.encode("2/abtests/%s",t)},r),ur=e=>t=>e.transporter.read({method:K.MethodEnum.Get,path:"2/abtests"},t),dr=e=>(t,r)=>e.transporter.write({method:K.MethodEnum.Post,path:k.encode("2/abtests/%s/stop",t)},r);R.addABTest=or;R.createAnalyticsClient=ar;R.deleteABTest=ir;R.getABTest=cr;R.getABTests=ur;R.stopABTest=dr});var $e=b((Xn,Le)=>{Le.exports=He()});var Qe=b(F=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0});var ie=W(),lr=_(),Ve=B(),mr=e=>{let t=e.region||"us",r=ie.createAuth(ie.AuthMode.WithinHeaders,e.appId,e.apiKey),n=lr.createTransporter({hosts:[{url:`personalization.${t}.algolia.com`}],...e,headers:{...r.headers(),"content-type":"application/json",...e.headers},queryParameters:{...r.queryParameters(),...e.queryParameters}});return ie.addMethods({appId:e.appId,transporter:n},e.methods)},pr=e=>t=>e.transporter.read({method:Ve.MethodEnum.Get,path:"1/strategies/personalization"},t),hr=e=>(t,r)=>e.transporter.write({method:Ve.MethodEnum.Post,path:"1/strategies/personalization",data:t},r);F.createPersonalizationClient=mr;F.getPersonalizationStrategy=pr;F.setPersonalizationStrategy=hr});var Xe=b((Zn,Je)=>{Je.exports=Qe()});var lt=b(a=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});var u=W(),D=_(),d=B(),yr=require("crypto");function V(e){let t=r=>e.request(r).then(n=>{if(e.batch!==void 0&&e.batch(n.hits),!e.shouldStop(n))return n.cursor?t({cursor:n.cursor}):t({page:(r.page||0)+1})});return t({})}var gr=e=>{let t=e.appId,r=u.createAuth(e.authMode!==void 0?e.authMode:u.AuthMode.WithinHeaders,t,e.apiKey),n=D.createTransporter({hosts:[{url:`${t}-dsn.algolia.net`,accept:D.CallEnum.Read},{url:`${t}.algolia.net`,accept:D.CallEnum.Write}].concat(u.shuffle([{url:`${t}-1.algolianet.com`},{url:`${t}-2.algolianet.com`},{url:`${t}-3.algolianet.com`}])),...e,headers:{...r.headers(),"content-type":"application/x-www-form-urlencoded",...e.headers},queryParameters:{...r.queryParameters(),...e.queryParameters}}),s={transporter:n,appId:t,addAlgoliaAgent(o,i){n.userAgent.add({segment:o,version:i})},clearCache(){return Promise.all([n.requestsCache.clear(),n.responsesCache.clear()]).then(()=>{})}};return u.addMethods(s,e.methods)};function Ye(){return{name:"MissingObjectIDError",message:"All objects must have an unique objectID (like a primary key) to be valid. Algolia is also able to generate objectIDs automatically but *it's not recommended*. To do it, use the `{'autoGenerateObjectIDIfNotExist': true}` option."}}function Ze(){return{name:"ObjectNotFoundError",message:"Object not found."}}function et(){return{name:"ValidUntilNotFoundError",message:"ValidUntil not found in given secured api key."}}var fr=e=>(t,r)=>{let{queryParameters:n,...s}=r||{},o={acl:t,...n!==void 0?{queryParameters:n}:{}},i=(l,m)=>u.createRetryablePromise(h=>G(e)(l.key,m).catch(g=>{if(g.status!==404)throw g;return h()}));return u.createWaitablePromise(e.transporter.write({method:d.MethodEnum.Post,path:"1/keys",data:o},s),i)},Pr=e=>(t,r,n)=>{let s=D.createMappedRequestOptions(n);return s.queryParameters["X-Algolia-User-ID"]=t,e.transporter.write({method:d.MethodEnum.Post,path:"1/clusters/mapping",data:{cluster:r}},s)},br=e=>(t,r,n)=>e.transporter.write({method:d.MethodEnum.Post,path:"1/clusters/mapping/batch",data:{users:t,cluster:r}},n),Er=e=>(t,r)=>u.createWaitablePromise(e.transporter.write({method:d.MethodEnum.Post,path:u.encode("/1/dictionaries/%s/batch",t),data:{clearExistingDictionaryEntries:!0,requests:{action:"addEntry",body:[]}}},r),(n,s)=>C(e)(n.taskID,s)),Q=e=>(t,r,n)=>{let s=(o,i)=>H(e)(t,{methods:{waitTask:S}}).waitTask(o.taskID,i);return u.createWaitablePromise(e.transporter.write({method:d.MethodEnum.Post,path:u.encode("1/indexes/%s/operation",t),data:{operation:"copy",destination:r}},n),s)},Ir=e=>(t,r,n)=>Q(e)(t,r,{...n,scope:[X.Rules]}),Sr=e=>(t,r,n)=>Q(e)(t,r,{...n,scope:[X.Settings]}),Ar=e=>(t,r,n)=>Q(e)(t,r,{...n,scope:[X.Synonyms]}),Or=e=>(t,r)=>t.method===d.MethodEnum.Get?e.transporter.read(t,r):e.transporter.write(t,r),Dr=e=>(t,r)=>{let n=(s,o)=>u.createRetryablePromise(i=>G(e)(t,o).then(i).catch(l=>{if(l.status!==404)throw l}));return u.createWaitablePromise(e.transporter.write({method:d.MethodEnum.Delete,path:u.encode("1/keys/%s",t)},r),n)},jr=e=>(t,r,n)=>{let s=r.map(o=>({action:"deleteEntry",body:{objectID:o}}));return u.createWaitablePromise(e.transporter.write({method:d.MethodEnum.Post,path:u.encode("/1/dictionaries/%s/batch",t),data:{clearExistingDictionaryEntries:!1,requests:s}},n),(o,i)=>C(e)(o.taskID,i))},xr=()=>(e,t)=>{let r=D.serializeQueryParameters(t),n=yr.createHmac("sha256",e).update(r).digest("hex");return Buffer.from(n+r).toString("base64")},G=e=>(t,r)=>e.transporter.read({method:d.MethodEnum.Get,path:u.encode("1/keys/%s",t)},r),wr=e=>t=>e.transporter.read({method:d.MethodEnum.Get,path:"/1/dictionaries/*/settings"},t),Mr=e=>t=>e.transporter.read({method:d.MethodEnum.Get,path:"1/logs"},t),Rr=()=>e=>{let t=Buffer.from(e,"base64").toString("ascii"),r=/validUntil=(\d+)/,n=t.match(r);if(n===null)throw et();return parseInt(n[1],10)-Math.round(new Date().getTime()/1e3)},vr=e=>t=>e.transporter.read({method:d.MethodEnum.Get,path:"1/clusters/mapping/top"},t),tt=e=>(t,r)=>e.transporter.read({method:d.MethodEnum.Get,path:u.encode("1/task/%s",t.toString())},r),qr=e=>(t,r)=>e.transporter.read({method:d.MethodEnum.Get,path:u.encode("1/clusters/mapping/%s",t)},r),Tr=e=>t=>{let{retrieveMappings:r,...n}=t||{};return r===!0&&(n.getClusters=!0),e.transporter.read({method:d.MethodEnum.Get,path:"1/clusters/mapping/pending"},n)},H=e=>(t,r={})=>{let n={transporter:e.transporter,appId:e.appId,indexName:t};return u.addMethods(n,r.methods)},kr=e=>t=>e.transporter.read({method:d.MethodEnum.Get,path:"1/keys"},t),Cr=e=>t=>e.transporter.read({method:d.MethodEnum.Get,path:"1/clusters"},t),Ur=e=>t=>e.transporter.read({method:d.MethodEnum.Get,path:"1/indexes"},t),Nr=e=>t=>e.transporter.read({method:d.MethodEnum.Get,path:"1/clusters/mapping"},t),Wr=e=>(t,r,n)=>{let s=(o,i)=>H(e)(t,{methods:{waitTask:S}}).waitTask(o.taskID,i);return u.createWaitablePromise(e.transporter.write({method:d.MethodEnum.Post,path:u.encode("1/indexes/%s/operation",t),data:{operation:"move",destination:r}},n),s)},Br=e=>(t,r)=>{let n=(s,o)=>Promise.all(Object.keys(s.taskID).map(i=>H(e)(i,{methods:{waitTask:S}}).waitTask(s.taskID[i],o)));return u.createWaitablePromise(e.transporter.write({method:d.MethodEnum.Post,path:"1/indexes/*/batch",data:{requests:t}},r),n)},zr=e=>(t,r)=>e.transporter.read({method:d.MethodEnum.Post,path:"1/indexes/*/objects",data:{requests:t}},r),_r=e=>(t,r)=>{let n=t.map(s=>({...s,params:D.serializeQueryParameters(s.params||{})}));return e.transporter.read({method:d.MethodEnum.Post,path:"1/indexes/*/queries",data:{requests:n},cacheable:!0},r)},Kr=e=>(t,r)=>Promise.all(t.map(n=>{let{facetName:s,facetQuery:o,...i}=n.params;return H(e)(n.indexName,{methods:{searchForFacetValues:ct}}).searchForFacetValues(s,o,{...r,...i})})),Fr=e=>(t,r)=>{let n=D.createMappedRequestOptions(r);return n.queryParameters["X-Algolia-User-ID"]=t,e.transporter.write({method:d.MethodEnum.Delete,path:"1/clusters/mapping"},n)},Gr=e=>(t,r,n)=>{let s=r.map(o=>({action:"addEntry",body:o}));return u.createWaitablePromise(e.transporter.write({method:d.MethodEnum.Post,path:u.encode("/1/dictionaries/%s/batch",t),data:{clearExistingDictionaryEntries:!0,requests:s}},n),(o,i)=>C(e)(o.taskID,i))},Hr=e=>(t,r)=>{let n=(s,o)=>u.createRetryablePromise(i=>G(e)(t,o).catch(l=>{if(l.status!==404)throw l;return i()}));return u.createWaitablePromise(e.transporter.write({method:d.MethodEnum.Post,path:u.encode("1/keys/%s/restore",t)},r),n)},Lr=e=>(t,r,n)=>{let s=r.map(o=>({action:"addEntry",body:o}));return u.createWaitablePromise(e.transporter.write({method:d.MethodEnum.Post,path:u.encode("/1/dictionaries/%s/batch",t),data:{clearExistingDictionaryEntries:!1,requests:s}},n),(o,i)=>C(e)(o.taskID,i))},$r=e=>(t,r,n)=>e.transporter.read({method:d.MethodEnum.Post,path:u.encode("/1/dictionaries/%s/search",t),data:{query:r},cacheable:!0},n),Vr=e=>(t,r)=>e.transporter.read({method:d.MethodEnum.Post,path:"1/clusters/mapping/search",data:{query:t}},r),Qr=e=>(t,r)=>u.createWaitablePromise(e.transporter.write({method:d.MethodEnum.Put,path:"/1/dictionaries/*/settings",data:t},r),(n,s)=>C(e)(n.taskID,s)),Jr=e=>(t,r)=>{let n=Object.assign({},r),{queryParameters:s,...o}=r||{},i=s?{queryParameters:s}:{},l=["acl","indexes","referers","restrictSources","queryParameters","description","maxQueriesPerIPPerHour","maxHitsPerQuery"],m=g=>Object.keys(n).filter(p=>l.indexOf(p)!==-1).every(p=>g[p]===n[p]),h=(g,p)=>u.createRetryablePromise(f=>G(e)(t,p).then(A=>m(A)?Promise.resolve():f()));return u.createWaitablePromise(e.transporter.write({method:d.MethodEnum.Put,path:u.encode("1/keys/%s",t),data:i},o),h)},C=e=>(t,r)=>u.createRetryablePromise(n=>tt(e)(t,r).then(s=>s.status!=="published"?n():void 0)),rt=e=>(t,r)=>{let n=(s,o)=>S(e)(s.taskID,o);return u.createWaitablePromise(e.transporter.write({method:d.MethodEnum.Post,path:u.encode("1/indexes/%s/batch",e.indexName),data:{requests:t}},r),n)},Xr=e=>t=>V({shouldStop:r=>r.cursor===void 0,...t,request:r=>e.transporter.read({method:d.MethodEnum.Post,path:u.encode("1/indexes/%s/browse",e.indexName),data:r},t)}),Yr=e=>t=>{let r={hitsPerPage:1e3,...t};return V({shouldStop:n=>n.hits.length<r.hitsPerPage,...r,request(n){return ut(e)("",{...r,...n}).then(s=>({...s,hits:s.hits.map(o=>(delete o._highlightResult,o))}))}})},Zr=e=>t=>{let r={hitsPerPage:1e3,...t};return V({shouldStop:n=>n.hits.length<r.hitsPerPage,...r,request(n){return dt(e)("",{...r,...n}).then(s=>({...s,hits:s.hits.map(o=>(delete o._highlightResult,o))}))}})},J=e=>(t,r,n)=>{let{batchSize:s,...o}=n||{},i={taskIDs:[],objectIDs:[]},l=(m=0)=>{let h=[],g;for(g=m;g<t.length&&(h.push(t[g]),h.length!==(s||1e3));g++);return h.length===0?Promise.resolve(i):rt(e)(h.map(p=>({action:r,body:p})),o).then(p=>(i.objectIDs=i.objectIDs.concat(p.objectIDs),i.taskIDs.push(p.taskID),g++,l(g)))};return u.createWaitablePromise(l(),(m,h)=>Promise.all(m.taskIDs.map(g=>S(e)(g,h))))},en=e=>t=>u.createWaitablePromise(e.transporter.write({method:d.MethodEnum.Post,path:u.encode("1/indexes/%s/clear",e.indexName)},t),(r,n)=>S(e)(r.taskID,n)),tn=e=>t=>{let{forwardToReplicas:r,...n}=t||{},s=D.createMappedRequestOptions(n);return r&&(s.queryParameters.forwardToReplicas=1),u.createWaitablePromise(e.transporter.write({method:d.MethodEnum.Post,path:u.encode("1/indexes/%s/rules/clear",e.indexName)},s),(o,i)=>S(e)(o.taskID,i))},rn=e=>t=>{let{forwardToReplicas:r,...n}=t||{},s=D.createMappedRequestOptions(n);return r&&(s.queryParameters.forwardToReplicas=1),u.createWaitablePromise(e.transporter.write({method:d.MethodEnum.Post,path:u.encode("1/indexes/%s/synonyms/clear",e.indexName)},s),(o,i)=>S(e)(o.taskID,i))},nn=e=>(t,r)=>u.createWaitablePromise(e.transporter.write({method:d.MethodEnum.Post,path:u.encode("1/indexes/%s/deleteByQuery",e.indexName),data:t},r),(n,s)=>S(e)(n.taskID,s)),sn=e=>t=>u.createWaitablePromise(e.transporter.write({method:d.MethodEnum.Delete,path:u.encode("1/indexes/%s",e.indexName)},t),(r,n)=>S(e)(r.taskID,n)),an=e=>(t,r)=>u.createWaitablePromise(nt(e)([t],r).then(n=>({taskID:n.taskIDs[0]})),(n,s)=>S(e)(n.taskID,s)),nt=e=>(t,r)=>{let n=t.map(s=>({objectID:s}));return J(e)(n,q.DeleteObject,r)},on=e=>(t,r)=>{let{forwardToReplicas:n,...s}=r||{},o=D.createMappedRequestOptions(s);return n&&(o.queryParameters.forwardToReplicas=1),u.createWaitablePromise(e.transporter.write({method:d.MethodEnum.Delete,path:u.encode("1/indexes/%s/rules/%s",e.indexName,t)},o),(i,l)=>S(e)(i.taskID,l))},cn=e=>(t,r)=>{let{forwardToReplicas:n,...s}=r||{},o=D.createMappedRequestOptions(s);return n&&(o.queryParameters.forwardToReplicas=1),u.createWaitablePromise(e.transporter.write({method:d.MethodEnum.Delete,path:u.encode("1/indexes/%s/synonyms/%s",e.indexName,t)},o),(i,l)=>S(e)(i.taskID,l))},un=e=>t=>st(e)(t).then(()=>!0).catch(r=>{if(r.status!==404)throw r;return!1}),dn=e=>(t,r,n)=>e.transporter.read({method:d.MethodEnum.Post,path:u.encode("1/answers/%s/prediction",e.indexName),data:{query:t,queryLanguages:r},cacheable:!0},n),ln=e=>(t,r)=>{let{query:n,paginate:s,...o}=r||{},i=0,l=()=>it(e)(n||"",{...o,page:i}).then(m=>{for(let[h,g]of Object.entries(m.hits))if(t(g))return{object:g,position:parseInt(h,10),page:i};if(i++,s===!1||i>=m.nbPages)throw Ze();return l()});return l()},mn=e=>(t,r)=>e.transporter.read({method:d.MethodEnum.Get,path:u.encode("1/indexes/%s/%s",e.indexName,t)},r),pn=()=>(e,t)=>{for(let[r,n]of Object.entries(e.hits))if(n.objectID===t)return parseInt(r,10);return-1},hn=e=>(t,r)=>{let{attributesToRetrieve:n,...s}=r||{},o=t.map(i=>({indexName:e.indexName,objectID:i,...n?{attributesToRetrieve:n}:{}}));return e.transporter.read({method:d.MethodEnum.Post,path:"1/indexes/*/objects",data:{requests:o}},s)},yn=e=>(t,r)=>e.transporter.read({method:d.MethodEnum.Get,path:u.encode("1/indexes/%s/rules/%s",e.indexName,t)},r),st=e=>t=>e.transporter.read({method:d.MethodEnum.Get,path:u.encode("1/indexes/%s/settings",e.indexName),data:{getVersion:2}},t),gn=e=>(t,r)=>e.transporter.read({method:d.MethodEnum.Get,path:u.encode("1/indexes/%s/synonyms/%s",e.indexName,t)},r),at=e=>(t,r)=>e.transporter.read({method:d.MethodEnum.Get,path:u.encode("1/indexes/%s/task/%s",e.indexName,t.toString())},r),fn=e=>(t,r)=>u.createWaitablePromise(ot(e)([t],r).then(n=>({objectID:n.objectIDs[0],taskID:n.taskIDs[0]})),(n,s)=>S(e)(n.taskID,s)),ot=e=>(t,r)=>{let{createIfNotExists:n,...s}=r||{},o=n?q.PartialUpdateObject:q.PartialUpdateObjectNoCreate;return J(e)(t,o,s)},Pn=e=>(t,r)=>{let{safe:n,autoGenerateObjectIDIfNotExist:s,batchSize:o,...i}=r||{},l=(y,I,O,x)=>u.createWaitablePromise(e.transporter.write({method:d.MethodEnum.Post,path:u.encode("1/indexes/%s/operation",y),data:{operation:O,destination:I}},x),(P,M)=>S(e)(P.taskID,M)),m=Math.random().toString(36).substring(7),h=`${e.indexName}_tmp_${m}`,g=ce({appId:e.appId,transporter:e.transporter,indexName:h}),p=[],f=l(e.indexName,h,"copy",{...i,scope:["settings","synonyms","rules"]});p.push(f);let A=(n?f.wait(i):f).then(()=>{let y=g(t,{...i,autoGenerateObjectIDIfNotExist:s,batchSize:o});return p.push(y),n?y.wait(i):y}).then(()=>{let y=l(h,e.indexName,"move",i);return p.push(y),n?y.wait(i):y}).then(()=>Promise.all(p)).then(([y,I,O])=>({objectIDs:I.objectIDs,taskIDs:[y.taskID,...I.taskIDs,O.taskID]}));return u.createWaitablePromise(A,(y,I)=>Promise.all(p.map(O=>O.wait(I))))},bn=e=>(t,r)=>ue(e)(t,{...r,clearExistingRules:!0}),En=e=>(t,r)=>de(e)(t,{...r,clearExistingSynonyms:!0}),In=e=>(t,r)=>u.createWaitablePromise(ce(e)([t],r).then(n=>({objectID:n.objectIDs[0],taskID:n.taskIDs[0]})),(n,s)=>S(e)(n.taskID,s)),ce=e=>(t,r)=>{let{autoGenerateObjectIDIfNotExist:n,...s}=r||{},o=n?q.AddObject:q.UpdateObject;if(o===q.UpdateObject){for(let i of t)if(i.objectID===void 0)return u.createWaitablePromise(Promise.reject(Ye()))}return J(e)(t,o,s)},Sn=e=>(t,r)=>ue(e)([t],r),ue=e=>(t,r)=>{let{forwardToReplicas:n,clearExistingRules:s,...o}=r||{},i=D.createMappedRequestOptions(o);return n&&(i.queryParameters.forwardToReplicas=1),s&&(i.queryParameters.clearExistingRules=1),u.createWaitablePromise(e.transporter.write({method:d.MethodEnum.Post,path:u.encode("1/indexes/%s/rules/batch",e.indexName),data:t},i),(l,m)=>S(e)(l.taskID,m))},An=e=>(t,r)=>de(e)([t],r),de=e=>(t,r)=>{let{forwardToReplicas:n,clearExistingSynonyms:s,replaceExistingSynonyms:o,...i}=r||{},l=D.createMappedRequestOptions(i);return n&&(l.queryParameters.forwardToReplicas=1),(o||s)&&(l.queryParameters.replaceExistingSynonyms=1),u.createWaitablePromise(e.transporter.write({method:d.MethodEnum.Post,path:u.encode("1/indexes/%s/synonyms/batch",e.indexName),data:t},l),(m,h)=>S(e)(m.taskID,h))},it=e=>(t,r)=>e.transporter.read({method:d.MethodEnum.Post,path:u.encode("1/indexes/%s/query",e.indexName),data:{query:t},cacheable:!0},r),ct=e=>(t,r,n)=>e.transporter.read({method:d.MethodEnum.Post,path:u.encode("1/indexes/%s/facets/%s/query",e.indexName,t),data:{facetQuery:r},cacheable:!0},n),ut=e=>(t,r)=>e.transporter.read({method:d.MethodEnum.Post,path:u.encode("1/indexes/%s/rules/search",e.indexName),data:{query:t}},r),dt=e=>(t,r)=>e.transporter.read({method:d.MethodEnum.Post,path:u.encode("1/indexes/%s/synonyms/search",e.indexName),data:{query:t}},r),On=e=>(t,r)=>{let{forwardToReplicas:n,...s}=r||{},o=D.createMappedRequestOptions(s);return n&&(o.queryParameters.forwardToReplicas=1),u.createWaitablePromise(e.transporter.write({method:d.MethodEnum.Put,path:u.encode("1/indexes/%s/settings",e.indexName),data:t},o),(i,l)=>S(e)(i.taskID,l))},S=e=>(t,r)=>u.createRetryablePromise(n=>at(e)(t,r).then(s=>s.status!=="published"?n():void 0)),Dn={AddObject:"addObject",Analytics:"analytics",Browser:"browse",DeleteIndex:"deleteIndex",DeleteObject:"deleteObject",EditSettings:"editSettings",ListIndexes:"listIndexes",Logs:"logs",Personalization:"personalization",Recommendation:"recommendation",Search:"search",SeeUnretrievableAttributes:"seeUnretrievableAttributes",Settings:"settings",Usage:"usage"},q={AddObject:"addObject",UpdateObject:"updateObject",PartialUpdateObject:"partialUpdateObject",PartialUpdateObjectNoCreate:"partialUpdateObjectNoCreate",DeleteObject:"deleteObject",DeleteIndex:"delete",ClearIndex:"clear"},X={Settings:"settings",Synonyms:"synonyms",Rules:"rules"},jn={None:"none",StopIfEnoughMatches:"stopIfEnoughMatches"},xn={Synonym:"synonym",OneWaySynonym:"oneWaySynonym",AltCorrection1:"altCorrection1",AltCorrection2:"altCorrection2",Placeholder:"placeholder"};a.ApiKeyACLEnum=Dn;a.BatchActionEnum=q;a.ScopeEnum=X;a.StrategyEnum=jn;a.SynonymEnum=xn;a.addApiKey=fr;a.assignUserID=Pr;a.assignUserIDs=br;a.batch=rt;a.browseObjects=Xr;a.browseRules=Yr;a.browseSynonyms=Zr;a.chunkedBatch=J;a.clearDictionaryEntries=Er;a.clearObjects=en;a.clearRules=tn;a.clearSynonyms=rn;a.copyIndex=Q;a.copyRules=Ir;a.copySettings=Sr;a.copySynonyms=Ar;a.createBrowsablePromise=V;a.createMissingObjectIDError=Ye;a.createObjectNotFoundError=Ze;a.createSearchClient=gr;a.createValidUntilNotFoundError=et;a.customRequest=Or;a.deleteApiKey=Dr;a.deleteBy=nn;a.deleteDictionaryEntries=jr;a.deleteIndex=sn;a.deleteObject=an;a.deleteObjects=nt;a.deleteRule=on;a.deleteSynonym=cn;a.exists=un;a.findAnswers=dn;a.findObject=ln;a.generateSecuredApiKey=xr;a.getApiKey=G;a.getAppTask=tt;a.getDictionarySettings=wr;a.getLogs=Mr;a.getObject=mn;a.getObjectPosition=pn;a.getObjects=hn;a.getRule=yn;a.getSecuredApiKeyRemainingValidity=Rr;a.getSettings=st;a.getSynonym=gn;a.getTask=at;a.getTopUserIDs=vr;a.getUserID=qr;a.hasPendingMappings=Tr;a.initIndex=H;a.listApiKeys=kr;a.listClusters=Cr;a.listIndices=Ur;a.listUserIDs=Nr;a.moveIndex=Wr;a.multipleBatch=Br;a.multipleGetObjects=zr;a.multipleQueries=_r;a.multipleSearchForFacetValues=Kr;a.partialUpdateObject=fn;a.partialUpdateObjects=ot;a.removeUserID=Fr;a.replaceAllObjects=Pn;a.replaceAllRules=bn;a.replaceAllSynonyms=En;a.replaceDictionaryEntries=Gr;a.restoreApiKey=Hr;a.saveDictionaryEntries=Lr;a.saveObject=In;a.saveObjects=ce;a.saveRule=Sn;a.saveRules=ue;a.saveSynonym=An;a.saveSynonyms=de;a.search=it;a.searchDictionaryEntries=$r;a.searchForFacetValues=ct;a.searchRules=ut;a.searchSynonyms=dt;a.searchUserIDs=Vr;a.setDictionarySettings=Qr;a.setSettings=On;a.updateApiKey=Jr;a.waitAppTask=C;a.waitTask=S});var pt=b((ts,mt)=>{mt.exports=lt()});var ht=b(Y=>{"use strict";Object.defineProperty(Y,"__esModule",{value:!0});function wn(){return{debug(e,t){return Promise.resolve()},info(e,t){return Promise.resolve()},error(e,t){return Promise.resolve()}}}var Mn={Debug:1,Info:2,Error:3};Y.LogLevelEnum=Mn;Y.createNullLogger=wn});var gt=b((ns,yt)=>{yt.exports=ht()});var Et=b(le=>{"use strict";Object.defineProperty(le,"__esModule",{value:!0});var ft=require("http"),Pt=require("https"),Rn=require("url"),bt={keepAlive:!0},vn=new ft.Agent(bt),qn=new Pt.Agent(bt);function Tn({agent:e,httpAgent:t,httpsAgent:r,requesterOptions:n={}}={}){let s=t||e||vn,o=r||e||qn;return{send(i){return new Promise(l=>{let m=Rn.parse(i.url),h=m.query===null?m.pathname:`${m.pathname}?${m.query}`,g={...n,agent:m.protocol==="https:"?o:s,hostname:m.hostname,path:h,method:i.method,headers:{...n&&n.headers?n.headers:{},...i.headers},...m.port!==void 0?{port:m.port||""}:{}},p=(m.protocol==="https:"?Pt:ft).request(g,I=>{let O=[];I.on("data",x=>{O=O.concat(x)}),I.on("end",()=>{clearTimeout(A),clearTimeout(y),l({status:I.statusCode||0,content:Buffer.concat(O).toString(),isTimedOut:!1})})}),f=(I,O)=>setTimeout(()=>{p.abort(),l({status:0,content:O,isTimedOut:!0})},I*1e3),A=f(i.connectTimeout,"Connection timeout"),y;p.on("error",I=>{clearTimeout(A),clearTimeout(y),l({status:0,content:I.message,isTimedOut:!1})}),p.once("response",()=>{clearTimeout(A),y=f(i.responseTimeout,"Socket timeout")}),i.data!==void 0&&p.write(i.data),p.end()})},destroy(){return s.destroy(),o.destroy(),Promise.resolve()}}}le.createNodeHttpRequester=Tn});var St=b((as,It)=>{It.exports=Et()});var jt=b((os,Dt)=>{"use strict";var At=Ee(),kn=Ae(),U=$e(),me=W(),pe=Xe(),c=pt(),Cn=gt(),Un=St(),Nn=_();function Ot(e,t,r){let n={appId:e,apiKey:t,timeouts:{connect:2,read:5,write:30},requester:Un.createNodeHttpRequester(),logger:Cn.createNullLogger(),responsesCache:At.createNullCache(),requestsCache:At.createNullCache(),hostsCache:kn.createInMemoryCache(),userAgent:Nn.createUserAgent(me.version).add({segment:"Node.js",version:process.versions.node})},s={...n,...r},o=()=>i=>pe.createPersonalizationClient({...n,...i,methods:{getPersonalizationStrategy:pe.getPersonalizationStrategy,setPersonalizationStrategy:pe.setPersonalizationStrategy}});return c.createSearchClient({...s,methods:{search:c.multipleQueries,searchForFacetValues:c.multipleSearchForFacetValues,multipleBatch:c.multipleBatch,multipleGetObjects:c.multipleGetObjects,multipleQueries:c.multipleQueries,copyIndex:c.copyIndex,copySettings:c.copySettings,copyRules:c.copyRules,copySynonyms:c.copySynonyms,moveIndex:c.moveIndex,listIndices:c.listIndices,getLogs:c.getLogs,listClusters:c.listClusters,multipleSearchForFacetValues:c.multipleSearchForFacetValues,getApiKey:c.getApiKey,addApiKey:c.addApiKey,listApiKeys:c.listApiKeys,updateApiKey:c.updateApiKey,deleteApiKey:c.deleteApiKey,restoreApiKey:c.restoreApiKey,assignUserID:c.assignUserID,assignUserIDs:c.assignUserIDs,getUserID:c.getUserID,searchUserIDs:c.searchUserIDs,listUserIDs:c.listUserIDs,getTopUserIDs:c.getTopUserIDs,removeUserID:c.removeUserID,hasPendingMappings:c.hasPendingMappings,generateSecuredApiKey:c.generateSecuredApiKey,getSecuredApiKeyRemainingValidity:c.getSecuredApiKeyRemainingValidity,destroy:me.destroy,clearDictionaryEntries:c.clearDictionaryEntries,deleteDictionaryEntries:c.deleteDictionaryEntries,getDictionarySettings:c.getDictionarySettings,getAppTask:c.getAppTask,replaceDictionaryEntries:c.replaceDictionaryEntries,saveDictionaryEntries:c.saveDictionaryEntries,searchDictionaryEntries:c.searchDictionaryEntries,setDictionarySettings:c.setDictionarySettings,waitAppTask:c.waitAppTask,customRequest:c.customRequest,initIndex:i=>l=>c.initIndex(i)(l,{methods:{batch:c.batch,delete:c.deleteIndex,findAnswers:c.findAnswers,getObject:c.getObject,getObjects:c.getObjects,saveObject:c.saveObject,saveObjects:c.saveObjects,search:c.search,searchForFacetValues:c.searchForFacetValues,waitTask:c.waitTask,setSettings:c.setSettings,getSettings:c.getSettings,partialUpdateObject:c.partialUpdateObject,partialUpdateObjects:c.partialUpdateObjects,deleteObject:c.deleteObject,deleteObjects:c.deleteObjects,deleteBy:c.deleteBy,clearObjects:c.clearObjects,browseObjects:c.browseObjects,getObjectPosition:c.getObjectPosition,findObject:c.findObject,exists:c.exists,saveSynonym:c.saveSynonym,saveSynonyms:c.saveSynonyms,getSynonym:c.getSynonym,searchSynonyms:c.searchSynonyms,browseSynonyms:c.browseSynonyms,deleteSynonym:c.deleteSynonym,clearSynonyms:c.clearSynonyms,replaceAllObjects:c.replaceAllObjects,replaceAllSynonyms:c.replaceAllSynonyms,searchRules:c.searchRules,getRule:c.getRule,deleteRule:c.deleteRule,saveRule:c.saveRule,saveRules:c.saveRules,replaceAllRules:c.replaceAllRules,browseRules:c.browseRules,clearRules:c.clearRules}}),initAnalytics:()=>i=>U.createAnalyticsClient({...n,...i,methods:{addABTest:U.addABTest,getABTest:U.getABTest,getABTests:U.getABTests,stopABTest:U.stopABTest,deleteABTest:U.deleteABTest}}),initPersonalization:o,initRecommendation:()=>i=>(s.logger.info("The `initRecommendation` method is deprecated. Use `initPersonalization` instead."),o()(i))}})}Ot.version=me.version;Dt.exports=Ot});var wt=b((is,he)=>{var xt=jt();he.exports=xt;he.exports.default=xt});var Rt=b((cs,Mt)=>{Mt.exports=wt()});var Wn={};Wt(Wn,{default:()=>qt});var j=require("@raycast/api"),v=require("react"),vt=Bt(Rt());function qt(){let e=(0,j.getPreferenceValues)(),t=(0,v.useMemo)(()=>(0,vt.default)(e.appId,e.apiKey),[e.appId,e.apiKey]),r=(0,v.useMemo)(()=>t.initIndex(e.indexName),[t,e.indexName]),[n,s]=(0,v.useState)(),[o,i]=(0,v.useState)(!1),l=async(m="")=>(i(!0),await r.search(m).then(h=>(i(!1),h.hits)).catch(h=>(i(!1),(0,j.showToast)(j.ToastStyle.Failure,"Algolia Error",h.message),[])));return(0,v.useEffect)(()=>{(async()=>s(await l()))()},[]),_jsx(j.List,{throttle:!0,isLoading:o||n===void 0,onSearchTextChange:async m=>s(await l(m))},n?.map(m=>_jsx(j.List.Item,{key:m.objectID,title:m[e.mainAttribute],subtitle:e.secondaryAttribute?m[e.secondaryAttribute]:void 0,actions:e.urlAttribute?_jsx(j.ActionPanel,{title:m.name},_jsx(j.OpenInBrowserAction,{url:m.url,title:"Open in Browser"})):void 0})))}module.exports=zt(Wn);0&&(module.exports={});
