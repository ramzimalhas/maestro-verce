"use strict";var p=Object.create;var o=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var w=Object.getPrototypeOf,F=Object.prototype.hasOwnProperty;var x=(t,e)=>{for(var i in e)o(t,i,{get:e[i],enumerable:!0})},u=(t,e,i,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of m(e))!F.call(t,s)&&s!==i&&o(t,s,{get:()=>e[s],enumerable:!(n=h(e,s))||n.enumerable});return t};var g=(t,e,i)=>(i=t!=null?p(w(t)):{},u(e||!t||!t.__esModule?o(i,"default",{value:t,enumerable:!0}):i,t)),y=t=>u(o({},"__esModule",{value:!0}),t);var v={};x(v,{default:()=>c});module.exports=y(v);var a=require("@raycast/api"),r=g(require("fs"));async function c(t){if(t.launchContext?.path)await d(t.launchContext?.path),await(0,a.showHUD)("File updated!");else try{let[e]=await(0,a.getSelectedFinderItems)();await d(e.path),await(0,a.showHUD)("File updated!")}catch{await(0,a.showToast)({style:a.Toast.Style.Failure,title:"Cannot find file.",message:"Make sure the file is selected in Finder"})}}async function d(t){if(!t.endsWith(".txt"))throw new Error("The file must have a .txt extension");return new Promise((e,i)=>{r.default.readFile(t,"utf-8",(n,s)=>{if(n){i(n);return}let f=C(s);r.default.writeFile(t,f,"utf-8",l=>{if(l){i(l);return}e()})})})}function C(t){let e=t.split(`
`),i=[];for(let n=0;n<e.length;n++)e[n].match(/^\[\d\d:\d\d:\d\d\].+/)&&e[n].split("]")[1].trim()!==""&&i.push(e[n].split("---")[0].trim());return i.join(`
`)}0&&(module.exports={});
