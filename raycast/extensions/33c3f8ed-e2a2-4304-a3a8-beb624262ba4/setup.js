"use strict";var I=Object.defineProperty;var O=Object.getOwnPropertyDescriptor;var V=Object.getOwnPropertyNames;var N=Object.prototype.hasOwnProperty;var R=(e,t)=>{for(var o in t)I(e,o,{get:t[o],enumerable:!0})},T=(e,t,o,p)=>{if(t&&typeof t=="object"||typeof t=="function")for(let l of V(t))!N.call(e,l)&&l!==o&&I(e,l,{get:()=>t[l],enumerable:!(p=O(t,l))||p.enumerable});return e};var Z=e=>T(I({},"__esModule",{value:!0}),e);var Y={};R(Y,{default:()=>B});module.exports=Z(Y);var m=require("@raycast/api");var E=require("crypto");var P="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";var _=128,u,b,z=e=>{!u||u.length<e?(u=Buffer.allocUnsafe(e*_),(0,E.randomFillSync)(u),b=0):b+e>u.length&&((0,E.randomFillSync)(u),b=0),b+=e};var L=(e=21)=>{z(e-=0);let t="";for(let o=b-e;o<b;o++)t+=P[u[o]&63];return t};var f=require("react");var s=require("@raycast/api"),g=require("react"),A=require("react/jsx-runtime"),w=({defaultUrl:e,onCreate:t,onEdit:o})=>{let[p,l]=(0,g.useState)(),{pop:i}=(0,s.useNavigation)();function r(){p&&p.length>0&&l(void 0)}let n=(0,g.useCallback)(c=>{c.url.match(/^https?:\/\/(?:www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b(?:[-a-zA-Z0-9()@:%_+.~#?&/=]*)$/)?(t&&(t(c.url),i()),o&&(o(c.url),i())):l("Please enter valid URL")},[t,i]);return(0,A.jsx)(s.Form,{actions:(0,A.jsxs)(s.ActionPanel,{children:[t&&(0,A.jsx)(s.Action.SubmitForm,{title:"Add Website",icon:s.Icon.PlusCircle,onSubmit:n}),o&&(0,A.jsx)(s.Action.SubmitForm,{title:"Edit Website",icon:s.Icon.Pencil,onSubmit:n})]}),children:(0,A.jsx)(s.Form.TextField,{id:"url",title:"URL",defaultValue:e,error:p,onChange:()=>r()})})};var W=require("@raycast/api");var h=require("@raycast/api");var U=require("react/jsx-runtime"),x=({onCreate:e})=>(0,U.jsx)(h.Action.Push,{icon:h.Icon.PlusCircle,title:"Add Website",shortcut:{modifiers:["cmd"],key:"n"},target:(0,U.jsx)(w,{defaultUrl:"https://",onCreate:e})}),C=x;var S=require("react/jsx-runtime"),D=({onCreate:e})=>(0,S.jsx)(W.List.EmptyView,{title:"No websites found",description:"You have not added any websites yet. Why not add some?",actions:(0,S.jsx)(W.ActionPanel,{children:(0,S.jsx)(C,{onCreate:e})})});var a=require("@raycast/api"),M=require("react/jsx-runtime"),F=({onDelete:e})=>(0,M.jsx)(a.Action,{icon:a.Icon.Trash,title:"Delete Website",style:a.Action.Style.Destructive,shortcut:{modifiers:["ctrl"],key:"x"},onAction:async()=>{let t={title:"Are you sure to delete the website?",primaryAction:{title:"Delete",onAction:e,style:a.Alert.ActionStyle.Destructive}};await(0,a.confirmAlert)(t)}});var y=require("@raycast/api");var v=require("react/jsx-runtime"),J=({defaultUrl:e,onEdit:t})=>(0,v.jsx)(y.Action.Push,{icon:y.Icon.Pencil,title:"Edit Website",shortcut:{modifiers:["cmd"],key:"e"},target:(0,v.jsx)(w,{defaultUrl:e,onEdit:t})}),k=J;var d=require("react/jsx-runtime"),B=()=>{let[e,t]=(0,f.useState)({isLoading:!0,websites:[]});(0,f.useEffect)(()=>{(async()=>{let i=await m.LocalStorage.getItem("websites");if(!i){t(r=>({...r,isLoading:!1}));return}try{let r=JSON.parse(i);t(n=>({...n,websites:r,isLoading:!1}))}catch{t(n=>({...n,websites:[],isLoading:!1}))}})()},[]),(0,f.useEffect)(()=>{m.LocalStorage.setItem("websites",JSON.stringify(e.websites))},[e.websites]);let o=(0,f.useCallback)(i=>{let r=[...e.websites,{id:L(),url:i}];t(n=>({...n,websites:r}))},[e.websites,t]),p=(0,f.useCallback)((i,r)=>{let n=[...e.websites].map(c=>({id:c.id,url:i===c.id?r:c.url}));t(c=>({...c,websites:n}))},[e.websites,t]),l=(0,f.useCallback)(i=>{let r=[...e.websites];r.splice(i,1),t(n=>({...n,websites:r}))},[e.websites,t]);return(0,d.jsxs)(m.List,{isLoading:e.isLoading,children:[(0,d.jsx)(D,{onCreate:o}),e.websites?.map((i,r)=>(0,d.jsx)(m.List.Item,{title:i.url,icon:`https://www.google.com/s2/favicons?domain=${i.url}&sz=64`,actions:(0,d.jsx)(m.ActionPanel,{children:(0,d.jsxs)(m.ActionPanel.Section,{children:[(0,d.jsx)(x,{onCreate:o}),(0,d.jsx)(k,{defaultUrl:i.url,onEdit:n=>p(i.id,n)}),(0,d.jsx)(F,{onDelete:()=>l(r)})]})})},i.id))]})};0&&(module.exports={});
